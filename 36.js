(self.webpackChunksite=self.webpackChunksite||[]).push([[36],{9128:(_t,k,l)=>{"use strict";l.d(k,{V:()=>O});var Z=l(2398),T=l(3314);const N=["*"];let O=(()=>{class y{constructor(){this.onChange=new Z.vpe,this.onError=new Z.vpe,this.onPropertyChange=new Z.vpe}ngOnInit(){this.instance||(this.instance=new T.Z(this)),this.instance.on("change",C=>this.onChange.emit(C)),this.instance.on("error",C=>this.onError.emit(C)),this.instance.on("propertychange",C=>this.onPropertyChange.emit(C))}ngOnChanges(C){var L;if(this.instance){const p=(null===(L=C.properties)||void 0===L?void 0:L.currentValue)||{};for(const s in C)Object.prototype.hasOwnProperty.call(C,s)&&(p[s]=C[s].currentValue);this.instance.setProperties(p)}}}return y.\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Z.Xpm({type:y,selectors:[["nol-base-object"]],outputs:{onChange:"onChange",onError:"onError",onPropertyChange:"onPropertyChange"},exportAs:["nolBaseObject"],features:[Z.TTD],ngContentSelectors:N,decls:1,vars:0,template:function(C,L){1&C&&(Z.F$t(),Z.Hsn(0))},encapsulation:2,changeDetection:0}),y})()},5658:(_t,k,l)=>{"use strict";l.d(k,{E:()=>I});var Z=l(7608),T=l(2398),N=l(9128),O=l(9968);const y=["*"];let I=(()=>{class C extends N.V{constructor(){super(),this.onExtentChange=new T.vpe,this.onMaxResolutionChange=new T.vpe,this.onMaxZoomChange=new T.vpe,this.onMinResolutionChange=new T.vpe,this.onMinZoomChange=new T.vpe,this.onOpacityChange=new T.vpe,this.onVisibleChange=new T.vpe,this.onZIndexChange=new T.vpe}ngOnInit(){this.instance||(this.instance=new O.Z(this)),this.instance.on("change:extent",p=>this.onExtentChange.emit(p)),this.instance.on("change:maxResolution",p=>this.onMaxResolutionChange.emit(p)),this.instance.on("change:maxZoom",p=>this.onMaxZoomChange.emit(p)),this.instance.on("change:minResolution",p=>this.onMinResolutionChange.emit(p)),this.instance.on("change:minZoom",p=>this.onMinZoomChange.emit(p)),this.instance.on("change:opacity",p=>this.onOpacityChange.emit(p)),this.instance.on("change:visible",p=>this.onVisibleChange.emit(p)),this.instance.on("change:zIndex",p=>this.onZIndexChange.emit(p)),super.ngOnInit()}ngOnChanges(p){const{extent:s,maxResolution:o,maxZoom:t,minResolution:e,minZoom:d,opacity:n,visible:a,zIndex:c}=p,i=(0,Z._T)(p,["extent","maxResolution","maxZoom","minResolution","minZoom","opacity","visible","zIndex"]);this.instance&&s&&this.instance.setExtent(s.currentValue),this.instance&&o&&this.instance.setMaxResolution(o.currentValue),this.instance&&t&&this.instance.setMaxZoom(t.currentValue),this.instance&&e&&this.instance.setMinResolution(e.currentValue),this.instance&&d&&this.instance.setMinZoom(d.currentValue),this.instance&&n&&this.instance.setOpacity(n.currentValue),this.instance&&a&&this.instance.setVisible(a.currentValue),this.instance&&c&&this.instance.setZIndex(c.currentValue),super.ngOnChanges(i)}}return C.\u0275fac=function(p){return new(p||C)},C.\u0275cmp=T.Xpm({type:C,selectors:[["nol-base-layer"]],inputs:{opacity:"opacity",visible:"visible",extent:"extent",zIndex:"zIndex",minResolution:"minResolution",maxResolution:"maxResolution",minZoom:"minZoom",maxZoom:"maxZoom",properties:"properties"},outputs:{onExtentChange:"onExtentChange",onMaxResolutionChange:"onMaxResolutionChange",onMaxZoomChange:"onMaxZoomChange",onMinResolutionChange:"onMinResolutionChange",onMinZoomChange:"onMinZoomChange",onOpacityChange:"onOpacityChange",onVisibleChange:"onVisibleChange",onZIndexChange:"onZIndexChange"},exportAs:["nolBaseLayer"],features:[T.qOj,T.TTD],ngContentSelectors:y,decls:1,vars:0,template:function(p,s){1&p&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),C})()},4413:(_t,k,l)=>{"use strict";l.d(k,{D:()=>L});var Z=l(7608),T=l(2398),N=l(7359),O=l(1323),y=l(2683),I=l(4241);const C=["*"];let L=(()=>{class p extends N.X{constructor(o,t){super(o,t),this.onPreloadChange=new T.vpe,this.onUseInterimTilesOnErrorChange=new T.vpe}ngOnInit(){this.instance||(this.instance=new O.Z(this)),this.instance.on("change:preload",o=>this.onPreloadChange.emit(o)),this.instance.on("change:useInterimTilesOnError",o=>this.onUseInterimTilesOnErrorChange.emit(o)),super.ngOnInit()}ngOnChanges(o){const{preload:t,useInterimTilesOnError:e}=o,d=(0,Z._T)(o,["preload","useInterimTilesOnError"]);this.instance&&t&&this.instance.setPreload(t.currentValue),this.instance&&e&&this.instance.setUseInterimTilesOnError(e.currentValue),super.ngOnChanges(d)}}return p.\u0275fac=function(o){return new(o||p)(T.Y36(y.T,8),T.Y36(I.f,8))},p.\u0275cmp=T.Xpm({type:p,selectors:[["nol-base-tile-layer"]],inputs:{source:"source",preload:"preload",useInterimTilesOnError:"useInterimTilesOnError",map:"map"},outputs:{onPreloadChange:"onPreloadChange",onUseInterimTilesOnErrorChange:"onUseInterimTilesOnErrorChange"},exportAs:["nolBaseTileLayer"],features:[T.qOj,T.TTD],ngContentSelectors:C,decls:1,vars:0,template:function(o,t){1&o&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),p})()},5301:(_t,k,l)=>{"use strict";l.d(k,{$:()=>L});var Z=l(7608),T=l(7359),N=l(3312),O=l(2398),y=l(2683),I=l(4241);const C=["*"];let L=(()=>{class p extends T.X{constructor(o,t){super(o,t)}ngOnInit(){this.instance||(this.instance=new N.Z(this)),super.ngOnInit()}ngOnChanges(o){const{style:t}=o,e=(0,Z._T)(o,["style"]);this.instance&&t&&this.instance.setStyle(t.currentValue),super.ngOnChanges(e)}}return p.\u0275fac=function(o){return new(o||p)(O.Y36(y.T,8),O.Y36(I.f,8))},p.\u0275cmp=O.Xpm({type:p,selectors:[["nol-base-vector-layer"]],exportAs:["nolBaseVectorLayer"],features:[O.qOj,O.TTD],ngContentSelectors:C,decls:1,vars:0,template:function(o,t){1&o&&(O.F$t(),O.Hsn(0))},encapsulation:2,changeDetection:0}),p})()},4241:(_t,k,l)=>{"use strict";l.d(k,{f:()=>C});var Z=l(7608),T=l(2398),N=l(5658),O=l(450),y=l(2683);const I=["*"];let C=(()=>{class L extends N.E{constructor(s,o){if(super(),this.mapHost=s,this.layerGroupHost=o,this.onLayersChange=new T.vpe,!this.mapHost&&!this.layerGroupHost)throw"Layer group component must be nested within a map or layer group component."}ngOnInit(){var s;this.instance=new O.Z(this),this.instance.on("change:layers",o=>this.onLayersChange.emit(o)),super.ngOnInit(),this.layerGroupHost?this.layerGroupHost.instance.getLayers().push(this.instance):null===(s=this.mapHost)||void 0===s||s.instance.addLayer(this.instance)}ngOnChanges(s){const{layers:o}=s,t=(0,Z._T)(s,["layers"]);this.instance&&o&&this.instance.setLayers(o.currentValue),super.ngOnChanges(t)}ngOnDestroy(){var s;this.layerGroupHost?this.layerGroupHost.instance.getLayers().remove(this.instance):null===(s=this.mapHost)||void 0===s||s.instance.removeLayer(this.instance)}}return L.\u0275fac=function(s){return new(s||L)(T.Y36(y.T,8),T.Y36(L,12))},L.\u0275cmp=T.Xpm({type:L,selectors:[["nol-layer-group"]],inputs:{layers:"layers"},outputs:{onLayersChange:"onLayersChange"},exportAs:["nolLayerGroup"],features:[T.qOj,T.TTD],ngContentSelectors:I,decls:1,vars:0,template:function(s,o){1&s&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),L})()},7359:(_t,k,l)=>{"use strict";l.d(k,{X:()=>L});var Z=l(7608),T=l(2398),N=l(5658),O=l(8594),y=l(2683),I=l(4241);const C=["*"];let L=(()=>{class p extends N.E{constructor(o,t){if(super(),this.mapHost=o,this.layerGroupHost=t,this.onSourceChange=new T.vpe,this.onPostrender=new T.vpe,this.onPrerender=new T.vpe,!this.mapHost&&!this.layerGroupHost)throw"Layer component must be nested within a map or layer group component."}ngOnInit(){var o;this.instance||(this.instance=new O.Z(this)),this.instance.on("change:source",t=>this.onSourceChange.emit(t)),this.instance.on("postrender",t=>this.onPostrender.emit(t)),this.instance.on("prerender",t=>this.onPrerender.emit(t)),super.ngOnInit(),this.layerGroupHost?this.layerGroupHost.instance.getLayers().push(this.instance):null===(o=this.mapHost)||void 0===o||o.instance.addLayer(this.instance)}ngOnChanges(o){const{map:t,source:e}=o,d=(0,Z._T)(o,["map","source"]);this.instance&&t&&this.instance.setMap(t.currentValue),this.instance&&e&&this.instance.setSource(e.currentValue),super.ngOnChanges(d)}ngOnDestroy(){var o;this.layerGroupHost?this.layerGroupHost.instance.getLayers().remove(this.instance):null===(o=this.mapHost)||void 0===o||o.instance.removeLayer(this.instance)}}return p.\u0275fac=function(o){return new(o||p)(T.Y36(y.T,8),T.Y36(I.f,8))},p.\u0275cmp=T.Xpm({type:p,selectors:[["nol-layer"]],inputs:{className:"className"},outputs:{onSourceChange:"onSourceChange",onPostrender:"onPostrender",onPrerender:"onPrerender"},exportAs:["nolLayer"],features:[T.qOj,T.TTD],ngContentSelectors:C,decls:1,vars:0,template:function(o,t){1&o&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),p})()},9545:(_t,k,l)=>{"use strict";l.d(k,{K:()=>s});var Z=l(4413),T=l(1323),N=l(637);const y=class O extends T.Z{constructor(t){super(t)}createRenderer(){return new N.Z(this)}};var I=l(2398),C=l(2683),L=l(4241);const p=["*"];let s=(()=>{class o extends Z.D{constructor(e,d){super(e,d)}ngOnInit(){this.instance=new y(this),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(I.Y36(C.T,8),I.Y36(L.f,8))},o.\u0275cmp=I.Xpm({type:o,selectors:[["nol-tile-layer"]],exportAs:["nolTileLayer"],features:[I.qOj],ngContentSelectors:p,decls:1,vars:0,template:function(e,d){1&e&&(I.F$t(),I.Hsn(0))},encapsulation:2,changeDetection:0}),o})()},139:(_t,k,l)=>{"use strict";l.d(k,{V:()=>N});var Z=l(2031),T=l(2398);let N=(()=>{class O{}return O.\u0275fac=function(I){return new(I||O)},O.\u0275mod=T.oAB({type:O}),O.\u0275inj=T.cJS({imports:[Z.ez]}),O})()},2683:(_t,k,l)=>{"use strict";l.d(k,{T:()=>An});var Z=l(7608),T=l(2398),N=l(3314),O=l(1092),y=l(6403),I=l(5783),C=l(5995),L=l(1540),p=l(3863),s=l(1063),o=l(9842),t=l(8594),e=l(9611);function n(rt,h){o.c.expire()}const a=class d extends I.Z{constructor(h){super(),this.map_=h}dispatchRenderEvent(h,x){(0,L.O3)()}calculateMatrices2D(h){const x=h.viewState,X=h.coordinateToPixelTransform,H=h.pixelToCoordinateTransform;(0,p.qC)(X,h.size[0]/2,h.size[1]/2,1/x.resolution,-1/x.resolution,-x.rotation,-x.center[0],-x.center[1]),(0,p.nb)(H,X)}forEachFeatureAtCoordinate(h,x,X,H,ut,ft,yt,ne){let le;const me=x.viewState;function De(Te,Le,un,tn){return ut.call(ft,Le,Te?un:null,tn)}const hn=me.projection,Rn=(0,e.Cf)(h.slice(),hn),cn=[[0,0]];if(hn.canWrapX()&&H){const Te=hn.getExtent(),Le=(0,s.dz)(Te);cn.push([-Le,0],[Le,0])}const gn=x.layerStatesArray,xn=gn.length,Ye=[],fn=[];for(let Te=0;Te<cn.length;Te++)for(let Le=xn-1;Le>=0;--Le){const un=gn[Le],tn=un.layer;if(tn.hasRenderer()&&(0,t.j)(un,me)&&yt.call(ne,tn)){const Pn=tn.getRenderer(),In=tn.getSource();if(Pn&&In){const On=In.getWrapX()?Rn:h,Dn=De.bind(null,un.managed);fn[0]=On[0]+cn[Te][0],fn[1]=On[1]+cn[Te][1],le=Pn.forEachFeatureAtCoordinate(fn,x,X,Dn,Ye)}if(le)return le}}if(0===Ye.length)return;const vn=1/Ye.length;return Ye.forEach((Te,Le)=>Te.distanceSq+=Le*vn),Ye.sort((Te,Le)=>Te.distanceSq-Le.distanceSq),Ye.some(Te=>le=Te.callback(Te.feature,Te.layer,Te.geometry)),le}hasFeatureAtCoordinate(h,x,X,H,ut,ft){return void 0!==this.forEachFeatureAtCoordinate(h,x,X,H,C.uX,this,ut,ft)}getMap(){return this.map_}renderFrame(h){(0,L.O3)()}scheduleExpireIconCache(h){o.c.canExpireCache()&&h.postRenderFunctions.push(n)}};var c=l(8331),i=l(6853),u=l(1206),m=l(1193),_=l(5909),R=l(1074),v=l(6694);const D=class P extends a{constructor(h){super(h),this.fontChangeListenerKey_=(0,R.oL)(_.sG,c.Z.PROPERTYCHANGE,h.redrawText.bind(h)),this.element_=document.createElement("div");const x=this.element_.style;x.position="absolute",x.width="100%",x.height="100%",x.zIndex="0",this.element_.className=m.XV+" ol-layers";const X=h.getViewport();X.insertBefore(this.element_,X.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(h,x){const X=this.getMap();if(X.hasListener(h)){const H=new i.Z(h,void 0,x);X.dispatchEvent(H)}}disposeInternal(){(0,R.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(h){if(!h)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(h),this.dispatchRenderEvent(u.Z.PRECOMPOSE,h);const x=h.layerStatesArray.sort(function(ft,yt){return ft.zIndex-yt.zIndex}),X=h.viewState;this.children_.length=0;const H=[];let ut=null;for(let ft=0,yt=x.length;ft<yt;++ft){const ne=x[ft];h.layerIndex=ft;const le=ne.layer,me=le.getSourceState();if(!(0,t.j)(ne,X)||"ready"!=me&&"undefined"!=me){le.unrender();continue}const De=le.render(h,ut);!De||(De!==ut&&(this.children_.push(De),ut=De),"getDeclutter"in le&&H.push(le))}for(let ft=H.length-1;ft>=0;--ft)H[ft].renderDeclutter(h);(0,v.hF)(this.element_,this.children_),this.dispatchRenderEvent(u.Z.POSTCOMPOSE,h),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(h)}};var w=l(8501),G=l(450),V=l(5390);const B=class K extends V.ZP{constructor(h,x,X){super(h),this.map=x,this.frameState=void 0!==X?X:null}},g=class S extends B{constructor(h,x,X,H,ut,ft){super(h,x,ut),this.originalEvent=X,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==H&&H,this.activePointers=ft}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(h){this.pixel_=h}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(h){this.coordinate_=h}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},f={SINGLECLICK:"singleclick",CLICK:w.Z.CLICK,DBLCLICK:w.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var U=l(170),W=l(4544);const $=class q extends U.Z{constructor(h,x){super(h),this.map_=h,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===x?1:x,this.down_=null;const X=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=X,this.pointerdownListenerKey_=(0,R.oL)(X,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=(0,R.oL)(X,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(w.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!W.bM&&{passive:!1})}emulateClick_(h){let x=new g(f.CLICK,this.map_,h);this.dispatchEvent(x),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,x=new g(f.DBLCLICK,this.map_,h),this.dispatchEvent(x)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const X=new g(f.SINGLECLICK,this.map_,h);this.dispatchEvent(X)}.bind(this),250)}updateActivePointers_(h){const x=h,X=x.pointerId;if(x.type==f.POINTERUP||x.type==f.POINTERCANCEL){delete this.trackedTouches_[X];for(const H in this.trackedTouches_)if(this.trackedTouches_[H].target!==x.target){delete this.trackedTouches_[H];break}}else(x.type==f.POINTERDOWN||x.type==f.POINTERMOVE)&&(this.trackedTouches_[X]=x);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(h){this.updateActivePointers_(h);const x=new g(f.POINTERUP,this.map_,h,void 0,void 0,this.activePointers_);this.dispatchEvent(x),this.emulateClicks_&&!x.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(h)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(R.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(h){return 0===h.button}handlePointerDown_(h){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(h);const x=new g(f.POINTERDOWN,this.map_,h,void 0,void 0,this.activePointers_);this.dispatchEvent(x),this.down_={};for(const X in h){const H=h[X];this.down_[X]="function"==typeof H?C.Zn:H}if(0===this.dragListenerKeys_.length){const X=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,R.oL)(X,f.POINTERMOVE,this.handlePointerMove_,this),(0,R.oL)(X,f.POINTERUP,this.handlePointerUp_,this),(0,R.oL)(this.element_,f.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==X&&this.dragListenerKeys_.push((0,R.oL)(this.element_.getRootNode(),f.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(h){if(this.isMoving_(h)){this.updateActivePointers_(h),this.dragging_=!0;const x=new g(f.POINTERDRAG,this.map_,h,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(x)}}relayMoveEvent_(h){this.originalPointerMoveEvent_=h;const x=!(!this.down_||!this.isMoving_(h));this.dispatchEvent(new g(f.POINTERMOVE,this.map_,h,x))}handleTouchMove_(h){const x=this.originalPointerMoveEvent_;(!x||x.defaultPrevented)&&("boolean"!=typeof h.cancelable||!0===h.cancelable)&&h.preventDefault()}isMoving_(h){return this.dragging_||Math.abs(h.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(h.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,R.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(w.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,R.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(R.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var z=l(4933);var J=l(9772),it=l(5230);const et=1/0;var Rt=l(2763);var wt=l(8259),jt=l(4361),F=l(4166);var nt=l(2502);function Dt(rt,h,x,X){const H=rt.getZoom();if(void 0===H)return;const ut=rt.getConstrainedZoom(H+h),ft=rt.getResolutionForZoom(ut);rt.getAnimating()&&rt.cancelAnimations(),rt.animate({resolution:ft,anchor:x,duration:void 0!==X?X:250,easing:nt.Vv})}const At=class ht extends N.Z{constructor(h){super(),h&&h.handleEvent&&(this.handleEvent=h.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(h){return!0}setActive(h){this.set("active",h)}setMap(h){this.map_=h}},Ut=class Gt extends At{constructor(h){super(),this.delta_=(h=h||{}).delta?h.delta:1,this.duration_=void 0!==h.duration?h.duration:250}handleEvent(h){let x=!1;if(h.type==f.DBLCLICK){const X=h.originalEvent,ut=h.coordinate,ft=X.shiftKey?-this.delta_:this.delta_;Dt(h.map.getView(),ft,ut,this.duration_),X.preventDefault(),x=!0}return!x}};function Ht(rt){const h=rt.length;let x=0,X=0;for(let H=0;H<h;H++)x+=rt[H].clientX,X+=rt[H].clientY;return[x/h,X/h]}const $t=class Mt extends At{constructor(h){super(h=h||{}),h.handleDownEvent&&(this.handleDownEvent=h.handleDownEvent),h.handleDragEvent&&(this.handleDragEvent=h.handleDragEvent),h.handleMoveEvent&&(this.handleMoveEvent=h.handleMoveEvent),h.handleUpEvent&&(this.handleUpEvent=h.handleUpEvent),h.stopDown&&(this.stopDown=h.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(h){return!1}handleDragEvent(h){}handleEvent(h){if(!h.originalEvent)return!0;let x=!1;if(this.updateTrackedPointers_(h),this.handlingDownUpSequence){if(h.type==f.POINTERDRAG)this.handleDragEvent(h),h.originalEvent.preventDefault();else if(h.type==f.POINTERUP){const X=this.handleUpEvent(h);this.handlingDownUpSequence=X&&this.targetPointers.length>0}}else if(h.type==f.POINTERDOWN){const X=this.handleDownEvent(h);this.handlingDownUpSequence=X,x=this.stopDown(X)}else h.type==f.POINTERMOVE&&this.handleMoveEvent(h);return!x}handleMoveEvent(h){}handleUpEvent(h){return!1}stopDown(h){return h}updateTrackedPointers_(h){h.activePointers&&(this.targetPointers=h.activePointers)}};function zt(rt){const h=arguments;return function(x){let X=!0;for(let H=0,ut=h.length;H<ut&&(X=X&&h[H](x),X);++H);return X}}const ae=function(rt){const h=rt.originalEvent;return h.altKey&&!(h.metaKey||h.ctrlKey)&&h.shiftKey},ue=function(rt){return!rt.map.getTargetElement().hasAttribute("tabindex")||function(rt){const h=rt.map.getTargetElement(),x=rt.map.getOwnerDocument().activeElement;return h.contains(x)}(rt)},fe=C.uX,Ke=function(rt){const h=rt.originalEvent;return 0==h.button&&!(W.G$&&W.tK&&h.ctrlKey)},dt=function(rt){const h=rt.originalEvent;return!h.altKey&&!(h.metaKey||h.ctrlKey)&&!h.shiftKey},Pt=function(rt){const h=rt.originalEvent;return!h.altKey&&!(h.metaKey||h.ctrlKey)&&h.shiftKey},bt=function(rt){const h=rt.originalEvent,x=h.target.tagName;return"INPUT"!==x&&"SELECT"!==x&&"TEXTAREA"!==x&&!h.target.isContentEditable},Nt=function(rt){const h=rt.originalEvent;return(0,J.h)(void 0!==h,56),"mouse"==h.pointerType},he=function(rt){const h=rt.originalEvent;return(0,J.h)(void 0!==h,56),h.isPrimary&&0===h.button},Ie=class Ee extends $t{constructor(h){super({stopDown:C.Dv}),this.kinetic_=(h=h||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const x=h.condition?h.condition:zt(dt,he);this.condition_=h.onFocusOnly?zt(ue,x):x,this.noKinetic_=!1}handleDragEvent(h){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const x=this.targetPointers,X=Ht(x);if(x.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(X[0],X[1]),this.lastCentroid){const H=[this.lastCentroid[0]-X[0],X[1]-this.lastCentroid[1]],ft=h.map.getView();(0,e.bA)(H,ft.getResolution()),(0,e.U1)(H,ft.getRotation()),ft.adjustCenterInternal(H)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=X,this.lastPointersCount_=x.length,h.originalEvent.preventDefault()}handleUpEvent(h){const x=h.map,X=x.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const H=this.kinetic_.getDistance(),ut=this.kinetic_.getAngle(),ft=X.getCenterInternal(),yt=x.getPixelFromCoordinateInternal(ft),ne=x.getCoordinateFromPixelInternal([yt[0]-H*Math.cos(ut),yt[1]-H*Math.sin(ut)]);X.animateInternal({center:X.getConstrainedCenter(ne),duration:500,easing:nt.Vv})}return this.panning_&&(this.panning_=!1,X.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(h){if(this.targetPointers.length>0&&this.condition_(h)){const X=h.map.getView();return this.lastCentroid=null,X.getAnimating()&&X.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var ye=l(9194);const Xe=class Ae extends $t{constructor(h){h=h||{},super({stopDown:C.Dv}),this.condition_=h.condition?h.condition:ae,this.lastAngle_=void 0,this.duration_=void 0!==h.duration?h.duration:250}handleDragEvent(h){if(!Nt(h))return;const x=h.map,X=x.getView();if(X.getConstraints().rotation===ye.h$)return;const H=x.getSize(),ut=h.pixel,ft=Math.atan2(H[1]/2-ut[1],ut[0]-H[0]/2);void 0!==this.lastAngle_&&X.adjustRotationInternal(-(ft-this.lastAngle_)),this.lastAngle_=ft}handleUpEvent(h){return!Nt(h)||(h.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(h){return!!(Nt(h)&&Ke(h)&&this.condition_(h))&&(h.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var Fe=l(5340);const nn=class Je extends I.Z{constructor(h){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+h,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const h=this.startPixel_,x=this.endPixel_,X="px",H=this.element_.style;H.left=Math.min(h[0],x[0])+X,H.top=Math.min(h[1],x[1])+X,H.width=Math.abs(x[0]-h[0])+X,H.height=Math.abs(x[1]-h[1])+X}setMap(h){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const x=this.element_.style;x.left="inherit",x.top="inherit",x.width="inherit",x.height="inherit"}this.map_=h,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(h,x){this.startPixel_=h,this.endPixel_=x,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const h=this.startPixel_,x=this.endPixel_,H=[h,[h[0],x[1]],x,[x[0],h[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);H[4]=H[0].slice(),this.geometry_?this.geometry_.setCoordinates([H]):this.geometry_=new Fe.ZP([H])}getGeometry(){return this.geometry_}};class Ne extends V.ZP{constructor(h,x,X){super(h),this.coordinate=x,this.mapBrowserEvent=X}}const _n=class En extends $t{constructor(h){super(),this.box_=new nn((h=h||{}).className||"ol-dragbox"),this.minArea_=void 0!==h.minArea?h.minArea:64,h.onBoxEnd&&(this.onBoxEnd=h.onBoxEnd),this.startPixel_=null,this.condition_=h.condition?h.condition:Ke,this.boxEndCondition_=h.boxEndCondition?h.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(h,x,X){const H=X[0]-x[0],ut=X[1]-x[1];return H*H+ut*ut>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(h){this.box_.setPixels(this.startPixel_,h.pixel),this.dispatchEvent(new Ne("boxdrag",h.coordinate,h))}handleUpEvent(h){this.box_.setMap(null);const x=this.boxEndCondition_(h,this.startPixel_,h.pixel);return x&&this.onBoxEnd(h),this.dispatchEvent(new Ne(x?"boxend":"boxcancel",h.coordinate,h)),!1}handleDownEvent(h){return!!this.condition_(h)&&(this.startPixel_=h.pixel,this.box_.setMap(h.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ne("boxstart",h.coordinate,h)),!0)}onBoxEnd(h){}},rn=class sn extends _n{constructor(h){super({condition:(h=h||{}).condition?h.condition:Pt,className:h.className||"ol-dragzoom",minArea:h.minArea}),this.duration_=void 0!==h.duration?h.duration:200,this.out_=void 0!==h.out&&h.out}onBoxEnd(h){const X=this.getMap().getView();let H=this.getGeometry();if(this.out_){const ut=X.rotatedExtentForGeometry(H),ft=X.getResolutionForExtentInternal(ut),yt=X.getResolution()/ft;H=H.clone(),H.scale(yt*yt)}X.fitInternal(H,{duration:this.duration_,easing:nt.Vv})}},Be=class pn extends At{constructor(h){super(),h=h||{},this.defaultCondition_=function(x){return dt(x)&&bt(x)},this.condition_=void 0!==h.condition?h.condition:this.defaultCondition_,this.duration_=void 0!==h.duration?h.duration:100,this.pixelDelta_=void 0!==h.pixelDelta?h.pixelDelta:128}handleEvent(h){let x=!1;if(h.type==w.Z.KEYDOWN){const X=h.originalEvent,H=X.keyCode;if(this.condition_(h)&&(40==H||37==H||39==H||38==H)){const ft=h.map.getView(),yt=ft.getResolution()*this.pixelDelta_;let ne=0,le=0;40==H?le=-yt:37==H?ne=-yt:39==H?ne=yt:le=yt;const me=[ne,le];(0,e.U1)(me,ft.getRotation()),function It(rt,h,x){const X=rt.getCenterInternal();X&&rt.animateInternal({duration:void 0!==x?x:250,easing:nt.GE,center:rt.getConstrainedCenter([X[0]+h[0],X[1]+h[1]])})}(ft,me,this.duration_),X.preventDefault(),x=!0}}return!x}},an=class on extends At{constructor(h){super(),this.condition_=(h=h||{}).condition?h.condition:bt,this.delta_=h.delta?h.delta:1,this.duration_=void 0!==h.duration?h.duration:100}handleEvent(h){let x=!1;if(h.type==w.Z.KEYDOWN||h.type==w.Z.KEYPRESS){const X=h.originalEvent,H=X.charCode;if(this.condition_(h)&&(H=="+".charCodeAt(0)||H=="-".charCodeAt(0))){const ut=h.map,ft=H=="+".charCodeAt(0)?this.delta_:-this.delta_;Dt(ut.getView(),ft,void 0,this.duration_),X.preventDefault(),x=!0}}return!x}};var je=l(1775);const ke=class ze extends At{constructor(h){super(h=h||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==h.maxDelta?h.maxDelta:1,this.duration_=void 0!==h.duration?h.duration:250,this.timeout_=void 0!==h.timeout?h.timeout:80,this.useAnchor_=void 0===h.useAnchor||h.useAnchor,this.constrainResolution_=void 0!==h.constrainResolution&&h.constrainResolution;const x=h.condition?h.condition:fe;this.condition_=h.onFocusOnly?zt(ue,x):x,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const h=this.getMap();h&&h.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(h){if(!this.condition_(h)||h.type!==w.Z.WHEEL)return!0;const X=h.map,H=h.originalEvent;let ut;if(H.preventDefault(),this.useAnchor_&&(this.lastAnchor_=h.coordinate),h.type==w.Z.WHEEL&&(ut=H.deltaY,W.V&&H.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(ut/=W.MP),H.deltaMode===WheelEvent.DOM_DELTA_LINE&&(ut*=40)),0===ut)return!1;this.lastDelta_=ut;const ft=Date.now();void 0===this.startTime_&&(this.startTime_=ft),(!this.mode_||ft-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(ut)<4?"trackpad":"wheel");const yt=X.getView();if("trackpad"===this.mode_&&!yt.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(yt.getAnimating()&&yt.cancelAnimations(),yt.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),yt.adjustZoom(-ut/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=ft,!1;this.totalDelta_+=ut;const ne=Math.max(this.timeout_-(ft-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,X),ne),!1}handleWheelZoom_(h){const x=h.getView();x.getAnimating()&&x.cancelAnimations();let X=-(0,je.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(x.getConstrainResolution()||this.constrainResolution_)&&(X=X?X>0?1:-1:0),Dt(x,X,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(h){this.useAnchor_=h,h||(this.lastAnchor_=null)}},Qe=class ln extends $t{constructor(h){const x=h=h||{};x.stopDown||(x.stopDown=C.Dv),super(x),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==h.threshold?h.threshold:.3,this.duration_=void 0!==h.duration?h.duration:250}handleDragEvent(h){let x=0;const X=this.targetPointers[0],H=this.targetPointers[1],ut=Math.atan2(H.clientY-X.clientY,H.clientX-X.clientX);if(void 0!==this.lastAngle_){const me=ut-this.lastAngle_;this.rotationDelta_+=me,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),x=me}this.lastAngle_=ut;const ft=h.map,yt=ft.getView();if(yt.getConstraints().rotation===ye.h$)return;const ne=ft.getViewport().getBoundingClientRect(),le=Ht(this.targetPointers);le[0]-=ne.left,le[1]-=ne.top,this.anchor_=ft.getCoordinateFromPixelInternal(le),this.rotating_&&(ft.render(),yt.adjustRotationInternal(x,this.anchor_))}handleUpEvent(h){return!(this.targetPointers.length<2&&(h.map.getView().endInteraction(this.duration_),1))}handleDownEvent(h){if(this.targetPointers.length>=2){const x=h.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||x.getView().beginInteraction(),!0}return!1}},Ge=class pe extends $t{constructor(h){const x=h=h||{};x.stopDown||(x.stopDown=C.Dv),super(x),this.anchor_=null,this.duration_=void 0!==h.duration?h.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(h){let x=1;const X=this.targetPointers[0],H=this.targetPointers[1],ut=X.clientX-H.clientX,ft=X.clientY-H.clientY,yt=Math.sqrt(ut*ut+ft*ft);void 0!==this.lastDistance_&&(x=this.lastDistance_/yt),this.lastDistance_=yt;const ne=h.map,le=ne.getView();1!=x&&(this.lastScaleDelta_=x);const me=ne.getViewport().getBoundingClientRect(),De=Ht(this.targetPointers);De[0]-=me.left,De[1]-=me.top,this.anchor_=ne.getCoordinateFromPixelInternal(De),ne.render(),le.adjustResolutionInternal(x,this.anchor_)}handleUpEvent(h){return!(this.targetPointers.length<2)||(h.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(h){if(this.targetPointers.length>=2){const x=h.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||x.getView().beginInteraction(),!0}return!1}};var Oe=l(7942),Ce=l(1203);function Ue(rt){rt instanceof t.Z?rt.setMapInternal(null):rt instanceof G.Z&&rt.getLayers().forEach(Ue)}function Ot(rt,h){if(rt instanceof t.Z)rt.setMapInternal(h);else if(rt instanceof G.Z){const x=rt.getLayers().getArray();for(let X=0,H=x.length;X<H;++X)Ot(x[X],h)}}const Se=class Zt extends N.Z{constructor(h){super();const x=function _e(rt){let h=null;void 0!==rt.keyboardEventTarget&&(h="string"==typeof rt.keyboardEventTarget?document.getElementById(rt.keyboardEventTarget):rt.keyboardEventTarget);const x={},X=rt.layers&&"function"==typeof rt.layers.getLayers?rt.layers:new G.Z({layers:rt.layers});let H,ut,ft;return x.layergroup=X,x.target=rt.target,x.view=rt.view instanceof wt.ZP?rt.view:new wt.ZP,void 0!==rt.controls&&(Array.isArray(rt.controls)?H=new O.Z(rt.controls.slice()):((0,J.h)("function"==typeof rt.controls.getArray,47),H=rt.controls)),void 0!==rt.interactions&&(Array.isArray(rt.interactions)?ut=new O.Z(rt.interactions.slice()):((0,J.h)("function"==typeof rt.interactions.getArray,48),ut=rt.interactions)),void 0!==rt.overlays?Array.isArray(rt.overlays)?ft=new O.Z(rt.overlays.slice()):((0,J.h)("function"==typeof rt.overlays.getArray,49),ft=rt.overlays):ft=new O.Z,{controls:H,interactions:ut,keyboardEventTarget:h,overlays:ft,values:x}}(h=h||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==h.maxTilesLoading?h.maxTilesLoading:16,this.pixelRatio_=void 0!==h.pixelRatio?h.pixelRatio:W.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,p.Ue)(),this.pixelToCoordinateTransform_=(0,p.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=h.moveTolerance,this.keyboardEventTarget_=x.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=x.controls||(0,F.c)(),this.interactions=x.interactions||function xe(rt){rt=rt||{};const h=new O.Z,x=new class Xt{constructor(h,x,X){this.decay_=h,this.minVelocity_=x,this.delay_=X,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(h,x){this.points_.push(h,x,Date.now())}end(){if(this.points_.length<6)return!1;const h=Date.now()-this.delay_,x=this.points_.length-3;if(this.points_[x+2]<h)return!1;let X=x-3;for(;X>0&&this.points_[X+2]>h;)X-=3;const H=this.points_[x+2]-this.points_[X+2];if(H<1e3/60)return!1;const ut=this.points_[x]-this.points_[X],ft=this.points_[x+1]-this.points_[X+1];return this.angle_=Math.atan2(ft,ut),this.initialVelocity_=Math.sqrt(ut*ut+ft*ft)/H,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===rt.altShiftDragRotate||rt.altShiftDragRotate)&&h.push(new Xe),(void 0===rt.doubleClickZoom||rt.doubleClickZoom)&&h.push(new Ut({delta:rt.zoomDelta,duration:rt.zoomDuration})),(void 0===rt.dragPan||rt.dragPan)&&h.push(new Ie({onFocusOnly:rt.onFocusOnly,kinetic:x})),(void 0===rt.pinchRotate||rt.pinchRotate)&&h.push(new Qe),(void 0===rt.pinchZoom||rt.pinchZoom)&&h.push(new Ge({duration:rt.zoomDuration})),(void 0===rt.keyboard||rt.keyboard)&&(h.push(new Be),h.push(new an({delta:rt.zoomDelta,duration:rt.zoomDuration}))),(void 0===rt.mouseWheelZoom||rt.mouseWheelZoom)&&h.push(new ke({onFocusOnly:rt.onFocusOnly,duration:rt.zoomDuration})),(void 0===rt.shiftDragZoom||rt.shiftDragZoom)&&h.push(new rn({duration:rt.zoomDuration})),h}({onFocusOnly:!0}),this.overlays_=x.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new class Tt extends class lt{constructor(h,x){this.priorityFunction_=h,this.keyFunction_=x,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,it.Z)(this.queuedElements_)}dequeue(){const h=this.elements_,x=this.priorities_,X=h[0];1==h.length?(h.length=0,x.length=0):(h[0]=h.pop(),x[0]=x.pop(),this.siftUp_(0));const H=this.keyFunction_(X);return delete this.queuedElements_[H],X}enqueue(h){(0,J.h)(!(this.keyFunction_(h)in this.queuedElements_),31);const x=this.priorityFunction_(h);return x!=et&&(this.elements_.push(h),this.priorities_.push(x),this.queuedElements_[this.keyFunction_(h)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(h){return 2*h+1}getRightChildIndex_(h){return 2*h+2}getParentIndex_(h){return h-1>>1}heapify_(){let h;for(h=(this.elements_.length>>1)-1;h>=0;h--)this.siftUp_(h)}isEmpty(){return 0===this.elements_.length}isKeyQueued(h){return h in this.queuedElements_}isQueued(h){return this.isKeyQueued(this.keyFunction_(h))}siftUp_(h){const x=this.elements_,X=this.priorities_,H=x.length,ut=x[h],ft=X[h],yt=h;for(;h<H>>1;){const ne=this.getLeftChildIndex_(h),le=this.getRightChildIndex_(h),me=le<H&&X[le]<X[ne]?le:ne;x[h]=x[me],X[h]=X[me],h=me}x[h]=ut,X[h]=ft,this.siftDown_(yt,h)}siftDown_(h,x){const X=this.elements_,H=this.priorities_,ut=X[x],ft=H[x];for(;x>h;){const yt=this.getParentIndex_(x);if(!(H[yt]>ft))break;X[x]=X[yt],H[x]=H[yt],x=yt}X[x]=ut,H[x]=ft}reprioritize(){const h=this.priorityFunction_,x=this.elements_,X=this.priorities_;let H=0;const ut=x.length;let ft,yt,ne;for(yt=0;yt<ut;++yt)ft=x[yt],ne=h(ft),ne==et?delete this.queuedElements_[this.keyFunction_(ft)]:(X[H]=ne,x[H++]=ft);x.length=H,X.length=H,this.heapify_()}}{constructor(h,x){super(function(X){return h.apply(null,X)},function(X){return X[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=x,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(h){const x=super.enqueue(h);return x&&h[0].addEventListener(w.Z.CHANGE,this.boundHandleTileChange_),x}getTilesLoading(){return this.tilesLoading_}handleTileChange(h){const x=h.target,X=x.getState();if(X===Rt.Z.LOADED||X===Rt.Z.ERROR||X===Rt.Z.EMPTY){X!==Rt.Z.ERROR&&x.removeEventListener(w.Z.CHANGE,this.boundHandleTileChange_);const H=x.getKey();H in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[H],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(h,x){let H,ut,ft,X=0;for(;this.tilesLoading_<h&&X<x&&this.getCount()>0;)ut=this.dequeue()[0],ft=ut.getKey(),H=ut.getState(),H===Rt.Z.IDLE&&!(ft in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[ft]=!0,++this.tilesLoading_,++X,ut.load())}}(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(x.values);const X=this;h.view&&!(h.view instanceof wt.ZP)&&h.view.then(function(H){X.setView(new wt.ZP(H))}),this.controls.addEventListener(y.Z.ADD,function(H){H.element.setMap(this)}.bind(this)),this.controls.addEventListener(y.Z.REMOVE,function(H){H.element.setMap(null)}.bind(this)),this.interactions.addEventListener(y.Z.ADD,function(H){H.element.setMap(this)}.bind(this)),this.interactions.addEventListener(y.Z.REMOVE,function(H){H.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(y.Z.ADD,function(H){this.addOverlayInternal_(H.element)}.bind(this)),this.overlays_.addEventListener(y.Z.REMOVE,function(H){const ut=H.element.getId();void 0!==ut&&delete this.overlayIdIndex_[ut.toString()],H.element.setMap(null)}.bind(this)),this.controls.forEach(function(H){H.setMap(this)}.bind(this)),this.interactions.forEach(function(H){H.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(h){this.getControls().push(h)}addInteraction(h){this.getInteractions().push(h)}addLayer(h){this.getLayerGroup().getLayers().push(h)}handleLayerAdd_(h){Ot(h.layer,this)}addOverlay(h){this.getOverlays().push(h)}addOverlayInternal_(h){const x=h.getId();void 0!==x&&(this.overlayIdIndex_[x.toString()]=h),h.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(h,x,X){if(!this.frameState_||!this.renderer_)return;const H=this.getCoordinateFromPixelInternal(h);return this.renderer_.forEachFeatureAtCoordinate(H,this.frameState_,void 0!==(X=void 0!==X?X:{}).hitTolerance?X.hitTolerance:0,!1!==X.checkWrapped,x,null,void 0!==X.layerFilter?X.layerFilter:C.uX,null)}getFeaturesAtPixel(h,x){const X=[];return this.forEachFeatureAtPixel(h,function(H){X.push(H)},x),X}getAllLayers(){const h=[];return function x(X){X.forEach(function(H){H instanceof G.Z?x(H.getLayers()):h.push(H)})}(this.getLayers()),h}hasFeatureAtPixel(h,x){if(!this.frameState_||!this.renderer_)return!1;const X=this.getCoordinateFromPixelInternal(h);return this.renderer_.hasFeatureAtCoordinate(X,this.frameState_,void 0!==(x=void 0!==x?x:{}).hitTolerance?x.hitTolerance:0,!1!==x.checkWrapped,void 0!==x.layerFilter?x.layerFilter:C.uX,null)}getEventCoordinate(h){return this.getCoordinateFromPixel(this.getEventPixel(h))}getEventCoordinateInternal(h){return this.getCoordinateFromPixelInternal(this.getEventPixel(h))}getEventPixel(h){const x=this.viewport_.getBoundingClientRect(),X="changedTouches"in h?h.changedTouches[0]:h;return[X.clientX-x.left,X.clientY-x.top]}getTarget(){return this.get("target")}getTargetElement(){const h=this.getTarget();return void 0!==h?"string"==typeof h?document.getElementById(h):h:null}getCoordinateFromPixel(h){return(0,Oe.lO)(this.getCoordinateFromPixelInternal(h),this.getView().getProjection())}getCoordinateFromPixelInternal(h){const x=this.frameState_;return x?(0,p.nn)(x.pixelToCoordinateTransform,h.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(h){const x=this.overlayIdIndex_[h.toString()];return void 0!==x?x:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(h){const x=this.getLayerGroup();if(h instanceof O.Z)return void x.setLayers(h);const X=x.getLayers();X.clear(),X.extend(h)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const h=this.getLayerGroup().getLayerStatesArray();for(let x=0,X=h.length;x<X;++x){const H=h[x];if(!H.visible)continue;const ut=H.layer.getRenderer();if(ut&&!ut.ready)return!0;const ft=H.layer.getSource();if(ft&&ft.loading)return!0}return!1}getPixelFromCoordinate(h){const x=(0,Oe.Vs)(h,this.getView().getProjection());return this.getPixelFromCoordinateInternal(x)}getPixelFromCoordinateInternal(h){const x=this.frameState_;return x?(0,p.nn)(x.coordinateToPixelTransform,h.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const h=this.getTargetElement();return h?h.ownerDocument:document}getTilePriority(h,x,X,H){return function St(rt,h,x,X,H){if(!rt||!(x in rt.wantedTiles)||!rt.wantedTiles[x][h.getKey()])return et;const ut=rt.viewState.center,ft=X[0]-ut[0],yt=X[1]-ut[1];return 65536*Math.log(H)+Math.sqrt(ft*ft+yt*yt)/H}(this.frameState_,h,x,X,H)}handleBrowserEvent(h,x){const X=new g(x=x||h.type,this,h);this.handleMapBrowserEvent(X)}handleMapBrowserEvent(h){if(!this.frameState_)return;const x=h.originalEvent,X=x.type;if("pointerdown"===X||X===w.Z.WHEEL||X===w.Z.KEYDOWN){const H=this.getOwnerDocument(),ut=this.viewport_.getRootNode?this.viewport_.getRootNode():H,ft=x.target;if(this.overlayContainerStopEvent_.contains(ft)||!(ut===H?H.documentElement:ut).contains(ft))return}if(h.frameState=this.frameState_,!1!==this.dispatchEvent(h)){const H=this.getInteractions().getArray().slice();for(let ut=H.length-1;ut>=0;ut--){const ft=H[ut];if(ft.getMap()===this&&ft.getActive()&&this.getTargetElement()&&(!ft.handleEvent(h)||h.propagationStopped))break}}}handlePostRender(){const h=this.frameState_,x=this.tileQueue_;if(!x.isEmpty()){let H=this.maxTilesLoading_,ut=H;if(h){const ft=h.viewHints;if(ft[jt.Z.ANIMATING]||ft[jt.Z.INTERACTING]){const yt=Date.now()-h.time>8;H=yt?0:8,ut=yt?0:2}}x.getTilesLoading()<H&&(x.reprioritize(),x.loadMoreTiles(H,ut))}h&&this.renderer_&&!h.animate&&(!0===this.renderComplete_?(this.hasListener(u.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(u.Z.RENDERCOMPLETE,h),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new B(z.Z.LOADEND,this,h)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new B(z.Z.LOADSTART,this,h))));const X=this.postRenderFunctions_;for(let H=0,ut=X.length;H<ut;++H)X[H](this,h);X.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let x=0,X=this.targetChangeHandlerKeys_.length;x<X;++x)(0,R.bN)(this.targetChangeHandlerKeys_[x]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(w.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(w.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,v.ZF)(this.viewport_)}const h=this.getTargetElement();if(h){h.appendChild(this.viewport_),this.renderer_||(this.renderer_=new D(this)),this.mapBrowserEventHandler_=new $(this,this.moveTolerance_);for(const H in f)this.mapBrowserEventHandler_.addEventListener(f[H],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(w.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(w.Z.WHEEL,this.boundHandleBrowserEvent_,!!W.bM&&{passive:!1});const x=this.getOwnerDocument().defaultView,X=this.keyboardEventTarget_?this.keyboardEventTarget_:h;this.targetChangeHandlerKeys_=[(0,R.oL)(X,w.Z.KEYDOWN,this.handleBrowserEvent,this),(0,R.oL)(X,w.Z.KEYPRESS,this.handleBrowserEvent,this),(0,R.oL)(x,w.Z.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,R.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,R.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const h=this.getView();h&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,R.oL)(h,c.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,R.oL)(h,w.Z.CHANGE,this.handleViewPropertyChanged_,this),h.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(R.bN),this.layerGroupPropertyListenerKeys_=null);const h=this.getLayerGroup();h&&(this.handleLayerAdd_(new G.V("addlayer",h)),this.layerGroupPropertyListenerKeys_=[(0,R.oL)(h,c.Z.PROPERTYCHANGE,this.render,this),(0,R.oL)(h,w.Z.CHANGE,this.render,this),(0,R.oL)(h,"addlayer",this.handleLayerAdd_,this),(0,R.oL)(h,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const h=this.getLayerGroup().getLayerStatesArray();for(let x=0,X=h.length;x<X;++x){const H=h[x].layer;H.hasRenderer()&&H.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(h){return this.getControls().remove(h)}removeInteraction(h){return this.getInteractions().remove(h)}removeLayer(h){return this.getLayerGroup().getLayers().remove(h)}handleLayerRemove_(h){Ue(h.layer)}removeOverlay(h){return this.getOverlays().remove(h)}renderFrame_(h){const x=this.getSize(),X=this.getView(),H=this.frameState_;let ut=null;if(void 0!==x&&(0,Ce.py)(x)&&X&&X.isDef()){const ft=X.getHints(this.frameState_?this.frameState_.viewHints:void 0),yt=X.getState();if(ut={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,s.p8)(yt.center,yt.resolution,yt.rotation,x),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:x,tileQueue:this.tileQueue_,time:h,usedTiles:{},viewState:yt,viewHints:ft,wantedTiles:{},mapId:(0,L.sq)(this),renderTargets:{}},yt.nextCenter&&yt.nextResolution){const ne=isNaN(yt.nextRotation)?yt.rotation:yt.nextRotation;ut.nextExtent=(0,s.p8)(yt.nextCenter,yt.nextResolution,ne,x)}}this.frameState_=ut,this.renderer_.renderFrame(ut),ut&&(ut.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,ut.postRenderFunctions),H&&(!this.previousExtent_||!(0,s.xb)(this.previousExtent_)&&!(0,s.fS)(ut.extent,this.previousExtent_))&&(this.dispatchEvent(new B(z.Z.MOVESTART,this,H)),this.previousExtent_=(0,s.YN)(this.previousExtent_)),this.previousExtent_&&!ut.viewHints[jt.Z.ANIMATING]&&!ut.viewHints[jt.Z.INTERACTING]&&!(0,s.fS)(ut.extent,this.previousExtent_)&&(this.dispatchEvent(new B(z.Z.MOVEEND,this,ut)),(0,s.d9)(ut.extent,this.previousExtent_))),this.dispatchEvent(new B(z.Z.POSTRENDER,this,ut)),this.renderComplete_=this.hasListener(z.Z.LOADSTART)||this.hasListener(z.Z.LOADEND)||this.hasListener(u.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(h){const x=this.getLayerGroup();x&&this.handleLayerRemove_(new G.V("removelayer",x)),this.set("layergroup",h)}setSize(h){this.set("size",h)}setTarget(h){this.set("target",h)}setView(h){if(!h||h instanceof wt.ZP)return void this.set("view",h);this.set("view",new wt.ZP);const x=this;h.then(function(X){x.setView(new wt.ZP(X))})}updateSize(){const h=this.getTargetElement();let x;if(h){const X=getComputedStyle(h),H=h.offsetWidth-parseFloat(X.borderLeftWidth)-parseFloat(X.paddingLeft)-parseFloat(X.paddingRight)-parseFloat(X.borderRightWidth),ut=h.offsetHeight-parseFloat(X.borderTopWidth)-parseFloat(X.paddingTop)-parseFloat(X.paddingBottom)-parseFloat(X.borderBottomWidth);!isNaN(H)&&!isNaN(ut)&&(x=[H,ut],!(0,Ce.py)(x)&&(h.offsetWidth||h.offsetHeight||h.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(x),this.updateViewportSize_()}updateViewportSize_(){const h=this.getView();if(h){let x;const X=getComputedStyle(this.viewport_);X.width&&X.height&&(x=[parseInt(X.width,10),parseInt(X.height,10)]),h.setViewportSize(x)}}};var qe=l(9128);const Cn=["*"];let An=(()=>{class rt extends qe.V{constructor(x,X){super(),this.elementRef=x,this.renderer=X,this.width="100%",this.height="100%",this.onLayerGroupChange=new T.vpe,this.onSizeChange=new T.vpe,this.onTargetChange=new T.vpe,this.onViewChange=new T.vpe,this.onClick=new T.vpe,this.onDblclick=new T.vpe,this.onLoadend=new T.vpe,this.onLoadstart=new T.vpe,this.onMoveend=new T.vpe,this.onMovestart=new T.vpe,this.onPointerdrag=new T.vpe,this.onPointermove=new T.vpe,this.onPostcompose=new T.vpe,this.onPostrender=new T.vpe,this.onPrecompose=new T.vpe,this.onRendercomplete=new T.vpe,this.onSingleclick=new T.vpe}ngOnInit(){this.target||(this.target=this.elementRef.nativeElement.firstChild),this.targetAttributes&&this.bindAttributes(this.targetAttributes),this.instance=new Se(this),this.instance.on("change:layergroup",x=>this.onLayerGroupChange.emit(x)),this.instance.on("change:size",x=>this.onSizeChange.emit(x)),this.instance.on("change:target",x=>this.onTargetChange.emit(x)),this.instance.on("change:view",x=>this.onViewChange.emit(x)),this.instance.on("click",x=>this.onClick.emit(x)),this.instance.on("dblclick",x=>this.onDblclick.emit(x)),this.instance.on("loadend",x=>this.onLoadend.emit(x)),this.instance.on("loadstart",x=>this.onLoadstart.emit(x)),this.instance.on("moveend",x=>this.onMoveend.emit(x)),this.instance.on("movestart",x=>this.onMovestart.emit(x)),this.instance.on("pointerdrag",x=>this.onPointerdrag.emit(x)),this.instance.on("pointermove",x=>this.onPointermove.emit(x)),this.instance.on("postcompose",x=>this.onPostcompose.emit(x)),this.instance.on("postrender",x=>this.onPostrender.emit(x)),this.instance.on("precompose",x=>this.onPrecompose.emit(x)),this.instance.on("rendercomplete",x=>this.onRendercomplete.emit(x)),this.instance.on("singleclick",x=>this.onSingleclick.emit(x)),super.ngOnInit()}ngOnChanges(x){const{layers:X,target:H,view:ut}=x,ft=(0,Z._T)(x,["layers","target","view"]);this.instance&&X&&this.instance.setLayers(X.currentValue),this.instance&&H&&this.instance.setTarget(H.currentValue),this.instance&&ut&&this.instance.setView(ut.currentValue),super.ngOnChanges(ft)}ngAfterViewInit(){this.instance.updateSize()}bindAttributes(x){for(const X in x)Object.prototype.hasOwnProperty.call(x,X)&&this.renderer.setAttribute(this.target,X,x[X])}}return rt.\u0275fac=function(x){return new(x||rt)(T.Y36(T.SBq),T.Y36(T.Qsj))},rt.\u0275cmp=T.Xpm({type:rt,selectors:[["nol-map"]],inputs:{width:"width",height:"height",controls:"controls",pixelRatio:"pixelRatio",interactions:"interactions",keyboardEventTarget:"keyboardEventTarget",layers:"layers",maxTilesLoading:"maxTilesLoading",moveTolerance:"moveTolerance",overlays:"overlays",target:"target",targetAttributes:"targetAttributes",view:"view"},outputs:{onLayerGroupChange:"onLayerGroupChange",onSizeChange:"onSizeChange",onTargetChange:"onTargetChange",onViewChange:"onViewChange",onClick:"onClick",onDblclick:"onDblclick",onLoadend:"onLoadend",onLoadstart:"onLoadstart",onMoveend:"onMoveend",onMovestart:"onMovestart",onPointerdrag:"onPointerdrag",onPointermove:"onPointermove",onPostcompose:"onPostcompose",onPostrender:"onPostrender",onPrecompose:"onPrecompose",onRendercomplete:"onRendercomplete",onSingleclick:"onSingleclick"},exportAs:["nolMap"],features:[T.qOj,T.TTD],ngContentSelectors:Cn,decls:2,vars:4,template:function(x,X){1&x&&(T.F$t(),T._UZ(0,"div"),T.Hsn(1)),2&x&&T.Udp("width",X.width)("height",X.height)},encapsulation:2,changeDetection:0}),rt})()},2098:(_t,k,l)=>{"use strict";l.d(k,{D:()=>N});var Z=l(2031),T=l(2398);let N=(()=>{class O{}return O.\u0275fac=function(I){return new(I||O)},O.\u0275mod=T.oAB({type:O}),O.\u0275inj=T.cJS({imports:[Z.ez]}),O})()},8480:(_t,k,l)=>{"use strict";l.d(k,{p:()=>Kn});var Z=l(7608),T=l(2398),N=l(9128),O=l(5873),y=l(7359);const I=["*"];let C=(()=>{class b extends N.V{constructor(E){super(),this.host=E}ngOnInit(){this.instance||(this.instance=new O.Z(this)),super.ngOnInit(),this.host.instance.setSource(this.instance)}ngOnChanges(E){const{attributions:A}=E,j=(0,Z._T)(E,["attributions"]);this.instance&&A&&this.instance.setAttributions(A.currentValue),super.ngOnChanges(j)}ngOnDestroy(){this.host.instance.setSource(null)}}return b.\u0275fac=function(E){return new(E||b)(T.Y36(y.X,1))},b.\u0275cmp=T.Xpm({type:b,selectors:[["nol-source"]],inputs:{attributions:"attributions",attributionsCollapsible:"attributionsCollapsible",projection:"projection",state:"state",wrapX:"wrapX",interpolate:"interpolate"},exportAs:["nolSource"],features:[T.qOj,T.TTD],ngContentSelectors:I,decls:1,vars:0,template:function(E,A){1&E&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),b})();var L=l(2805),p=l(9545),s=l(5301),o=l(3312),t=l(7027),e=l(641),d=l(637),n=l(2763),a=l(4361),c=l(4302),i=l(3863),u=l(1063),m=l(2257),_=l(1540),R=l(1203),v=l(9611);const P={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},D={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},G=class w extends d.Z{constructor(r){super(r),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=(0,i.Ue)()}prepareTile(r,E,A){let j;const Y=r.getState();return(Y===n.Z.LOADED||Y===n.Z.ERROR)&&(this.updateExecutorGroup_(r,E,A),this.tileImageNeedsRender_(r)&&(j=!0)),j}getTile(r,E,A,j){const Y=j.pixelRatio,ot=j.viewState,gt=ot.resolution,Et=ot.projection,pt=this.getLayer(),vt=pt.getSource().getTile(r,E,A,Y,Et),xt=j.viewHints,Kt=!(xt[a.Z.ANIMATING]||xt[a.Z.INTERACTING]);return(Kt||!vt.wantedResolution)&&(vt.wantedResolution=gt),this.prepareTile(vt,Y,Et)&&(Kt||Date.now()-j.time<8)&&"vector"!==pt.getRenderMode()&&this.renderTileImage_(vt,j),super.getTile(r,E,A,j)}isDrawableTile(r){const E=this.getLayer();return super.isDrawableTile(r)&&("vector"===E.getRenderMode()?(0,_.sq)(E)in r.executorGroups:r.hasContext(E))}getTileImage(r){return r.getImage(this.getLayer())}prepareFrame(r){const E=this.getLayer().getRevision();return this.renderedLayerRevision_!==E&&(this.renderedLayerRevision_=E,this.renderedTiles.length=0),super.prepareFrame(r)}updateExecutorGroup_(r,E,A){const j=this.getLayer(),Y=j.getRevision(),ot=j.getRenderOrder()||null,gt=r.wantedResolution,Et=r.getReplayState(j);if(!Et.dirty&&Et.renderedResolution===gt&&Et.renderedRevision==Y&&Et.renderedRenderOrder==ot)return;const pt=j.getSource(),vt=j.getDeclutter(),xt=pt.getTileGrid(),Ft=pt.getTileGridForProjection(A).getTileCoordExtent(r.wrappedTileCoord),ie=pt.getSourceTiles(E,A,r),se=(0,_.sq)(j);delete r.hitDetectionImageData[se],r.executorGroups[se]=[],vt&&(r.declutterExecutorGroups[se]=[]),Et.dirty=!1;for(let ee=0,Bt=ie.length;ee<Bt;++ee){const Qt=ie[ee];if(Qt.getState()!=n.Z.LOADED)continue;const qt=xt.getTileCoordExtent(Qt.tileCoord),oe=(0,u.Ed)(Ft,qt),de=(0,u.f3)(oe,j.getRenderBuffer()*gt,this.tmpExtent),kt=(0,u.fS)(qt,oe)?null:de,Vt=new t.Z(0,de,gt,E),re=vt?new t.Z(0,oe,gt,E):void 0,ge=(0,m.se)(gt,E),ce=function(Ze){let dn;const en=Ze.getStyleFunction()||j.getStyleFunction();if(en&&(dn=en(Ze,gt)),dn){const wn=this.renderFeature(Ze,ge,dn,Vt,re);Et.dirty=Et.dirty||wn}},Ve=Qt.getFeatures();ot&&ot!==Et.renderedRenderOrder&&Ve.sort(ot);for(let Ze=0,dn=Ve.length;Ze<dn;++Ze){const en=Ve[Ze];(!kt||(0,u.kK)(kt,en.getGeometry().getExtent()))&&ce.call(this,en)}const He=Vt.finish(),we="vector"!==j.getRenderMode()&&vt&&1===ie.length?null:oe,mn=new e.Z(we,gt,E,pt.getOverlaps(),He,j.getRenderBuffer());if(r.executorGroups[se].push(mn),re){const Ze=new e.Z(null,gt,E,pt.getOverlaps(),re.finish(),j.getRenderBuffer());r.declutterExecutorGroups[se].push(Ze)}}Et.renderedRevision=Y,Et.renderedRenderOrder=ot,Et.renderedResolution=gt}forEachFeatureAtCoordinate(r,E,A,j,Y){const ot=E.viewState.resolution,gt=E.viewState.rotation;A=null==A?0:A;const Et=this.getLayer(),vt=Et.getSource().getTileGridForProjection(E.viewState.projection),xt=(0,u.hI)([r]);(0,u.f3)(xt,ot*A,xt);const Kt={},Ft=function(ee,Bt,Qt){let Wt=ee.getId();void 0===Wt&&(Wt=(0,_.sq)(ee));const qt=Kt[Wt];if(qt){if(!0!==qt&&Qt<qt.distanceSq){if(0===Qt)return Kt[Wt]=!0,Y.splice(Y.lastIndexOf(qt),1),j(ee,Et,Bt);qt.geometry=Bt,qt.distanceSq=Qt}}else{if(0===Qt)return Kt[Wt]=!0,j(ee,Et,Bt);Y.push(Kt[Wt]={feature:ee,layer:Et,geometry:Bt,distanceSq:Qt,callback:j})}},ie=this.renderedTiles;let se;for(let ee=0,Bt=ie.length;!se&&ee<Bt;++ee){const Qt=ie[ee],Wt=vt.getTileCoordExtent(Qt.wrappedTileCoord);if(!(0,u.kK)(Wt,xt))continue;const qt=(0,_.sq)(Et),oe=[Qt.executorGroups[qt]],de=Qt.declutterExecutorGroups[qt];de&&oe.push(de),oe.some(kt=>{const Vt=kt===de?E.declutterTree.all().map(re=>re.value):null;for(let re=0,ge=kt.length;re<ge;++re)if(se=kt[re].forEachFeatureAtCoordinate(r,ot,gt,A,Ft,Vt),se)return!0})}return se}getFeatures(r){return new Promise(function(E,A){const j=this.getLayer(),Y=(0,_.sq)(j),ot=j.getSource(),gt=this.renderedProjection,Et=gt.getExtent(),pt=this.renderedResolution,vt=ot.getTileGridForProjection(gt),xt=(0,i.nn)(this.renderedPixelToCoordinateTransform_,r.slice()),Kt=vt.getTileCoordForCoordAndResolution(xt,pt);let Ft;for(let Wt=0,qt=this.renderedTiles.length;Wt<qt;++Wt)if(Kt.toString()===this.renderedTiles[Wt].tileCoord.toString()){if(Ft=this.renderedTiles[Wt],Ft.getState()===n.Z.LOADED){const oe=vt.getTileCoordExtent(Ft.tileCoord);ot.getWrapX()&&gt.canWrapX()&&!(0,u.r4)(Et,oe)&&(0,v.Cf)(xt,gt);break}Ft=void 0}if(!Ft||Ft.loadingSourceTiles>0)return void E([]);const ie=vt.getTileCoordExtent(Ft.wrappedTileCoord),se=(0,u.rL)(ie),ee=[(xt[0]-se[0])/pt,(se[1]-xt[1])/pt],Bt=Ft.getSourceTiles().reduce(function(Wt,qt){return Wt.concat(qt.getFeatures())},[]);let Qt=Ft.hitDetectionImageData[Y];if(!Qt&&!this.animatingOrInteracting_){const Wt=(0,R.Pq)(vt.getTileSize(vt.getZForResolution(pt,ot.zDirection))),qt=this.renderedRotation_,oe=[this.getRenderTransform(vt.getTileCoordCenter(Ft.wrappedTileCoord),pt,0,c.UN,Wt[0]*c.UN,Wt[1]*c.UN,0)];Qt=(0,c.TU)(Wt,oe,Bt,j.getStyleFunction(),vt.getTileCoordExtent(Ft.wrappedTileCoord),Ft.getReplayState(j).renderedResolution,qt),Ft.hitDetectionImageData[Y]=Qt}E((0,c.ix)(ee,Bt,Qt))}.bind(this))}handleFontsChanged(){const r=this.getLayer();r.getVisible()&&void 0!==this.renderedLayerRevision_&&r.changed()}handleStyleImageChange_(r){this.renderIfReadyAndVisible()}renderDeclutter(r){const E=this.context,A=E.globalAlpha;E.globalAlpha=this.getLayer().getOpacity();const j=r.viewHints,Y=!(j[a.Z.ANIMATING]||j[a.Z.INTERACTING]),ot=this.renderedTiles;for(let gt=0,Et=ot.length;gt<Et;++gt){const pt=ot[gt],vt=pt.declutterExecutorGroups[(0,_.sq)(this.getLayer())];if(vt)for(let xt=vt.length-1;xt>=0;--xt)vt[xt].execute(this.context,1,this.getTileRenderTransform(pt,r),r.viewState.rotation,Y,void 0,r.declutterTree)}E.globalAlpha=A}getTileRenderTransform(r,E){const A=E.pixelRatio,j=E.viewState,Y=j.center,ot=j.resolution,gt=j.rotation,Et=E.size,pt=Math.round(Et[0]*A),vt=Math.round(Et[1]*A),Kt=this.getLayer().getSource().getTileGridForProjection(E.viewState.projection),Ft=r.tileCoord,ie=Kt.getTileCoordExtent(r.wrappedTileCoord),se=Kt.getTileCoordExtent(Ft,this.tmpExtent)[0]-ie[0];return(0,i.Jp)((0,i.bA)(this.inversePixelTransform.slice(),1/A,1/A),this.getRenderTransform(Y,ot,gt,A,pt,vt,se))}postRender(r,E){const A=E.viewHints,j=!(A[a.Z.ANIMATING]||A[a.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=E.pixelToCoordinateTransform.slice(),this.renderedRotation_=E.viewState.rotation;const Y=this.getLayer(),ot=Y.getRenderMode(),gt=r.globalAlpha;r.globalAlpha=Y.getOpacity();const Et=D[ot],pt=E.viewState,vt=pt.rotation,xt=Y.getSource(),Ft=xt.getTileGridForProjection(pt.projection).getZForResolution(pt.resolution,xt.zDirection),ie=this.renderedTiles,se=[],ee=[];let Bt=!0;for(let Qt=ie.length-1;Qt>=0;--Qt){const Wt=ie[Qt];Bt=Bt&&!Wt.getReplayState(Y).dirty;const qt=Wt.executorGroups[(0,_.sq)(Y)].filter(re=>re.hasExecutors(Et));if(0===qt.length)continue;const oe=this.getTileRenderTransform(Wt,E),de=Wt.tileCoord[0];let kt=!1;const Vt=qt[0].getClipCoords(oe);if(Vt){for(let re=0,ge=se.length;re<ge;++re)if(Ft!==de&&de<ee[re]){const ce=se[re];(0,u.kK)([Vt[0],Vt[3],Vt[4],Vt[7]],[ce[0],ce[3],ce[4],ce[7]])&&(kt||(r.save(),kt=!0),r.beginPath(),r.moveTo(Vt[0],Vt[1]),r.lineTo(Vt[2],Vt[3]),r.lineTo(Vt[4],Vt[5]),r.lineTo(Vt[6],Vt[7]),r.moveTo(ce[6],ce[7]),r.lineTo(ce[4],ce[5]),r.lineTo(ce[2],ce[3]),r.lineTo(ce[0],ce[1]),r.clip())}se.push(Vt),ee.push(de)}for(let re=0,ge=qt.length;re<ge;++re)qt[re].execute(r,1,oe,vt,j,Et);kt&&r.restore()}r.globalAlpha=gt,this.ready=Bt,super.postRender(r,E)}renderFeature(r,E,A,j,Y){if(!A)return!1;let ot=!1;if(Array.isArray(A))for(let gt=0,Et=A.length;gt<Et;++gt)ot=(0,m.Pn)(j,r,A[gt],E,this.boundHandleStyleImageChange_,void 0,Y)||ot;else ot=(0,m.Pn)(j,r,A,E,this.boundHandleStyleImageChange_,void 0,Y);return ot}tileImageNeedsRender_(r){const E=this.getLayer();if("vector"===E.getRenderMode())return!1;const A=r.getReplayState(E),j=E.getRevision();return A.renderedTileResolution!==r.wantedResolution||A.renderedTileRevision!==j}renderTileImage_(r,E){const A=this.getLayer(),j=r.getReplayState(A),Y=A.getRevision(),ot=r.executorGroups[(0,_.sq)(A)];j.renderedTileRevision=Y;const gt=r.wrappedTileCoord,Et=gt[0],pt=A.getSource();let vt=E.pixelRatio;const Kt=E.viewState.projection,Ft=pt.getTileGridForProjection(Kt),ie=Ft.getResolution(r.tileCoord[0]),se=E.pixelRatio/r.wantedResolution*ie,ee=Ft.getResolution(Et),Bt=r.getContext(A);vt=Math.round(Math.max(vt,se/vt));const Qt=pt.getTilePixelSize(Et,vt,Kt);Bt.canvas.width=Qt[0],Bt.canvas.height=Qt[1];const Wt=vt/se;if(1!==Wt){const kt=(0,i.mc)(this.tmpTransform_);(0,i.bA)(kt,Wt,Wt),Bt.setTransform.apply(Bt,kt)}const qt=Ft.getTileCoordExtent(gt,this.tmpExtent),oe=se/ee,de=(0,i.mc)(this.tmpTransform_);(0,i.bA)(de,oe,-oe),(0,i.Iu)(de,-qt[0],-qt[3]);for(let kt=0,Vt=ot.length;kt<Vt;++kt)ot[kt].execute(Bt,Wt,de,0,!0,P[A.getRenderMode()]);j.renderedTileResolution=r.wantedResolution}};var V=l(4883),K=l(9772);const S=class B extends o.Z{constructor(r){r=r||{};const E=Object.assign({},r);delete E.preload,delete E.useInterimTilesOnError,super(E);const A=r.renderMode||"hybrid";(0,K.h)("hybrid"==A||"vector"==A,28),this.renderMode_=A,this.setPreload(r.preload?r.preload:0),this.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError)}createRenderer(){return new G(this)}getFeatures(r){return super.getFeatures(r)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(V.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(V.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(r){this.set(V.Z.PRELOAD,r)}setUseInterimTilesOnError(r){this.set(V.Z.USE_INTERIM_TILES_ON_ERROR,r)}};var g=l(2683),f=l(4241);const M=["*"];let U=(()=>{class b extends s.${constructor(E,A){super(E,A),this.onPreloadChange=new T.vpe,this.onUseInterimTilesOnErrorChange=new T.vpe}ngOnInit(){this.instance||(this.instance=new S(this)),this.instance.on("change:preload",E=>this.onPreloadChange.emit(E)),this.instance.on("change:useInterimTilesOnError",E=>this.onUseInterimTilesOnErrorChange.emit(E)),super.ngOnInit()}ngOnChanges(E){const{background:A,preload:j,useInterimTilesOnError:Y}=E,ot=(0,Z._T)(E,["background","preload","useInterimTilesOnError"]);this.instance&&A&&this.instance.setBackground(A.currentValue),this.instance&&j&&this.instance.setPreload(j.currentValue),this.instance&&Y&&this.instance.setUseInterimTilesOnError(Y.currentValue),super.ngOnChanges(ot)}}return b.\u0275fac=function(E){return new(E||b)(T.Y36(g.T,8),T.Y36(f.f,8))},b.\u0275cmp=T.Xpm({type:b,selectors:[["nol-vector-tile-layer"]],inputs:{renderOrder:"renderOrder",renderBuffer:"renderBuffer",renderMode:"renderMode",source:"source",map:"map",declutter:"declutter",style:"style",background:"background",updateWhileAnimating:"updateWhileAnimating",updateWhileInteracting:"updateWhileInteracting",preload:"preload",useInterimTilesOnError:"useInterimTilesOnError"},outputs:{onPreloadChange:"onPreloadChange",onUseInterimTilesOnErrorChange:"onUseInterimTilesOnErrorChange"},exportAs:["nolVectorTileLayer"],features:[T.qOj,T.TTD],ngContentSelectors:M,decls:1,vars:0,template:function(E,A){1&E&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),b})();var W=l(4413),q=l(1323),$=l(9520),z=l(5029),at=l(4253),J=l(9039),it=l(1962);const lt=class et extends it.Z{constructor(r){super(r.tileCoord,n.Z.IDLE,{transition:r.transition,interpolate:r.interpolate}),this.loader_=r.loader,this.data_=null,this.error_=null,this.size_=r.size||[256,256]}getSize(){return this.size_}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==n.Z.IDLE&&this.state!==n.Z.ERROR)return;this.state=n.Z.LOADING,this.changed();const r=this;this.loader_().then(function(E){r.data_=E,r.state=n.Z.LOADED,r.changed()}).catch(function(E){r.error_=E,r.state=n.Z.ERROR,r.changed()})}};var ct=l(170),Rt=l(8501),Tt=l(6029),Lt=l(4544);const F=35044,At=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Gt(b,r){r=Object.assign({preserveDrawingBuffer:!0,antialias:!Lt.ME},r);const E=At.length;for(let A=0;A<E;++A)try{const j=b.getContext(At[A],r);if(j)return j}catch(j){}return null}function zt(b){switch(b){case 34962:default:return Float32Array;case 34963:return Uint32Array}}const te=class $t{constructor(r,E){this.array=null,this.type=r,(0,K.h)(34962===r||34963===r,62),this.usage=void 0!==E?E:35044}ofSize(r){this.array=new(zt(this.type))(r)}fromArray(r){this.array=zt(this.type).from(r)}fromArrayBuffer(r){this.array=new(zt(this.type))(r)}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}};function ae(b,r,E){const A=E?b.LINEAR:b.NEAREST;b.bindTexture(b.TEXTURE_2D,r),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,A)}function ue(b,r,E,A,j,Y){const ot=b.getGL();let gt,Et;E instanceof Float32Array?(gt=ot.FLOAT,b.getExtension("OES_texture_float"),Et=null!==b.getExtension("OES_texture_float_linear")):(gt=ot.UNSIGNED_BYTE,Et=!0),ae(ot,r,Y&&Et);const pt=E.byteLength/A[1];let xt,vt=1;switch(pt%8==0?vt=8:pt%4==0?vt=4:pt%2==0&&(vt=2),j){case 1:xt=ot.LUMINANCE;break;case 2:xt=ot.LUMINANCE_ALPHA;break;case 3:xt=ot.RGB;break;case 4:xt=ot.RGBA;break;default:throw new Error(`Unsupported number of bands: ${j}`)}const Kt=ot.getParameter(ot.UNPACK_ALIGNMENT);ot.pixelStorei(ot.UNPACK_ALIGNMENT,vt),ot.texImage2D(ot.TEXTURE_2D,0,xt,A[0],A[1],0,xt,gt,E),ot.pixelStorei(ot.UNPACK_ALIGNMENT,Kt)}let fe=null;const ve=class Ke extends ct.Z{constructor(r){super(),this.textures=[],this.handleTileChange_=this.handleTileChange_.bind(this),this.renderSize_=(0,R.Pq)(r.grid.getTileSize(r.tile.tileCoord[0])),this.gutter_=r.gutter||0,this.bandCount=NaN,this.helper_=r.helper;const E=new te(34962,F);E.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(E),this.coords=E,this.setTile(r.tile)}setTile(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(Rt.Z.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===n.Z.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof Tt.Z){const E=r.getImage();E instanceof Image&&!E.crossOrigin&&(E.crossOrigin="anonymous")}r.addEventListener(Rt.Z.CHANGE,this.handleTileChange_)}}uploadTile_(){const r=this.helper_,E=r.getGL(),A=this.tile;if(A instanceof Tt.Z||A instanceof at.Z){const Bt=E.createTexture();return this.textures.push(Bt),this.bandCount=4,void function Ct(b,r,E,A){ae(b,r,A),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,E)}(E,Bt,A.getImage(),A.interpolate)}const j=A.getSize(),Y=[j[0]+2*this.gutter_,j[1]+2*this.gutter_],ot=A.getData(),gt=ot instanceof Float32Array,Et=Y[0]*Y[1],pt=gt?Float32Array:Uint8Array,vt=pt.BYTES_PER_ELEMENT,xt=ot.byteLength/Y[1];this.bandCount=Math.floor(xt/vt/Y[0]);const Kt=Math.ceil(this.bandCount/4);if(1===Kt){const Bt=E.createTexture();return this.textures.push(Bt),void ue(r,Bt,ot,Y,this.bandCount,A.interpolate)}const Ft=new Array(Kt);for(let Bt=0;Bt<Kt;++Bt){const Qt=E.createTexture();this.textures.push(Qt),Ft[Bt]=new pt(Et*(Bt<Kt-1?4:(this.bandCount-1)%4+1))}let ie=0,se=0;const ee=Y[0]*this.bandCount;for(let Bt=0;Bt<Y[1];++Bt){for(let Qt=0;Qt<ee;++Qt){const Wt=ot[se+Qt],qt=Math.floor(ie/this.bandCount),oe=Qt%this.bandCount,kt=Ft[Math.floor(oe/4)];kt[qt*(kt.length/Et)+oe%4]=Wt,++ie}se+=xt/vt}for(let Bt=0;Bt<Kt;++Bt){const Wt=Ft[Bt];ue(r,this.textures[Bt],Wt,Y,Wt.length/Et,A.interpolate)}}handleTileChange_(){this.tile.getState()===n.Z.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Rt.Z.CHANGE))}disposeInternal(){const r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let E=0;E<this.textures.length;++E)r.deleteTexture(this.textures[E]);this.tile.removeEventListener(Rt.Z.CHANGE,this.handleTileChange_)}getPixelData(r,E){if(!this.loaded)return null;const A=this.renderSize_[0],j=this.renderSize_[1],Y=this.gutter_;if(this.tile instanceof lt){const ie=this.tile.getSize(),se=ie[0],ee=ie[1],Bt=se+2*Y,Qt=ee+2*Y,Wt=Y+Math.floor(se*(r/A)),qt=Y+Math.floor(ee*(E/j)),oe=this.tile.getData();if(oe instanceof DataView){const kt=oe.byteLength/(Bt*Qt),Vt=kt*(qt*Bt+Wt),re=oe.buffer.slice(Vt,Vt+kt);return new DataView(re)}const de=this.bandCount*(qt*Bt+Wt);return oe.slice(de,de+this.bandCount)}fe||function Pe(){const b=document.createElement("canvas");b.width=1,b.height=1,fe=b.getContext("2d")}(),fe.clearRect(0,0,1,1);const ot=this.tile.getImage(),vt=ot.height-2*Y,xt=Y+Math.floor(r/A*(ot.width-2*Y)),Kt=Y+Math.floor(vt*(E/j));let Ft;try{fe.drawImage(ot,xt,Kt,1,1,0,0,1,1),Ft=fe.getImageData(0,0,1,1).data}catch(ie){return fe=null,null}return Ft}};var Re=l(6769),tt=l(6853),st=l(1206);var mt=l(5783);const Jt=class Nt{constructor(r){this.gl_=r.webGlContext;const E=this.gl_;this.scaleRatio_=r.scaleRatio||1,this.renderTargetTexture_=E.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=E.createFramebuffer();const A=E.createShader(E.VERTEX_SHADER);E.shaderSource(A,r.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),E.compileShader(A);const j=E.createShader(E.FRAGMENT_SHADER);E.shaderSource(j,r.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),E.compileShader(j),this.renderTargetProgram_=E.createProgram(),E.attachShader(this.renderTargetProgram_,A),E.attachShader(this.renderTargetProgram_,j),E.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),E.bufferData(E.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),E.STATIC_DRAW),this.renderTargetAttribLocation_=E.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=E.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=E.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=E.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],r.uniforms&&Object.keys(r.uniforms).forEach(function(ot){this.uniforms_.push({value:r.uniforms[ot],location:E.getUniformLocation(this.renderTargetProgram_,ot)})}.bind(this))}getGL(){return this.gl_}init(r){const E=this.getGL(),A=[E.drawingBufferWidth*this.scaleRatio_,E.drawingBufferHeight*this.scaleRatio_];if(E.bindFramebuffer(E.FRAMEBUFFER,this.getFrameBuffer()),E.viewport(0,0,A[0],A[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==A[0]||this.renderTargetTextureSize_[1]!==A[1]){this.renderTargetTextureSize_=A;const j=0,Y=E.RGBA,ot=0,gt=E.RGBA,Et=E.UNSIGNED_BYTE,pt=null;E.bindTexture(E.TEXTURE_2D,this.renderTargetTexture_),E.texImage2D(E.TEXTURE_2D,j,Y,A[0],A[1],ot,gt,Et,pt),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(r,E,A,j){const Y=this.getGL(),ot=r.size;if(Y.bindFramebuffer(Y.FRAMEBUFFER,E?E.getFrameBuffer():null),Y.activeTexture(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,this.renderTargetTexture_),!E){const Et=(0,_.sq)(Y.canvas);if(!r.renderTargets[Et]){const pt=Y.getContextAttributes();pt&&pt.preserveDrawingBuffer&&(Y.clearColor(0,0,0,0),Y.clear(Y.COLOR_BUFFER_BIT)),r.renderTargets[Et]=!0}}Y.enable(Y.BLEND),Y.blendFunc(Y.ONE,Y.ONE_MINUS_SRC_ALPHA),Y.viewport(0,0,Y.drawingBufferWidth,Y.drawingBufferHeight),Y.bindBuffer(Y.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),Y.useProgram(this.renderTargetProgram_),Y.enableVertexAttribArray(this.renderTargetAttribLocation_),Y.vertexAttribPointer(this.renderTargetAttribLocation_,2,Y.FLOAT,!1,0,0),Y.uniform2f(this.renderTargetUniformLocation_,ot[0],ot[1]),Y.uniform1i(this.renderTargetTextureLocation_,0),Y.uniform1f(this.renderTargetOpacityLocation_,r.layerStatesArray[r.layerIndex].opacity),this.applyUniforms(r),A&&A(Y,r),Y.drawArrays(Y.TRIANGLES,0,6),j&&j(Y,r)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(r){const E=this.getGL();let A,j=1;this.uniforms_.forEach(function(Y){if(A="function"==typeof Y.value?Y.value(r):Y.value,A instanceof HTMLCanvasElement||A instanceof ImageData)Y.texture||(Y.texture=E.createTexture()),E.activeTexture(E[`TEXTURE${j}`]),E.bindTexture(E.TEXTURE_2D,Y.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),A instanceof ImageData?E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,A.width,A.height,0,E.UNSIGNED_BYTE,new Uint8Array(A.data)):E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,A),E.uniform1i(Y.location,j++);else if(Array.isArray(A))switch(A.length){case 2:return void E.uniform2f(Y.location,A[0],A[1]);case 3:return void E.uniform3f(Y.location,A[0],A[1],A[2]);case 4:return void E.uniform4f(Y.location,A[0],A[1],A[2],A[3]);default:return}else"number"==typeof A&&E.uniform1f(Y.location,A)})}};var Yt=l(5230);function Ee(b,r){return b[0]=r[0],b[1]=r[1],b[4]=r[2],b[5]=r[3],b[12]=r[4],b[13]=r[5],b}const Xe={};function Fe(b){return"shared/"+b}let Je=0;function sn(b){switch(b){case 5121:return Uint8Array.BYTES_PER_ELEMENT;case 5123:return Uint16Array.BYTES_PER_ELEMENT;case 5125:return Uint32Array.BYTES_PER_ELEMENT;default:return Float32Array.BYTES_PER_ELEMENT}}const rn=class En extends mt.Z{constructor(r){super(),r=r||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=r.canvasCacheKey?Fe(r.canvasCacheKey):function nn(){const b="unique/"+Je;return Je+=1,b}(),this.canvas_=function be(b){let r=Xe[b];if(!r){const E=document.createElement("canvas");E.style.position="absolute",E.style.left="0",r={users:0,canvas:E},Xe[b]=r}return r.users+=1,r.canvas}(this.canvasCacheKey_),this.gl_=Gt(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.addEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,i.Ue)(),this.offsetScaleMatrix_=(0,i.Ue)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocations_={},this.attribLocations_={},this.uniforms_=[],r.uniforms&&this.setUniforms(r.uniforms);const E=this.getGL();this.postProcessPasses_=r.postProcesses?r.postProcesses.map(function(A){return new Jt({webGlContext:E,scaleRatio:A.scaleRatio,vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,uniforms:A.uniforms})}):[new Jt({webGlContext:E})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(r){this.uniforms_=[];for(const E in r)this.uniforms_.push({name:E,value:r[E]});this.uniformLocations_={}}canvasCacheKeyMatches(r){return this.canvasCacheKey_===Fe(r)}getExtension(r){if(r in this.extensionCache_)return this.extensionCache_[r];const E=this.gl_.getExtension(r);return this.extensionCache_[r]=E,E}bindBuffer(r){const E=this.getGL(),A=(0,_.sq)(r);let j=this.bufferCache_[A];j||(j={buffer:r,webGlBuffer:E.createBuffer()},this.bufferCache_[A]=j),E.bindBuffer(r.getType(),j.webGlBuffer)}flushBufferData(r){const E=this.getGL();this.bindBuffer(r),E.bufferData(r.getType(),r.getArray(),r.getUsage())}deleteBuffer(r){const E=this.getGL(),A=(0,_.sq)(r),j=this.bufferCache_[A];j&&!E.isContextLost()&&E.deleteBuffer(j.webGlBuffer),delete this.bufferCache_[A]}disposeInternal(){this.canvas_.removeEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),function Ne(b){const r=Xe[b];if(!r||(r.users-=1,r.users>0))return;const j=Gt(r.canvas).getExtension("WEBGL_lose_context");j&&j.loseContext(),delete Xe[b]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(r,E){const A=this.getGL(),j=this.getCanvas(),Y=r.size,ot=r.pixelRatio;j.width=Y[0]*ot,j.height=Y[1]*ot,j.style.width=Y[0]+"px",j.style.height=Y[1]+"px";for(let gt=this.postProcessPasses_.length-1;gt>=0;gt--)this.postProcessPasses_[gt].init(r);A.bindTexture(A.TEXTURE_2D,null),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),A.enable(A.BLEND),A.blendFunc(A.ONE,E?A.ZERO:A.ONE_MINUS_SRC_ALPHA)}prepareDrawToRenderTarget(r,E,A){const j=this.getGL(),Y=E.getSize();j.bindFramebuffer(j.FRAMEBUFFER,E.getFramebuffer()),j.viewport(0,0,Y[0],Y[1]),j.bindTexture(j.TEXTURE_2D,E.getTexture()),j.clearColor(0,0,0,0),j.clear(j.COLOR_BUFFER_BIT),j.enable(j.BLEND),j.blendFunc(j.ONE,A?j.ZERO:j.ONE_MINUS_SRC_ALPHA)}drawElements(r,E){const A=this.getGL();this.getExtension("OES_element_index_uint"),A.drawElements(A.TRIANGLES,E-r,A.UNSIGNED_INT,4*r)}finalizeDraw(r,E,A){for(let j=0,Y=this.postProcessPasses_.length;j<Y;j++)j===Y-1?this.postProcessPasses_[j].apply(r,null,E,A):this.postProcessPasses_[j].apply(r,this.postProcessPasses_[j+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(r){const E=r.size,A=r.viewState.rotation,j=r.pixelRatio,Y=(0,i.mc)(this.offsetScaleMatrix_);(0,i.bA)(Y,2/E[0],2/E[1]);const ot=(0,i.mc)(this.offsetRotateMatrix_);0!==A&&(0,i.U1)(ot,-A),this.setUniformMatrixValue("u_offsetScaleMatrix",Ee(this.tmpMat4_,Y)),this.setUniformMatrixValue("u_offsetRotateMatrix",Ee(this.tmpMat4_,ot)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",r.viewState.zoom),this.setUniformFloatValue("u_resolution",r.viewState.resolution),this.setUniformFloatValue("u_pixelRatio",j),this.setUniformFloatVec2("u_sizePx",[E[0],E[1]])}applyUniforms(r){const E=this.getGL();let A,j=0;this.uniforms_.forEach(function(Y){if(A="function"==typeof Y.value?Y.value(r):Y.value,A instanceof HTMLCanvasElement||A instanceof HTMLImageElement||A instanceof ImageData)Y.texture||(Y.prevValue=void 0,Y.texture=E.createTexture()),E.activeTexture(E[`TEXTURE${j}`]),E.bindTexture(E.TEXTURE_2D,Y.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),(!(A instanceof HTMLImageElement)||A.complete)&&Y.prevValue!==A&&(Y.prevValue=A,E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,A)),E.uniform1i(this.getUniformLocation(Y.name),j++);else if(Array.isArray(A)&&6===A.length)this.setUniformMatrixValue(Y.name,Ee(this.tmpMat4_,A));else if(Array.isArray(A)&&A.length<=4)switch(A.length){case 2:return void E.uniform2f(this.getUniformLocation(Y.name),A[0],A[1]);case 3:return void E.uniform3f(this.getUniformLocation(Y.name),A[0],A[1],A[2]);case 4:return void E.uniform4f(this.getUniformLocation(Y.name),A[0],A[1],A[2],A[3]);default:return}else"number"==typeof A&&E.uniform1f(this.getUniformLocation(Y.name),A)}.bind(this))}useProgram(r,E){this.getGL().useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},this.applyFrameState(E),this.applyUniforms(E)}compileShader(r,E){const A=this.getGL(),j=A.createShader(E);return A.shaderSource(j,r),A.compileShader(j),j}getProgram(r,E){const A=this.getGL(),j=this.compileShader(r,A.FRAGMENT_SHADER),Y=this.compileShader(E,A.VERTEX_SHADER),ot=A.createProgram();if(A.attachShader(ot,j),A.attachShader(ot,Y),A.linkProgram(ot),!A.getShaderParameter(j,A.COMPILE_STATUS)){const gt=`Fragment shader compliation failed: ${A.getShaderInfoLog(j)}`;throw new Error(gt)}if(A.deleteShader(j),!A.getShaderParameter(Y,A.COMPILE_STATUS)){const gt=`Vertex shader compilation failed: ${A.getShaderInfoLog(Y)}`;throw new Error(gt)}if(A.deleteShader(Y),!A.getProgramParameter(ot,A.LINK_STATUS)){const gt=`GL program linking failed: ${A.getShaderInfoLog(Y)}`;throw new Error(gt)}return ot}getUniformLocation(r){return void 0===this.uniformLocations_[r]&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]}getAttributeLocation(r){return void 0===this.attribLocations_[r]&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]}makeProjectionTransform(r,E){const A=r.size,j=r.viewState.rotation,Y=r.viewState.resolution,ot=r.viewState.center;return(0,i.mc)(E),(0,i.qC)(E,0,0,2/(Y*A[0]),2/(Y*A[1]),-j,-ot[0],-ot[1]),E}setUniformFloatValue(r,E){this.getGL().uniform1f(this.getUniformLocation(r),E)}setUniformFloatVec2(r,E){this.getGL().uniform2fv(this.getUniformLocation(r),E)}setUniformFloatVec4(r,E){this.getGL().uniform4fv(this.getUniformLocation(r),E)}setUniformMatrixValue(r,E){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,E)}enableAttributeArray_(r,E,A,j,Y){const ot=this.getAttributeLocation(r);ot<0||(this.getGL().enableVertexAttribArray(ot),this.getGL().vertexAttribPointer(ot,E,A,!1,j,Y))}enableAttributes(r){const E=function _n(b){let r=0;for(let E=0;E<b.length;E++){const A=b[E];r+=A.size*sn(A.type)}return r}(r);let A=0;for(let j=0;j<r.length;j++){const Y=r[j];this.enableAttributeArray_(Y.name,Y.size,Y.type||5126,E,A),A+=Y.size*sn(Y.type)}}handleWebGLContextLost(){(0,Yt.Z)(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(r,E,A){const j=this.getGL();A=A||j.createTexture();const ot=j.RGBA,Et=j.RGBA,pt=j.UNSIGNED_BYTE;return j.bindTexture(j.TEXTURE_2D,A),E?j.texImage2D(j.TEXTURE_2D,0,ot,Et,pt,E):j.texImage2D(j.TEXTURE_2D,0,ot,r[0],r[1],0,Et,pt,null),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),A}};class Me extends Re.Z{constructor(r,E){super(r),E=E||{},this.inversePixelTransform_=(0,i.Ue)(),this.pixelContext_=null,this.postProcesses_=E.postProcesses,this.uniforms_=E.uniforms,r.addChangeListener($.Z.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(r,E){const A=this.getLayer();if(A.hasListener(st.Z.PRECOMPOSE)){const j=new tt.Z(st.Z.PRECOMPOSE,void 0,E,r);A.dispatchEvent(j)}}dispatchPostComposeEvent(r,E){const A=this.getLayer();if(A.hasListener(st.Z.POSTCOMPOSE)){const j=new tt.Z(st.Z.POSTCOMPOSE,void 0,E,r);A.dispatchEvent(j)}}reset(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(r){if(this.getLayer().getRenderSource()){let j,E=!0,A=-1;for(let ot=0,gt=r.layerStatesArray.length;ot<gt;ot++){const Et=r.layerStatesArray[ot].layer,pt=Et.getRenderer();if(!(pt instanceof Me)){E=!0;continue}const vt=Et.getClassName();if((E||vt!==j)&&(A+=1,E=!1),j=vt,pt===this)break}const Y="map/"+r.mapId+"/group/"+A;(!this.helper||!this.helper.canvasCacheKeyMatches(Y))&&(this.removeHelper(),this.helper=new rn({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:Y}),j&&(this.helper.getCanvas().className=j),this.afterHelperCreated())}return this.prepareFrameInternal(r)}afterHelperCreated(){}prepareFrameInternal(r){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(r,E,A){const j=this.getLayer();if(j.hasListener(r)){(0,i.qC)(this.inversePixelTransform_,0,0,A.pixelRatio,-A.pixelRatio,0,0,-A.size[1]);const Y=new tt.Z(r,this.inversePixelTransform_,A,E);j.dispatchEvent(Y)}}preRender(r,E){this.dispatchRenderEvent_(st.Z.PRERENDER,r,E)}postRender(r,E){this.dispatchRenderEvent_(st.Z.POSTRENDER,r,E)}}const pn=Me;var Be=l(5435),on=l(7942),an=l(9351);const je=[{name:"a_textureCoord",size:2,type:5126}],ze={};function ln(b,r,E){E in b||(b[E]=[]),b[E].push(r)}function Qe(b,r){const E=b.layerStatesArray[b.layerIndex];E.extent&&(r=(0,u.Ed)(r,(0,on.dY)(E.extent,b.viewState.projection)));const A=E.layer.getRenderSource();if(!A.getWrapX()){const j=A.getTileGridForProjection(b.viewState.projection).getExtent();j&&(r=(0,u.Ed)(r,j))}return r}function pe(b,r){return`${b.getKey()},${(0,Be.km)(r)}`}const xe=class Ge extends pn{constructor(r,E){super(r,{uniforms:E.uniforms}),this.renderComplete=!1,this.tileTransform_=(0,i.Ue)(),this.tempMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.tempTileRange_=new J.Z(0,0,0,0),this.tempTileCoord_=(0,Be.T9)(0,0,0),this.tempSize_=[0,0],this.vertexShader_=E.vertexShader,this.fragmentShader_=E.fragmentShader,this.indices_=new te(34963,F),this.indices_.fromArray([0,1,3,1,2,3]),this.tileTextureCache_=new z.Z(void 0!==E.cacheSize?E.cacheSize:512),this.paletteTextures_=E.paletteTextures||[],this.frameState_=null,this.projection_=void 0}reset(r){super.reset({uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}isDrawableTile_(r){const E=this.getLayer(),A=r.getState(),j=E.getUseInterimTilesOnError();return A==n.Z.LOADED||A==n.Z.EMPTY||A==n.Z.ERROR&&!j}prepareFrameInternal(r){this.projection_?r.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=r.viewState.projection):this.projection_=r.viewState.projection;const A=this.getLayer().getRenderSource();return!(!A||(0,u.xb)(Qe(r,r.extent)))&&"ready"===A.getState()}enqueueTiles(r,E,A,j,Y){const ot=r.viewState,gt=this.getLayer(),Et=gt.getRenderSource(),pt=Et.getTileGridForProjection(ot.projection),vt=Et.getGutterForProjection(ot.projection),xt=(0,_.sq)(Et);xt in r.wantedTiles||(r.wantedTiles[xt]={});const Kt=r.wantedTiles[xt],Ft=this.tileTextureCache_,ie=gt.getMapInternal(),se=Math.max(A-Y,pt.getMinZoom(),pt.getZForResolution(Math.min(gt.getMaxResolution(),ie?ie.getView().getResolutionForZoom(Math.max(gt.getMinZoom(),0)):pt.getResolution(0)),Et.zDirection));for(let ee=A;ee>=se;--ee){const Bt=pt.getTileRangeForExtentAndZ(E,ee,this.tempTileRange_),Qt=pt.getResolution(ee);for(let Wt=Bt.minX;Wt<=Bt.maxX;++Wt)for(let qt=Bt.minY;qt<=Bt.maxY;++qt){const oe=(0,Be.T9)(ee,Wt,qt,this.tempTileCoord_),de=pe(Et,oe);let kt,Vt;if(Ft.containsKey(de)&&(kt=Ft.get(de),Vt=kt.tile),!kt||kt.tile.key!==Et.getKey())if(Vt=Et.getTile(ee,Wt,qt,r.pixelRatio,ot.projection),kt)if(this.isDrawableTile_(Vt))kt.setTile(Vt);else{const ge=Vt.getInterimTile();kt.setTile(ge)}else kt=new ve({tile:Vt,grid:pt,helper:this.helper,gutter:vt}),Ft.set(de,kt);ln(j,kt,ee);const re=Vt.getKey();Kt[re]=!0,Vt.getState()===n.Z.IDLE&&(r.tileQueue.isKeyQueued(re)||r.tileQueue.enqueue([Vt,xt,pt.getTileCoordCenter(oe),Qt]))}}}renderFrame(r){this.frameState_=r,this.renderComplete=!0;const E=this.helper.getGL();this.preRender(E,r);const A=r.viewState,j=this.getLayer(),Y=j.getRenderSource(),ot=Y.getTileGridForProjection(A.projection),gt=Y.getGutterForProjection(A.projection),Et=Qe(r,r.extent),pt=ot.getZForResolution(A.resolution,Y.zDirection),vt={},xt=j.getPreload();if(r.nextExtent){const kt=ot.getZForResolution(A.nextResolution,Y.zDirection),Vt=Qe(r,r.nextExtent);this.enqueueTiles(r,Vt,kt,vt,xt)}this.enqueueTiles(r,Et,pt,vt,0),xt>0&&setTimeout(()=>{this.enqueueTiles(r,Et,pt-1,vt,xt-1)},0);const Kt={},Ft=(0,_.sq)(this),ie=r.time;let se=!1;const ee=vt[pt];for(let kt=0,Vt=ee.length;kt<Vt;++kt){const re=ee[kt],ge=re.tile;if(ge instanceof at.Z&&ge.getState()===n.Z.EMPTY)continue;const ce=ge.tileCoord;if(re.loaded){const we=ge.getAlpha(Ft,ie);if(1===we){ge.endTransition(Ft);continue}se=!0,Kt[(0,Be.km)(ce)]=we}if(this.renderComplete=!1,this.findAltTiles_(ot,ce,pt+1,vt))continue;const He=ot.getMinZoom();for(let we=pt-1;we>=He&&!this.findAltTiles_(ot,ce,we,vt);--we);}this.helper.useProgram(this.program_,r),this.helper.prepareDraw(r,!se);const Bt=Object.keys(vt).map(Number).sort(an.kK),Qt=A.center[0],Wt=A.center[1];for(let kt=0,Vt=Bt.length;kt<Vt;++kt){const re=Bt[kt],ge=ot.getResolution(re),ce=(0,R.Pq)(ot.getTileSize(re),this.tempSize_),Ve=ot.getOrigin(re),He=ce[0]+2*gt,we=ce[1]+2*gt,mn=He/we,Ze=(Qt-Ve[0])/(ce[0]*ge),dn=(Ve[1]-Wt)/(ce[1]*ge),en=A.resolution/ge,wn=2*(1-1/(re+1))-1,Un=vt[re];for(let bn=0,Xn=Un.length;bn<Xn;++bn){const Tn=Un[bn];if(!Tn.loaded)continue;const Ln=Tn.tile.tileCoord,Zn=(0,Be.km)(Ln),Fn=Ln[1],Nn=Ln[2];(0,i.mc)(this.tileTransform_),(0,i.bA)(this.tileTransform_,2/(r.size[0]*en/He),-2/(r.size[1]*en/He)),(0,i.U1)(this.tileTransform_,A.rotation),(0,i.bA)(this.tileTransform_,1,1/mn),(0,i.Iu)(this.tileTransform_,(ce[0]*(Fn-Ze)-gt)/He,(ce[1]*(Nn-dn)-gt)/we),this.helper.setUniformMatrixValue("u_tileTransform",Ee(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(Tn.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(je);let $e=0;for(;$e<Tn.textures.length;){const Sn=`u_tileTextures[${$e}]`;E.activeTexture(E["TEXTURE"+$e]),E.bindTexture(E.TEXTURE_2D,Tn.textures[$e]),E.uniform1i(this.helper.getUniformLocation(Sn),$e),++$e}for(let yn=0;yn<this.paletteTextures_.length;++yn){const Sn=this.paletteTextures_[yn];E.activeTexture(E["TEXTURE"+$e]);const jn=Sn.getTexture(E);E.bindTexture(E.TEXTURE_2D,jn),E.uniform1i(this.helper.getUniformLocation(Sn.name),$e),++$e}const Bn=Zn in Kt?Kt[Zn]:1;Bn<1&&(r.animate=!0),this.helper.setUniformFloatValue("u_transitionAlpha",Bn),this.helper.setUniformFloatValue("u_depth",wn),this.helper.setUniformFloatValue("u_texturePixelWidth",He),this.helper.setUniformFloatValue("u_texturePixelHeight",we),this.helper.setUniformFloatValue("u_textureResolution",ge),this.helper.setUniformFloatValue("u_textureOriginX",Ve[0]+Fn*ce[0]*ge-gt*ge),this.helper.setUniformFloatValue("u_textureOriginY",Ve[1]-Nn*ce[1]*ge+gt*ge);let Mn=Et;gt>0&&(Mn=ot.getTileCoordExtent(Ln),(0,u.Ed)(Mn,Et,Mn)),this.helper.setUniformFloatVec4("u_renderExtent",Mn),this.helper.setUniformFloatValue("u_resolution",A.resolution),this.helper.setUniformFloatValue("u_zoom",A.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const qt=this.helper.getCanvas(),oe=this.tileTextureCache_;for(;oe.canExpireCache();)oe.pop().dispose();return r.postRenderFunctions.push(function(kt,Vt){Y.updateCacheSize(.1,Vt.viewState.projection),Y.expireCache(Vt.viewState.projection,ze)}),this.postRender(E,r),qt}getData(r){if(!this.helper.getGL())return null;const A=this.frameState_;if(!A)return null;const j=this.getLayer(),Y=(0,i.nn)(A.pixelToCoordinateTransform,r.slice()),ot=A.viewState,gt=j.getExtent();if(gt&&!(0,u.b8)((0,on.dY)(gt,ot.projection),Y))return null;const Et=j.getSources((0,u.hI)([Y]),ot.resolution);let pt,vt,xt;for(pt=Et.length-1;pt>=0;--pt)if(vt=Et[pt],"ready"===vt.getState()){if(xt=vt.getTileGridForProjection(ot.projection),vt.getWrapX())break;const Ft=xt.getExtent();if(!Ft||(0,u.b8)(Ft,Y))break}if(pt<0)return null;const Kt=this.tileTextureCache_;for(let Ft=xt.getZForResolution(ot.resolution);Ft>=xt.getMinZoom();--Ft){const ie=xt.getTileCoordForCoordAndZ(Y,Ft),se=pe(vt,ie);if(!Kt.containsKey(se))continue;const ee=Kt.get(se),Bt=ee.tile;if(Bt instanceof at.Z&&Bt.getState()===n.Z.EMPTY)return null;if(!ee.loaded)continue;const Qt=xt.getOrigin(Ft),Wt=(0,R.Pq)(xt.getTileSize(Ft)),qt=xt.getResolution(Ft);return ee.getPixelData((Y[0]-Qt[0])/qt-ie[1]*Wt[0],(Qt[1]-Y[1])/qt-ie[2]*Wt[1])}return null}findAltTiles_(r,E,A,j){const Y=r.getTileRangeForTileCoordAndZ(E,A,this.tempTileRange_);if(!Y)return!1;let ot=!0;const gt=this.tileTextureCache_,Et=this.getLayer().getRenderSource();for(let pt=Y.minX;pt<=Y.maxX;++pt)for(let vt=Y.minY;vt<=Y.maxY;++vt){const xt=pe(Et,[A,pt,vt]);let Kt=!1;if(gt.containsKey(xt)){const Ft=gt.get(xt);Ft.loaded&&(ln(j,Ft,A),Kt=!0)}Kt||(ot=!1)}return ot}clearCache(){const r=this.tileTextureCache_;r.forEach(E=>E.dispose()),r.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){const r=this.helper;r&&(r.getGL().deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_}};var Ue=l(9861);const Zt={};function _e(b){if("number"==typeof b)return 1;if("boolean"==typeof b)return 8;if("string"==typeof b)return(0,Ue.e1)(b)?6:2;if(!Array.isArray(b))throw new Error(`Unhandled value type: ${JSON.stringify(b)}`);const r=b;if(r.every(function(j){return"number"==typeof j}))return 3===r.length||4===r.length?20:16;if("string"!=typeof r[0])throw new Error(`Expected an expression operator but received: ${JSON.stringify(r)}`);const A=Zt[r[0]];if(void 0===A)throw new Error(`Unrecognized expression operator: ${JSON.stringify(r)}`);return A.getReturnType(r.slice(1))}function qe(b){const r=b.toString();return r.includes(".")?r:r+".0"}function Cn(b){if(b.length<2||b.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${b.length}(${b.map(qe).join(", ")})`}function rt(b,r){return void 0===b.stringLiteralsMap[r]&&(b.stringLiteralsMap[r]=Object.keys(b.stringLiteralsMap).length),b.stringLiteralsMap[r]}function x(b,r,E){if(Array.isArray(r)&&"string"==typeof r[0]){const j=Zt[r[0]];if(void 0===j)throw new Error(`Unrecognized expression operator: ${JSON.stringify(r)}`);return j.toGlsl(b,r.slice(1),E)}const A=_e(r);if((1&A)>0)return qe(r);if((8&A)>0)return r.toString();if((2&A)>0&&(void 0===E||2==E))return function h(b,r){return qe(rt(b,r))}(b,r.toString());if((4&A)>0&&(void 0===E||4==E))return function An(b){const r=(0,Ue._2)(b).slice();return r.length<4&&r.push(1),Cn(r.map(function(E,A){return A<3?E/255:E}))}(r);if((16&A)>0)return Cn(r);throw new Error(`Unexpected expression ${r} (expected type ${E})`)}function X(b){if(!(1&_e(b)))throw new Error(`A numeric value was expected, got ${JSON.stringify(b)} instead`)}function H(b){for(let r=0;r<b.length;r++)X(b[r])}function ut(b){if(!(2&_e(b)))throw new Error(`A string value was expected, got ${JSON.stringify(b)} instead`)}function ft(b){if(!(8&_e(b)))throw new Error(`A boolean value was expected, got ${JSON.stringify(b)} instead`)}function yt(b,r){if(b.length!==r)throw new Error(`Exactly ${r} arguments were expected, got ${b.length} instead`)}function ne(b,r){if(b.length<r)throw new Error(`At least ${r} arguments were expected, got ${b.length} instead`)}function le(b,r){if(b.length>r)throw new Error(`At most ${r} arguments were expected, got ${b.length} instead`)}function me(b){if(b.length%2!=0)throw new Error(`An even amount of arguments was expected, got ${b} instead`)}function hn(b,r){if(!function Se(b){return Math.log2(b)%1==0}(r))throw new Error(`Could not infer only one type from the following expression: ${JSON.stringify(b)}`)}function Rn(b){return"u_var_"+b}Zt.get={getReturnType:function(b){return 31},toGlsl:function(b,r){yt(r,1),ut(r[0]);const E=r[0].toString();return b.attributes.includes(E)||b.attributes.push(E),(b.inFragmentShader?"v_":"a_")+E}},Zt.var={getReturnType:function(b){return 31},toGlsl:function(b,r){yt(r,1),ut(r[0]);const E=r[0].toString();return b.variables.includes(E)||b.variables.push(E),Rn(E)}};const cn="u_paletteTextures";Zt.palette={getReturnType:function(b){return 4},toGlsl:function(b,r){yt(r,2),X(r[0]);const E=x(b,r[0]),A=r[1];if(!Array.isArray(A))throw new Error("The second argument of palette must be an array");const j=A.length,Y=new Uint8Array(4*j);for(let Et=0;Et<j;Et++){const pt=A[Et];let vt;if("string"==typeof pt)vt=(0,Ue.mL)(pt);else{if(!Array.isArray(pt))throw new Error("The second argument of palette must be an array of strings or colors");const Kt=pt.length;if(4===Kt)vt=pt;else{if(3!==Kt)throw new Error(`Expected palette color to have 3 or 4 values, got ${Kt}`);vt=[pt[0],pt[1],pt[2],1]}}const xt=4*Et;Y[xt]=vt[0],Y[xt+1]=vt[1],Y[xt+2]=vt[2],Y[xt+3]=255*vt[3]}b.paletteTextures||(b.paletteTextures=[]);const ot=`${cn}[${b.paletteTextures.length}]`,gt=new class Oe{constructor(r,E){this.name=r,this.data=E,this.texture_=null}getTexture(r){if(!this.texture_){const E=r.createTexture();r.bindTexture(r.TEXTURE_2D,E),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.data.length/4,1,0,r.RGBA,r.UNSIGNED_BYTE,this.data),this.texture_=E}return this.texture_}}(ot,Y);return b.paletteTextures.push(gt),`texture2D(${ot}, vec2((${E} + 0.5) / ${j}.0, 0.5))`}};const gn="getBandValue";function xn(b){return{getReturnType:function(r){return 8},toGlsl:function(r,E){yt(E,2);let A=31;for(let j=0;j<E.length;j++)A&=_e(E[j]);if(0===A)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(E)} instead`);return A&=-5,`(${x(r,E[0],A)} ${b} ${x(r,E[1],A)})`}}}function Ye(b){return{getReturnType:function(r){return 8},toGlsl:function(r,E){ne(E,2);for(let j=0;j<E.length;j++)ft(E[j]);let A="";return A=E.map(j=>x(r,j)).join(` ${b} `),A=`(${A})`,A}}}function fn(b,r){const A={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:r},j=[];if(void 0!==b.color){const xt=x(A,b.color,4);j.push(`color = ${xt};`)}if(void 0!==b.contrast){const xt=x(A,b.contrast,1);j.push(`color.rgb = clamp((${xt} + 1.0) * color.rgb - (${xt} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==b.exposure){const xt=x(A,b.exposure,1);j.push(`color.rgb = clamp((${xt} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==b.saturation){const xt=x(A,b.saturation,1);j.push(`\n      float saturation = ${xt} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==b.gamma){const xt=x(A,b.gamma,1);j.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${xt}));`)}if(void 0!==b.brightness){const xt=x(A,b.brightness,1);j.push(`color.rgb = clamp(color.rgb + ${xt}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const Y={},ot=A.variables.length;if(ot>1&&!b.variables)throw new Error(`Missing variables in style (expected ${A.variables})`);for(let xt=0;xt<ot;++xt){const Kt=A.variables[xt];if(!(Kt in b.variables))throw new Error(`Missing '${Kt}' in style variables`);Y[Rn(Kt)]=function(){let ie=b.variables[Kt];return"string"==typeof ie&&(ie=rt(A,ie)),void 0!==ie?ie:-9999999}}const gt=Object.keys(Y).map(function(xt){return`uniform float ${xt};`}),Et=Math.ceil(r/4);gt.push(`uniform sampler2D u_tileTextures[${Et}];`),A.paletteTextures&&gt.push(`uniform sampler2D ${cn}[${A.paletteTextures.length}];`);const pt=Object.keys(A.functions).map(function(xt){return A.functions[xt]});return{vertexShader:"\n    attribute vec2 a_textureCoord;\n    uniform mat4 u_tileTransform;\n    uniform float u_texturePixelWidth;\n    uniform float u_texturePixelHeight;\n    uniform float u_textureResolution;\n    uniform float u_textureOriginX;\n    uniform float u_textureOriginY;\n    uniform float u_depth;\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = a_textureCoord;\n      v_mapCoord = vec2(\n        u_textureOriginX + u_textureResolution * u_texturePixelWidth * v_textureCoord[0],\n        u_textureOriginY - u_textureResolution * u_texturePixelHeight * v_textureCoord[1]\n      );\n      gl_Position = u_tileTransform * vec4(a_textureCoord, u_depth, 1.0);\n    }\n  ",fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 u_renderExtent;\n    uniform float u_transitionAlpha;\n    uniform float u_texturePixelWidth;\n    uniform float u_texturePixelHeight;\n    uniform float u_resolution;\n    uniform float u_zoom;\n\n    ${gt.join("\n")}\n\n    ${pt.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < u_renderExtent[0] ||\n        v_mapCoord[1] < u_renderExtent[1] ||\n        v_mapCoord[0] > u_renderExtent[2] ||\n        v_mapCoord[1] > u_renderExtent[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(u_tileTextures[0],  v_textureCoord);\n\n      ${j.join("\n")}\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= u_transitionAlpha;\n    }`,uniforms:Y,paletteTextures:A.paletteTextures}}Zt.band={getReturnType:function(b){return 1},toGlsl:function(b,r){ne(r,1),le(r,3);const E=r[0];if(!(gn in b.functions)){let ot="";const gt=b.bandCount||1;for(let Et=0;Et<gt;Et++){const pt=Math.floor(Et/4);let vt=Et%4;Et===gt-1&&1===vt&&(vt=3),ot+=`\n          if (band == ${Et+1}.0) {\n            return texture2D(u_tileTextures[${pt}], v_textureCoord + vec2(dx, dy))[${vt}];\n          }\n        `}b.functions[gn]=`\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / u_texturePixelWidth;\n          float dy = yOffset / u_texturePixelHeight;\n          ${ot}\n        }\n      `}const A=x(b,E),j=x(b,r[1]||0),Y=x(b,r[2]||0);return`${gn}(${A}, ${j}, ${Y})`}},Zt.time={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,0),"u_time"}},Zt.zoom={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,0),"u_zoom"}},Zt.resolution={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,0),"u_resolution"}},Zt["*"]={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} * ${x(b,r[1])})`}},Zt["/"]={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} / ${x(b,r[1])})`}},Zt["+"]={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} + ${x(b,r[1])})`}},Zt["-"]={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} - ${x(b,r[1])})`}},Zt.clamp={getReturnType:function(b){return 1},toGlsl:function(b,r){yt(r,3),H(r);const E=x(b,r[1]),A=x(b,r[2]);return`clamp(${x(b,r[0])}, ${E}, ${A})`}},Zt["%"]={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,2),H(r),`mod(${x(b,r[0])}, ${x(b,r[1])})`}},Zt["^"]={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,2),H(r),`pow(${x(b,r[0])}, ${x(b,r[1])})`}},Zt.abs={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,1),H(r),`abs(${x(b,r[0])})`}},Zt.floor={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,1),H(r),`floor(${x(b,r[0])})`}},Zt.round={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,1),H(r),`floor(${x(b,r[0])} + 0.5)`}},Zt.ceil={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,1),H(r),`ceil(${x(b,r[0])})`}},Zt.sin={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,1),H(r),`sin(${x(b,r[0])})`}},Zt.cos={getReturnType:function(b){return 1},toGlsl:function(b,r){return yt(r,1),H(r),`cos(${x(b,r[0])})`}},Zt.atan={getReturnType:function(b){return 1},toGlsl:function(b,r){return ne(r,1),le(r,2),H(r),2===r.length?`atan(${x(b,r[0])}, ${x(b,r[1])})`:`atan(${x(b,r[0])})`}},Zt[">"]={getReturnType:function(b){return 8},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} > ${x(b,r[1])})`}},Zt[">="]={getReturnType:function(b){return 8},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} >= ${x(b,r[1])})`}},Zt["<"]={getReturnType:function(b){return 8},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} < ${x(b,r[1])})`}},Zt["<="]={getReturnType:function(b){return 8},toGlsl:function(b,r){return yt(r,2),H(r),`(${x(b,r[0])} <= ${x(b,r[1])})`}},Zt["=="]=xn("=="),Zt["!="]=xn("!="),Zt["!"]={getReturnType:function(b){return 8},toGlsl:function(b,r){return yt(r,1),ft(r[0]),`(!${x(b,r[0])})`}},Zt.all=Ye("&&"),Zt.any=Ye("||"),Zt.between={getReturnType:function(b){return 8},toGlsl:function(b,r){yt(r,3),H(r);const E=x(b,r[1]),A=x(b,r[2]),j=x(b,r[0]);return`(${j} >= ${E} && ${j} <= ${A})`}},Zt.array={getReturnType:function(b){return 16},toGlsl:function(b,r){ne(r,2),le(r,4),H(r);const E=r.map(function(A){return x(b,A,1)});return`vec${r.length}(${E.join(", ")})`}},Zt.color={getReturnType:function(b){return 4},toGlsl:function(b,r){ne(r,3),le(r,4),H(r),3===r.length&&r.push(1);const A=r.map(function(j,Y){return x(b,j,1)+(Y<3?" / 255.0":"")});return`vec${r.length}(${A.join(", ")})`}},Zt.interpolate={getReturnType:function(b){let r=5;for(let E=3;E<b.length;E+=2)r&=_e(b[E]);return r},toGlsl:function(b,r,E){me(r),ne(r,6);const A=r[0];let j;switch(A[0]){case"linear":j=1;break;case"exponential":j=A[1];break;default:j=null}if(!j)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(A)}`);E=void 0!==E?E:31;const Y=Zt.interpolate.getReturnType(r)&E;hn(r,Y);const ot=x(b,r[1]),gt=qe(j);let Et="";for(let pt=2;pt<r.length-2;pt+=2){const vt=x(b,r[pt]),xt=Et||x(b,r[pt+1],Y),Kt=x(b,r[pt+2]);Et=`mix(${xt}, ${x(b,r[pt+3],Y)}, pow(clamp((${ot} - ${vt}) / (${Kt} - ${vt}), 0.0, 1.0), ${gt}))`}return Et}},Zt.match={getReturnType:function(b){let r=31;for(let E=2;E<b.length;E+=2)r&=_e(b[E]);return r&=_e(b[b.length-1]),r},toGlsl:function(b,r,E){me(r),ne(r,4),E=void 0!==E?E:31;const A=Zt.match.getReturnType(r)&E;hn(r,A);const j=x(b,r[0]),Y=x(b,r[r.length-1],A);let ot=null;for(let gt=r.length-3;gt>=1;gt-=2)ot=`(${j} == ${x(b,r[gt])} ? ${x(b,r[gt+1],A)} : ${ot||Y})`;return ot}},Zt.case={getReturnType:function(b){let r=31;for(let E=1;E<b.length;E+=2)r&=_e(b[E]);return r&=_e(b[b.length-1]),r},toGlsl:function(b,r,E){(function De(b){if(b.length%2==0)throw new Error(`An odd amount of arguments was expected, got ${b} instead`)})(r),ne(r,3),E=void 0!==E?E:31;const A=Zt.case.getReturnType(r)&E;hn(r,A);for(let ot=0;ot<r.length-1;ot+=2)ft(r[ot]);const j=x(b,r[r.length-1],A);let Y=null;for(let ot=r.length-3;ot>=0;ot-=2)Y=`(${x(b,r[ot])} ? ${x(b,r[ot+1],A)} : ${Y||j})`;return Y}};const Te=class vn extends q.Z{constructor(r){const E=(r=r?Object.assign({},r):{}).style||{};delete r.style;const A=r.cacheSize;delete r.cacheSize,super(r),this.sources_=r.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=E,this.cacheSize_=A,this.styleVariables_=this.style_.variables||{},this.addChangeListener($.Z.SOURCE,this.handleSourceUpdate_)}getSources(r,E){const A=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(r,E):this.sources_:A?[A]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const r=this.getRenderSource();return r?r.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const r=Number.MAX_SAFE_INTEGER,E=this.getSources([-r,-r,r,r],r);return E&&E.length&&"bandCount"in E[0]?E[0].bandCount:4}createRenderer(){const r=fn(this.style_,this.getSourceBandCount_());return new xe(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})}renderSources(r,E){const A=this.getRenderer();let j;for(let Y=0,ot=E.length;Y<ot;++Y)this.renderedSource_=E[Y],A.prepareFrame(r)&&(j=A.renderFrame(r));return j}render(r,E){this.rendered=!0;const A=r.viewState,j=this.getSources(r.extent,A.resolution);let Y=!0;for(let gt=0,Et=j.length;gt<Et;++gt){const pt=j[gt],vt=pt.getState();if("loading"==vt){const xt=()=>{"ready"==pt.getState()&&(pt.removeEventListener("change",xt),this.changed())};pt.addEventListener("change",xt)}Y=Y&&"ready"==vt}const ot=this.renderSources(r,j);if(this.getRenderer().renderComplete&&Y)return this.renderedResolution_=A.resolution,ot;if(this.renderedResolution_>.5*A.resolution){const gt=this.getSources(r.extent,this.renderedResolution_).filter(Et=>!j.includes(Et));if(gt.length>0)return this.renderSources(r,gt)}return ot}setStyle(r){this.styleVariables_=r.variables||{},this.style_=r;const E=fn(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,uniforms:E.uniforms,paletteTextures:E.paletteTextures}),this.changed()}updateStyleVariables(r){Object.assign(this.styleVariables_,r),this.changed()}},Le=["*"];let un=(()=>{class b extends W.D{constructor(E,A){super(E,A),this.onPostcompose=new T.vpe,this.onPrecompose=new T.vpe,this.onRendercomplete=new T.vpe}ngOnInit(){this.instance=new Te(this),this.instance.on("postcompose",E=>this.onPostcompose.emit(E)),this.instance.on("precompose",E=>this.onPrecompose.emit(E)),this.instance.on("rendercomplete",E=>this.onRendercomplete.emit(E)),super.ngOnInit()}}return b.\u0275fac=function(E){return new(E||b)(T.Y36(g.T,8),T.Y36(f.f,8))},b.\u0275cmp=T.Xpm({type:b,selectors:[["nol-webgl-tile-layer"]],inputs:{style:"style",source:"source",sources:"sources",cacheSize:"cacheSize"},outputs:{onPostcompose:"onPostcompose",onPrecompose:"onPrecompose",onRendercomplete:"onRendercomplete"},exportAs:["nolWebglTileLayer"],features:[T.qOj],ngContentSelectors:Le,decls:1,vars:0,template:function(E,A){1&E&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),b})();const tn=["*"];let Pn=(()=>{class b extends C{constructor(E,A,j){super(E||A||j)}ngOnInit(){this.instance||(this.instance=new L.Z(this)),super.ngOnInit()}}return b.\u0275fac=function(E){return new(E||b)(T.Y36(p.K,9),T.Y36(U,9),T.Y36(un,9))},b.\u0275cmp=T.Xpm({type:b,selectors:[["nol-tile-source"]],inputs:{cacheSize:"cacheSize",opaque:"opaque",tilePixelRatio:"tilePixelRatio",tileGrid:"tileGrid",transition:"transition",key:"key",zDirection:"zDirection"},exportAs:["nolTileSource"],features:[T.qOj],ngContentSelectors:tn,decls:1,vars:0,template:function(E,A){1&E&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),b})();var In=l(458);const On=["*"];let Dn=(()=>{class b extends Pn{constructor(E,A){super(E,A),this.onTileloadend=new T.vpe,this.onTileloaderror=new T.vpe,this.onTileloadstart=new T.vpe}ngOnInit(){this.instance||(this.instance=new In.Z(this)),this.instance.on("tileloadend",E=>this.onTileloadend.emit(E)),this.instance.on("tileloaderror",E=>this.onTileloaderror.emit(E)),this.instance.on("tileloadstart",E=>this.onTileloadstart.emit(E)),super.ngOnInit()}ngOnChanges(E){const{tileLoadFunction:A,tileUrlFunction:j,url:Y,urls:ot}=E,gt=(0,Z._T)(E,["tileLoadFunction","tileUrlFunction","url","urls"]);this.instance&&A&&this.instance.setTileLoadFunction(A.currentValue),this.instance&&j&&this.instance.setTileUrlFunction(j.currentValue),this.instance&&Y&&this.instance.setUrl(Y.currentValue),this.instance&&ot&&this.instance.setUrls(ot.currentValue),super.ngOnChanges(gt)}}return b.\u0275fac=function(E){return new(E||b)(T.Y36(p.K,9),T.Y36(U,9))},b.\u0275cmp=T.Xpm({type:b,selectors:[["nol-url-tile-source"]],inputs:{tileLoadFunction:"tileLoadFunction",tileUrlFunction:"tileUrlFunction",url:"url",urls:"urls"},outputs:{onTileloadend:"onTileloadend",onTileloaderror:"onTileloaderror",onTileloadstart:"onTileloadstart"},exportAs:["nolUrlTileSource"],features:[T.qOj,T.TTD],ngContentSelectors:On,decls:1,vars:0,template:function(E,A){1&E&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),b})();var Wn=l(1508);const Gn=["*"];let Kn=(()=>{class b extends Dn{constructor(E){super(E)}ngOnInit(){this.instance||(this.instance=new Wn.Z(this)),super.ngOnInit()}}return b.\u0275fac=function(E){return new(E||b)(T.Y36(p.K,1))},b.\u0275cmp=T.Xpm({type:b,selectors:[["nol-tile-image-source"]],inputs:{crossOrigin:"crossOrigin",reprojectionErrorThreshold:"reprojectionErrorThreshold",tileClass:"tileClass"},exportAs:["nolTileImageSource"],features:[T.qOj],ngContentSelectors:Gn,decls:1,vars:0,template:function(E,A){1&E&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),b})()},1233:(_t,k,l)=>{"use strict";l.d(k,{S:()=>C});var Z=l(7608),T=l(2398),N=l(8259),O=l(9128),y=l(2683);const I=["*"];let C=(()=>{class L extends O.V{constructor(s){super(),this.host=s,this.enableChangesAnimation=!1,this.onCenterChange=new T.vpe,this.onResolutionChange=new T.vpe,this.onRotationChange=new T.vpe}ngOnInit(){this.instance=new N.ZP(this),this.instance.on("change:center",s=>this.onCenterChange.emit(s)),this.instance.on("change:resolution",s=>this.onResolutionChange.emit(s)),this.instance.on("change:rotation",s=>this.onRotationChange.emit(s)),super.ngOnInit(),this.host.instance.setView(this.instance)}ngOnChanges(s){const{center:o,constrainResolution:t,maxZoom:e,minZoom:d,resolution:n,rotation:a,zoom:c}=s,i=(0,Z._T)(s,["center","constrainResolution","maxZoom","minZoom","resolution","rotation","zoom"]),u={};this.instance&&o&&(this.enableChangesAnimation?u.center=o.currentValue:this.instance.setCenter(o.currentValue)),this.instance&&t&&this.instance.setConstrainResolution(t.currentValue),this.instance&&e&&this.instance.setMaxZoom(e.currentValue),this.instance&&d&&this.instance.setMinZoom(d.currentValue),this.instance&&n&&(this.enableChangesAnimation?u.resolution=n.currentValue:this.instance.setResolution(n.currentValue)),this.instance&&a&&(this.enableChangesAnimation?u.rotation=a.currentValue:this.instance.setRotation(a.currentValue)),this.instance&&c&&(this.enableChangesAnimation?u.zoom=c.currentValue:this.instance.setZoom(c.currentValue)),super.ngOnChanges(i),this.enableChangesAnimation&&Object.keys(u).length>0&&this.instance.animate(u)}ngOnDestroy(){this.host.instance.setView(void 0)}}return L.\u0275fac=function(s){return new(s||L)(T.Y36(y.T))},L.\u0275cmp=T.Xpm({type:L,selectors:[["nol-view"]],inputs:{center:"center",constrainRotation:"constrainRotation",enableRotation:"enableRotation",extent:"extent",constrainOnlyCenter:"constrainOnlyCenter",smoothExtentConstraint:"smoothExtentConstraint",maxResolution:"maxResolution",minResolution:"minResolution",maxZoom:"maxZoom",minZoom:"minZoom",multiWorld:"multiWorld",constrainResolution:"constrainResolution",smoothResolutionConstraint:"smoothResolutionConstraint",showFullExtent:"showFullExtent",projection:"projection",resolution:"resolution",resolutions:"resolutions",rotation:"rotation",zoom:"zoom",zoomFactor:"zoomFactor",padding:"padding",enableChangesAnimation:"enableChangesAnimation"},outputs:{onCenterChange:"onCenterChange",onResolutionChange:"onResolutionChange",onRotationChange:"onRotationChange"},exportAs:["nolView"],features:[T.qOj,T.TTD],ngContentSelectors:I,decls:1,vars:0,template:function(s,o){1&s&&(T.F$t(),T.Hsn(0))},encapsulation:2,changeDetection:0}),L})()},1062:(_t,k,l)=>{"use strict";l.d(k,{e:()=>N});var Z=l(2031),T=l(2398);let N=(()=>{class O{}return O.\u0275fac=function(I){return new(I||O)},O.\u0275mod=T.oAB({type:O}),O.\u0275inj=T.cJS({imports:[Z.ez]}),O})()},4948:function(_t){_t.exports=function(){"use strict";function k(n,a,c,i,u){!function m(_,R,v,P,D){for(;P>v;){if(P-v>600){var w=P-v+1,G=R-v+1,V=Math.log(w),K=.5*Math.exp(2*V/3),B=.5*Math.sqrt(V*K*(w-K)/w)*(G-w/2<0?-1:1);m(_,R,Math.max(v,Math.floor(R-G*K/w+B)),Math.min(P,Math.floor(R+(w-G)*K/w+B)),D)}var f=_[R],M=v,U=P;for(l(_,v,R),D(_[P],f)>0&&l(_,v,P);M<U;){for(l(_,M,U),M++,U--;D(_[M],f)<0;)M++;for(;D(_[U],f)>0;)U--}0===D(_[v],f)?l(_,v,U):l(_,++U,P),U<=R&&(v=U+1),R<=U&&(P=U-1)}}(n,a,c||0,i||n.length-1,u||Z)}function l(n,a,c){var i=n[a];n[a]=n[c],n[c]=i}function Z(n,a){return n<a?-1:n>a?1:0}var T=function(n){void 0===n&&(n=9),this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function N(n,a,c){if(!c)return a.indexOf(n);for(var i=0;i<a.length;i++)if(c(n,a[i]))return i;return-1}function O(n,a){y(n,0,n.children.length,a,n)}function y(n,a,c,i,u){u||(u=e(null)),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0;for(var m=a;m<c;m++){var _=n.children[m];I(u,n.leaf?i(_):_)}return u}function I(n,a){return n.minX=Math.min(n.minX,a.minX),n.minY=Math.min(n.minY,a.minY),n.maxX=Math.max(n.maxX,a.maxX),n.maxY=Math.max(n.maxY,a.maxY),n}function C(n,a){return n.minX-a.minX}function L(n,a){return n.minY-a.minY}function p(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function s(n){return n.maxX-n.minX+(n.maxY-n.minY)}function o(n,a){return n.minX<=a.minX&&n.minY<=a.minY&&a.maxX<=n.maxX&&a.maxY<=n.maxY}function t(n,a){return a.minX<=n.maxX&&a.minY<=n.maxY&&a.maxX>=n.minX&&a.maxY>=n.minY}function e(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(n,a,c,i,u){for(var m=[a,c];m.length;)if(!((c=m.pop())-(a=m.pop())<=i)){var _=a+Math.ceil((c-a)/i/2)*i;k(n,_,a,c,u),m.push(a,_,_,c)}}return T.prototype.all=function(){return this._all(this.data,[])},T.prototype.search=function(n){var a=this.data,c=[];if(!t(n,a))return c;for(var i=this.toBBox,u=[];a;){for(var m=0;m<a.children.length;m++){var _=a.children[m],R=a.leaf?i(_):_;t(n,R)&&(a.leaf?c.push(_):o(n,R)?this._all(_,c):u.push(_))}a=u.pop()}return c},T.prototype.collides=function(n){var a=this.data;if(!t(n,a))return!1;for(var c=[];a;){for(var i=0;i<a.children.length;i++){var u=a.children[i],m=a.leaf?this.toBBox(u):u;if(t(n,m)){if(a.leaf||o(n,m))return!0;c.push(u)}}a=c.pop()}return!1},T.prototype.load=function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var a=0;a<n.length;a++)this.insert(n[a]);return this}var c=this._build(n.slice(),0,n.length-1,0);if(this.data.children.length)if(this.data.height===c.height)this._splitRoot(this.data,c);else{if(this.data.height<c.height){var i=this.data;this.data=c,c=i}this._insert(c,this.data.height-c.height-1,!0)}else this.data=c;return this},T.prototype.insert=function(n){return n&&this._insert(n,this.data.height-1),this},T.prototype.clear=function(){return this.data=e([]),this},T.prototype.remove=function(n,a){if(!n)return this;for(var c,i,u,m=this.data,_=this.toBBox(n),R=[],v=[];m||R.length;){if(m||(m=R.pop(),i=R[R.length-1],c=v.pop(),u=!0),m.leaf){var P=N(n,m.children,a);if(-1!==P)return m.children.splice(P,1),R.push(m),this._condense(R),this}u||m.leaf||!o(m,_)?i?(c++,m=i.children[c],u=!1):m=null:(R.push(m),v.push(c),c=0,i=m,m=m.children[0])}return this},T.prototype.toBBox=function(n){return n},T.prototype.compareMinX=function(n,a){return n.minX-a.minX},T.prototype.compareMinY=function(n,a){return n.minY-a.minY},T.prototype.toJSON=function(){return this.data},T.prototype.fromJSON=function(n){return this.data=n,this},T.prototype._all=function(n,a){for(var c=[];n;)n.leaf?a.push.apply(a,n.children):c.push.apply(c,n.children),n=c.pop();return a},T.prototype._build=function(n,a,c,i){var u,m=c-a+1,_=this._maxEntries;if(m<=_)return O(u=e(n.slice(a,c+1)),this.toBBox),u;i||(i=Math.ceil(Math.log(m)/Math.log(_)),_=Math.ceil(m/Math.pow(_,i-1))),(u=e([])).leaf=!1,u.height=i;var R=Math.ceil(m/_),v=R*Math.ceil(Math.sqrt(_));d(n,a,c,v,this.compareMinX);for(var P=a;P<=c;P+=v){var D=Math.min(P+v-1,c);d(n,P,D,R,this.compareMinY);for(var w=P;w<=D;w+=R){var G=Math.min(w+R-1,D);u.children.push(this._build(n,w,G,i-1))}}return O(u,this.toBBox),u},T.prototype._chooseSubtree=function(n,a,c,i){for(;i.push(a),!a.leaf&&i.length-1!==c;){for(var u=1/0,m=1/0,_=void 0,R=0;R<a.children.length;R++){var v=a.children[R],P=p(v),D=(w=n,G=v,(Math.max(G.maxX,w.maxX)-Math.min(G.minX,w.minX))*(Math.max(G.maxY,w.maxY)-Math.min(G.minY,w.minY))-P);D<m?(m=D,u=P<u?P:u,_=v):D===m&&P<u&&(u=P,_=v)}a=_||a.children[0]}var w,G;return a},T.prototype._insert=function(n,a,c){var i=c?n:this.toBBox(n),u=[],m=this._chooseSubtree(i,this.data,a,u);for(m.children.push(n),I(m,i);a>=0&&u[a].children.length>this._maxEntries;)this._split(u,a),a--;this._adjustParentBBoxes(i,u,a)},T.prototype._split=function(n,a){var c=n[a],i=c.children.length,u=this._minEntries;this._chooseSplitAxis(c,u,i);var m=this._chooseSplitIndex(c,u,i),_=e(c.children.splice(m,c.children.length-m));_.height=c.height,_.leaf=c.leaf,O(c,this.toBBox),O(_,this.toBBox),a?n[a-1].children.push(_):this._splitRoot(c,_)},T.prototype._splitRoot=function(n,a){this.data=e([n,a]),this.data.height=n.height+1,this.data.leaf=!1,O(this.data,this.toBBox)},T.prototype._chooseSplitIndex=function(n,a,c){for(var i,u,m,_,R,v,P,D=1/0,w=1/0,G=a;G<=c-a;G++){var V=y(n,0,G,this.toBBox),K=y(n,G,c,this.toBBox),B=(u=V,m=K,void 0,void 0,void 0,void 0,_=Math.max(u.minX,m.minX),R=Math.max(u.minY,m.minY),v=Math.min(u.maxX,m.maxX),P=Math.min(u.maxY,m.maxY),Math.max(0,v-_)*Math.max(0,P-R)),S=p(V)+p(K);B<D?(D=B,i=G,w=S<w?S:w):B===D&&S<w&&(w=S,i=G)}return i||c-a},T.prototype._chooseSplitAxis=function(n,a,c){var i=n.leaf?this.compareMinX:C,u=n.leaf?this.compareMinY:L;this._allDistMargin(n,a,c,i)<this._allDistMargin(n,a,c,u)&&n.children.sort(i)},T.prototype._allDistMargin=function(n,a,c,i){n.children.sort(i);for(var u=this.toBBox,m=y(n,0,a,u),_=y(n,c-a,c,u),R=s(m)+s(_),v=a;v<c-a;v++){var P=n.children[v];I(m,n.leaf?u(P):P),R+=s(m)}for(var D=c-a-1;D>=a;D--){var w=n.children[D];I(_,n.leaf?u(w):w),R+=s(_)}return R},T.prototype._adjustParentBBoxes=function(n,a,c){for(var i=c;i>=0;i--)I(a[i],n)},T.prototype._condense=function(n){for(var a=n.length-1,c=void 0;a>=0;a--)0===n[a].children.length?a>0?(c=n[a-1].children).splice(c.indexOf(n[a]),1):this.clear():O(n[a],this.toBBox)},T}()},8599:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>N});const Z={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class T extends Error{constructor(y){const I=Z[y];super(I),this.code=y,this.name="AssertionError",this.message=I}}const N=T},1092:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>L});var Z=l(8599),T=l(3314),N=l(6403),O=l(5390);class I extends O.ZP{constructor(s,o,t){super(s),this.element=o,this.index=t}}const L=class C extends T.Z{constructor(s,o){if(super(),this.unique_=!!(o=o||{}).unique,this.array_=s||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(s){for(let o=0,t=s.length;o<t;++o)this.push(s[o]);return this}forEach(s){const o=this.array_;for(let t=0,e=o.length;t<e;++t)s(o[t],t,o)}getArray(){return this.array_}item(s){return this.array_[s]}getLength(){return this.get("length")}insertAt(s,o){if(s<0||s>this.getLength())throw new Error("Index out of bounds: "+s);this.unique_&&this.assertUnique_(o),this.array_.splice(s,0,o),this.updateLength_(),this.dispatchEvent(new I(N.Z.ADD,o,s))}pop(){return this.removeAt(this.getLength()-1)}push(s){this.unique_&&this.assertUnique_(s);const o=this.getLength();return this.insertAt(o,s),this.getLength()}remove(s){const o=this.array_;for(let t=0,e=o.length;t<e;++t)if(o[t]===s)return this.removeAt(t)}removeAt(s){if(s<0||s>=this.getLength())return;const o=this.array_[s];return this.array_.splice(s,1),this.updateLength_(),this.dispatchEvent(new I(N.Z.REMOVE,o,s)),o}setAt(s,o){if(s>=this.getLength())return void this.insertAt(s,o);if(s<0)throw new Error("Index out of bounds: "+s);this.unique_&&this.assertUnique_(o,s);const e=this.array_[s];this.array_[s]=o,this.dispatchEvent(new I(N.Z.REMOVE,e,s)),this.dispatchEvent(new I(N.Z.ADD,o,s))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(s,o){for(let t=0,e=this.array_.length;t<e;++t)if(this.array_[t]===s&&t!==o)throw new Z.Z(58)}}},6403:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={ADD:"add",REMOVE:"remove"}},5783:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>T});const T=class Z{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},2816:(_t,k,l)=>{"use strict";l.d(k,{K:()=>y});var Z=l(8501),T=l(4544),N=l(1074);function y(C,L,p){const s=C;let o=!0,t=!1,e=!1;const d=[(0,N.Vx)(s,Z.Z.LOAD,function(){e=!0,t||L()})];return s.src&&T.Tp?(t=!0,s.decode().then(function(){o&&L()}).catch(function(n){o&&(e?L():p())})):d.push((0,N.Vx)(s,Z.Z.ERROR,p)),function(){o=!1,d.forEach(N.bN)}}},1915:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},6029:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>C});var Z=l(1962),T=l(2763),N=l(6694),O=l(2816);const C=class y extends Z.Z{constructor(p,s,o,t,e,d){super(p,s,d),this.crossOrigin_=t,this.src_=o,this.key=o,this.image_=new Image,null!==t&&(this.image_.crossOrigin=t),this.unlisten_=null,this.tileLoadFunction_=e}getImage(){return this.image_}setImage(p){this.image_=p,this.state=T.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=T.Z.ERROR,this.unlistenImage_(),this.image_=function I(){const L=(0,N.E4)(1,1);return L.fillStyle="rgba(0,0,0,0)",L.fillRect(0,0,1,1),L.canvas}(),this.changed()}handleImageLoad_(){const p=this.image_;this.state=p.naturalWidth&&p.naturalHeight?T.Z.LOADED:T.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==T.Z.ERROR&&(this.state=T.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==T.Z.IDLE&&(this.state=T.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,O.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},4933:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},3314:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>L});var Z=l(5390),T=l(8331),N=l(2742),O=l(1540),y=l(5230);class I extends Z.ZP{constructor(s,o,t){super(s),this.key=o,this.oldValue=t}}const L=class C extends N.Z{constructor(s){super(),(0,O.sq)(this),this.values_=null,void 0!==s&&this.setProperties(s)}get(s){let o;return this.values_&&this.values_.hasOwnProperty(s)&&(o=this.values_[s]),o}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(s,o){let t;t=`change:${s}`,this.hasListener(t)&&this.dispatchEvent(new I(t,s,o)),t=T.Z.PROPERTYCHANGE,this.hasListener(t)&&this.dispatchEvent(new I(t,s,o))}addChangeListener(s,o){this.addEventListener(`change:${s}`,o)}removeChangeListener(s,o){this.removeEventListener(`change:${s}`,o)}set(s,o,t){const e=this.values_||(this.values_={});if(t)e[s]=o;else{const d=e[s];e[s]=o,d!==o&&this.notify(s,d)}}setProperties(s,o){for(const t in s)this.set(t,s[t],o)}applyProperties(s){!s.values_||Object.assign(this.values_||(this.values_={}),s.values_)}unset(s,o){if(this.values_&&s in this.values_){const t=this.values_[s];delete this.values_[s],(0,y.x)(this.values_)&&(this.values_=null),o||this.notify(s,t)}}}},8331:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={PROPERTYCHANGE:"propertychange"}},2742:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>I});var Z=l(170),T=l(8501),N=l(1074);const I=class O extends Z.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(T.Z.CHANGE)}getRevision(){return this.revision_}onInternal(L,p){if(Array.isArray(L)){const s=L.length,o=new Array(s);for(let t=0;t<s;++t)o[t]=(0,N.oL)(this,L[t],p);return o}return(0,N.oL)(this,L,p)}onceInternal(L,p){let s;if(Array.isArray(L)){const o=L.length;s=new Array(o);for(let t=0;t<o;++t)s[t]=(0,N.Vx)(this,L[t],p)}else s=(0,N.Vx)(this,L,p);return p.ol_key=s,s}unInternal(L,p){const s=p.ol_key;if(s)!function y(C){if(Array.isArray(C))for(let L=0,p=C.length;L<p;++L)(0,N.bN)(C[L]);else(0,N.bN)(C)}(s);else if(Array.isArray(L))for(let o=0,t=L.length;o<t;++o)this.removeEventListener(L[o],p);else this.removeEventListener(L,p)}}},1962:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>C});var Z=l(170),T=l(8501),N=l(2763),O=l(1540),y=l(2502);const C=class I extends Z.Z{constructor(p,s,o){super(),o=o||{},this.tileCoord=p,this.state=s,this.interimTile=null,this.key="",this.transition_=void 0===o.transition?250:o.transition,this.transitionStarts_={},this.interpolate=!!o.interpolate}changed(){this.dispatchEvent(T.Z.CHANGE)}release(){this.state===N.Z.ERROR&&this.setState(N.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let p=this.interimTile;do{if(p.getState()==N.Z.LOADED)return this.transition_=0,p;p=p.interimTile}while(p);return this}refreshInterimChain(){if(!this.interimTile)return;let p=this.interimTile,s=this;do{if(p.getState()==N.Z.LOADED){p.interimTile=null;break}p.getState()==N.Z.LOADING?s=p:p.getState()==N.Z.IDLE?s.interimTile=p.interimTile:s=p,p=s.interimTile}while(p)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(p){if(this.state!==N.Z.ERROR&&this.state>p)throw new Error("Tile load sequence violation");this.state=p,this.changed()}load(){(0,O.O3)()}getAlpha(p,s){if(!this.transition_)return 1;let o=this.transitionStarts_[p];if(o){if(-1===o)return 1}else o=s,this.transitionStarts_[p]=o;const t=s-o+1e3/60;return t>=this.transition_?1:(0,y.YQ)(t/this.transition_)}inTransition(p){return!!this.transition_&&-1!==this.transitionStarts_[p]}endTransition(p){this.transition_&&(this.transitionStarts_[p]=-1)}}},7459:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>O});var Z=l(5029),T=l(5435);const O=class N extends Z.Z{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(I){for(;this.canExpireCache()&&!(this.peekLast().getKey()in I);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const I=this.peekFirstKey(),L=(0,T.Ul)(I)[0];this.forEach(function(p){p.tileCoord[0]!==L&&(this.remove((0,T.km)(p.tileCoord)),p.release())}.bind(this))}}},9039:(_t,k,l)=>{"use strict";l.d(k,{T:()=>T,Z:()=>N});class Z{constructor(y,I,C,L){this.minX=y,this.maxX=I,this.minY=C,this.maxY=L}contains(y){return this.containsXY(y[1],y[2])}containsTileRange(y){return this.minX<=y.minX&&y.maxX<=this.maxX&&this.minY<=y.minY&&y.maxY<=this.maxY}containsXY(y,I){return this.minX<=y&&y<=this.maxX&&this.minY<=I&&I<=this.maxY}equals(y){return this.minX==y.minX&&this.minY==y.minY&&this.maxX==y.maxX&&this.maxY==y.maxY}extend(y){y.minX<this.minX&&(this.minX=y.minX),y.maxX>this.maxX&&(this.maxX=y.maxX),y.minY<this.minY&&(this.minY=y.minY),y.maxY>this.maxY&&(this.maxY=y.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(y){return this.minX<=y.maxX&&this.maxX>=y.minX&&this.minY<=y.maxY&&this.maxY>=y.minY}}function T(O,y,I,C,L){return void 0!==L?(L.minX=O,L.maxX=y,L.minY=I,L.maxY=C,L):new Z(O,y,I,C)}const N=Z},2763:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8259:(_t,k,l)=>{"use strict";l.d(k,{ZP:()=>B});var Z=l(3314),T=l(4361);const N={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var O=l(9938),y=l(7942),I=l(5995),C=l(9611),L=l(9772),p=l(1775);function s(S,g,f){return function(M,U,W,q,$){if(!M)return;if(!U&&!g)return M;const z=g?0:W[0]*U,at=g?0:W[1]*U,J=$?$[0]:0,it=$?$[1]:0;let et=S[0]+z/2+J,lt=S[2]-z/2+J,ct=S[1]+at/2+it,Rt=S[3]-at/2+it;et>lt&&(et=(lt+et)/2,lt=et),ct>Rt&&(ct=(Rt+ct)/2,Rt=ct);let Tt=(0,p.uZ)(M[0],et,lt),Lt=(0,p.uZ)(M[1],ct,Rt);if(q&&f&&U){const St=30*U;Tt+=-St*Math.log(1+Math.max(0,et-M[0])/St)+St*Math.log(1+Math.max(0,M[0]-lt)/St),Lt+=-St*Math.log(1+Math.max(0,ct-M[1])/St)+St*Math.log(1+Math.max(0,M[1]-Rt)/St)}return[Tt,Lt]}}function o(S){return S}var t=l(1063),e=l(9351);function d(S,g,f,M){const U=(0,t.dz)(g)/f[0],W=(0,t.Cr)(g)/f[1];return M?Math.min(S,Math.max(U,W)):Math.min(S,Math.min(U,W))}function n(S,g,f){let M=Math.min(S,g);return M*=Math.log(1+50*Math.max(0,S/g-1))/50+1,f&&(M=Math.max(M,f),M/=Math.log(1+50*Math.max(0,f/S-1))/50+1),(0,p.uZ)(M,f/2,2*g)}function i(S,g,f,M,U){return f=void 0===f||f,function(W,q,$,z){if(void 0!==W){const at=M?d(S,M,$,U):S;return f&&z?n(W,at,g):(0,p.uZ)(W,g,at)}}}var u=l(9194),m=l(2502),_=l(5340);function P(S,g){setTimeout(function(){S(g)},0)}function K(S,g,f,M,U){const W=Math.cos(-U);let q=Math.sin(-U),$=S[0]*W-S[1]*q,z=S[1]*W+S[0]*q;return $+=(g[0]/2-f[0])*M,z+=(f[1]-g[1]/2)*M,q=-q,[$*W-z*q,z*W+$*q]}const B=class v extends Z.Z{constructor(g){super(),g=Object.assign({},g),this.hints_=[0,0],this.animations_=[],this.projection_=(0,y.UQ)(g.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,g.projection&&(0,y.h_)(),g.center&&(g.center=(0,y.Vs)(g.center,this.projection_)),g.extent&&(g.extent=(0,y.dY)(g.extent,this.projection_)),this.applyOptions_(g)}applyOptions_(g){const f=Object.assign({},g);for(const $ in N)delete f[$];this.setProperties(f,!0);const M=function w(S){let g,f,M,q=void 0!==S.minZoom?S.minZoom:0,$=void 0!==S.maxZoom?S.maxZoom:28;const z=void 0!==S.zoomFactor?S.zoomFactor:2,at=void 0!==S.multiWorld&&S.multiWorld,J=void 0===S.smoothResolutionConstraint||S.smoothResolutionConstraint,it=void 0!==S.showFullExtent&&S.showFullExtent,et=(0,y.UQ)(S.projection,"EPSG:3857"),lt=et.getExtent();let ct=S.constrainOnlyCenter,Rt=S.extent;if(!at&&!Rt&&et.isGlobal()&&(ct=!1,Rt=lt),void 0!==S.resolutions){const Tt=S.resolutions;f=Tt[q],M=void 0!==Tt[$]?Tt[$]:Tt[Tt.length-1],g=S.constrainResolution?function a(S,g,f,M){return g=void 0===g||g,function(U,W,q,$){if(void 0!==U){const z=S[0],at=S[S.length-1],J=f?d(z,f,q,M):z;if($)return g?n(U,J,at):(0,p.uZ)(U,at,J);const it=Math.min(J,U),et=Math.floor((0,e.h7)(S,it,W));return S[et]>J&&et<S.length-1?S[et+1]:S[et]}}}(Tt,J,!ct&&Rt,it):i(f,M,J,!ct&&Rt,it)}else{const Lt=(lt?Math.max((0,t.dz)(lt),(0,t.Cr)(lt)):360*y.Wm.degrees/et.getMetersPerUnit())/O.S/Math.pow(2,0),St=Lt/Math.pow(2,28);f=S.maxResolution,void 0!==f?q=0:f=Lt/Math.pow(z,q),M=S.minResolution,void 0===M&&(M=void 0!==S.maxZoom?void 0!==S.maxResolution?f/Math.pow(z,$):Lt/Math.pow(z,$):St),$=q+Math.floor(Math.log(f/M)/Math.log(z)),M=f/Math.pow(z,$-q),g=S.constrainResolution?function c(S,g,f,M,U,W){return M=void 0===M||M,f=void 0!==f?f:0,function(q,$,z,at){if(void 0!==q){const J=U?d(g,U,z,W):g;if(at)return M?n(q,J,f):(0,p.uZ)(q,f,J);const it=1e-9,et=Math.ceil(Math.log(g/J)/Math.log(S)-it),lt=-$*(.5-it)+.5,ct=Math.min(J,q),Rt=Math.floor(Math.log(g/ct)/Math.log(S)+lt),Tt=Math.max(et,Rt),Lt=g/Math.pow(S,Tt);return(0,p.uZ)(Lt,f,J)}}}(z,f,M,J,!ct&&Rt,it):i(f,M,J,!ct&&Rt,it)}return{constraint:g,maxResolution:f,minResolution:M,minZoom:q,zoomFactor:z}}(g);this.maxResolution_=M.maxResolution,this.minResolution_=M.minResolution,this.zoomFactor_=M.zoomFactor,this.resolutions_=g.resolutions,this.padding_=g.padding,this.minZoom_=M.minZoom;const U=function D(S){if(void 0!==S.extent)return s(S.extent,S.constrainOnlyCenter,void 0===S.smoothExtentConstraint||S.smoothExtentConstraint);const g=(0,y.UQ)(S.projection,"EPSG:3857");if(!0!==S.multiWorld&&g.isGlobal()){const f=g.getExtent().slice();return f[0]=-1/0,f[2]=1/0,s(f,!1,!1)}return o}(g),W=M.constraint,q=function G(S){if(void 0===S.enableRotation||S.enableRotation){const f=S.constrainRotation;return void 0===f||!0===f?(0,u.Gw)():!1===f?u.YP:"number"==typeof f?(0,u.gE)(f):u.YP}return u.h$}(g);this.constraints_={center:U,resolution:W,rotation:q},this.setRotation(void 0!==g.rotation?g.rotation:0),this.setCenterInternal(void 0!==g.center?g.center:null),void 0!==g.resolution?this.setResolution(g.resolution):void 0!==g.zoom&&this.setZoom(g.zoom)}get padding(){return this.padding_}set padding(g){let f=this.padding_;this.padding_=g;const M=this.getCenter();if(M){const U=g||[0,0,0,0];f=f||[0,0,0,0];const W=this.getResolution();this.setCenterInternal([M[0]+W/2*(U[3]-f[3]+f[1]-U[1]),M[1]-W/2*(U[0]-f[0]+f[2]-U[2])])}}getUpdatedOptions_(g){const f=this.getProperties();return void 0!==f.resolution?f.resolution=this.getResolution():f.zoom=this.getZoom(),f.center=this.getCenterInternal(),f.rotation=this.getRotation(),Object.assign({},f,g)}animate(g){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const f=new Array(arguments.length);for(let M=0;M<f.length;++M){let U=arguments[M];U.center&&(U=Object.assign({},U),U.center=(0,y.Vs)(U.center,this.getProjection())),U.anchor&&(U=Object.assign({},U),U.anchor=(0,y.Vs)(U.anchor,this.getProjection())),f[M]=U}this.animateInternal.apply(this,f)}animateInternal(g){let M,f=arguments.length;f>1&&"function"==typeof arguments[f-1]&&(M=arguments[f-1],--f);let U=0;for(;U<f&&!this.isDef();++U){const J=arguments[U];J.center&&this.setCenterInternal(J.center),void 0!==J.zoom?this.setZoom(J.zoom):J.resolution&&this.setResolution(J.resolution),void 0!==J.rotation&&this.setRotation(J.rotation)}if(U===f)return void(M&&P(M,!0));let W=Date.now(),q=this.targetCenter_.slice(),$=this.targetResolution_,z=this.targetRotation_;const at=[];for(;U<f;++U){const J=arguments[U],it={start:W,complete:!1,anchor:J.anchor,duration:void 0!==J.duration?J.duration:1e3,easing:J.easing||m.rd,callback:M};if(J.center&&(it.sourceCenter=q,it.targetCenter=J.center.slice(),q=it.targetCenter),void 0!==J.zoom?(it.sourceResolution=$,it.targetResolution=this.getResolutionForZoom(J.zoom),$=it.targetResolution):J.resolution&&(it.sourceResolution=$,it.targetResolution=J.resolution,$=it.targetResolution),void 0!==J.rotation){it.sourceRotation=z;const et=(0,p.$W)(J.rotation-z+Math.PI,2*Math.PI)-Math.PI;it.targetRotation=z+et,z=it.targetRotation}(S=it).sourceCenter&&S.targetCenter&&!(0,C.fS)(S.sourceCenter,S.targetCenter)||S.sourceResolution!==S.targetResolution||S.sourceRotation!==S.targetRotation?W+=it.duration:it.complete=!0,at.push(it)}var S;this.animations_.push(at),this.setHint(T.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[T.Z.ANIMATING]>0}getInteracting(){return this.hints_[T.Z.INTERACTING]>0}cancelAnimations(){let g;this.setHint(T.Z.ANIMATING,-this.hints_[T.Z.ANIMATING]);for(let f=0,M=this.animations_.length;f<M;++f){const U=this.animations_[f];if(U[0].callback&&P(U[0].callback,!1),!g)for(let W=0,q=U.length;W<q;++W){const $=U[W];if(!$.complete){g=$.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=g,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const g=Date.now();let f=!1;for(let M=this.animations_.length-1;M>=0;--M){const U=this.animations_[M];let W=!0;for(let q=0,$=U.length;q<$;++q){const z=U[q];if(z.complete)continue;const at=g-z.start;let J=z.duration>0?at/z.duration:1;J>=1?(z.complete=!0,J=1):W=!1;const it=z.easing(J);if(z.sourceCenter){const et=z.sourceCenter[0],lt=z.sourceCenter[1],ct=z.targetCenter[0],Rt=z.targetCenter[1];this.nextCenter_=z.targetCenter,this.targetCenter_=[et+it*(ct-et),lt+it*(Rt-lt)]}if(z.sourceResolution&&z.targetResolution){const et=1===it?z.targetResolution:z.sourceResolution+it*(z.targetResolution-z.sourceResolution);if(z.anchor){const lt=this.getViewportSize_(this.getRotation()),ct=this.constraints_.resolution(et,0,lt,!0);this.targetCenter_=this.calculateCenterZoom(ct,z.anchor)}this.nextResolution_=z.targetResolution,this.targetResolution_=et,this.applyTargetState_(!0)}if(void 0!==z.sourceRotation&&void 0!==z.targetRotation){const et=1===it?(0,p.$W)(z.targetRotation+Math.PI,2*Math.PI)-Math.PI:z.sourceRotation+it*(z.targetRotation-z.sourceRotation);if(z.anchor){const lt=this.constraints_.rotation(et,!0);this.targetCenter_=this.calculateCenterRotate(lt,z.anchor)}this.nextRotation_=z.targetRotation,this.targetRotation_=et}if(this.applyTargetState_(!0),f=!0,!z.complete)break}if(W){this.animations_[M]=null,this.setHint(T.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const q=U[0].callback;q&&P(q,!0)}}this.animations_=this.animations_.filter(Boolean),f&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(g,f){let M;const U=this.getCenterInternal();return void 0!==U&&(M=[U[0]-f[0],U[1]-f[1]],(0,C.U1)(M,g-this.getRotation()),(0,C.IH)(M,f)),M}calculateCenterZoom(g,f){let M;const U=this.getCenterInternal(),W=this.getResolution();return void 0!==U&&void 0!==W&&(M=[f[0]-g*(f[0]-U[0])/W,f[1]-g*(f[1]-U[1])/W]),M}getViewportSize_(g){const f=this.viewportSize_;if(g){const M=f[0],U=f[1];return[Math.abs(M*Math.cos(g))+Math.abs(U*Math.sin(g)),Math.abs(M*Math.sin(g))+Math.abs(U*Math.cos(g))]}return f}setViewportSize(g){this.viewportSize_=Array.isArray(g)?g.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const g=this.getCenterInternal();return g&&(0,y.lO)(g,this.getProjection())}getCenterInternal(){return this.get(N.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(g){return void 0!==g?(g[0]=this.hints_[0],g[1]=this.hints_[1],g):this.hints_.slice()}calculateExtent(g){const f=this.calculateExtentInternal(g);return(0,y.Fj)(f,this.getProjection())}calculateExtentInternal(g){g=g||this.getViewportSizeMinusPadding_();const f=this.getCenterInternal();(0,L.h)(f,1);const M=this.getResolution();(0,L.h)(void 0!==M,2);const U=this.getRotation();return(0,L.h)(void 0!==U,3),(0,t.p8)(f,M,U,g)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(g){this.applyOptions_(this.getUpdatedOptions_({maxZoom:g}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(g){this.applyOptions_(this.getUpdatedOptions_({minZoom:g}))}setConstrainResolution(g){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:g}))}getProjection(){return this.projection_}getResolution(){return this.get(N.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(g,f){return this.getResolutionForExtentInternal((0,y.dY)(g,this.getProjection()),f)}getResolutionForExtentInternal(g,f){f=f||this.getViewportSizeMinusPadding_();const M=(0,t.dz)(g)/f[0],U=(0,t.Cr)(g)/f[1];return Math.max(M,U)}getResolutionForValueFunction(g){g=g||2;const f=this.getConstrainedResolution(this.maxResolution_),U=Math.log(f/this.minResolution_)/Math.log(g);return function(W){return f/Math.pow(g,W*U)}}getRotation(){return this.get(N.ROTATION)}getValueForResolutionFunction(g){const f=Math.log(g||2),M=this.getConstrainedResolution(this.maxResolution_),W=Math.log(M/this.minResolution_)/f;return function(q){return Math.log(M/q)/f/W}}getViewportSizeMinusPadding_(g){let f=this.getViewportSize_(g);const M=this.padding_;return M&&(f=[f[0]-M[1]-M[3],f[1]-M[0]-M[2]]),f}getState(){const g=this.getProjection(),f=this.getResolution(),M=this.getRotation();let U=this.getCenterInternal();const W=this.padding_;if(W){const q=this.getViewportSizeMinusPadding_();U=K(U,this.getViewportSize_(),[q[0]/2+W[3],q[1]/2+W[0]],f,M)}return{center:U.slice(0),projection:void 0!==g?g:null,resolution:f,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:M,zoom:this.getZoom()}}getZoom(){let g;const f=this.getResolution();return void 0!==f&&(g=this.getZoomForResolution(f)),g}getZoomForResolution(g){let M,U,f=this.minZoom_||0;if(this.resolutions_){const W=(0,e.h7)(this.resolutions_,g,1);f=W,M=this.resolutions_[W],U=W==this.resolutions_.length-1?2:M/this.resolutions_[W+1]}else M=this.maxResolution_,U=this.zoomFactor_;return f+Math.log(M/g)/Math.log(U)}getResolutionForZoom(g){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const f=(0,p.uZ)(Math.floor(g),0,this.resolutions_.length-2);return this.resolutions_[f]/Math.pow(this.resolutions_[f]/this.resolutions_[f+1],(0,p.uZ)(g-f,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,g-this.minZoom_)}fit(g,f){let M;if((0,L.h)(Array.isArray(g)||"function"==typeof g.getSimplifiedGeometry,24),Array.isArray(g)){(0,L.h)(!(0,t.xb)(g),25);const U=(0,y.dY)(g,this.getProjection());M=(0,_.oJ)(U)}else if("Circle"===g.getType()){const U=(0,y.dY)(g.getExtent(),this.getProjection());M=(0,_.oJ)(U),M.rotate(this.getRotation(),(0,t.qg)(U))}else{const U=(0,y.Cs)();M=U?g.clone().transform(U,this.getProjection()):g}this.fitInternal(M,f)}rotatedExtentForGeometry(g){const f=this.getRotation(),M=Math.cos(f),U=Math.sin(-f),W=g.getFlatCoordinates(),q=g.getStride();let $=1/0,z=1/0,at=-1/0,J=-1/0;for(let it=0,et=W.length;it<et;it+=q){const lt=W[it]*M-W[it+1]*U,ct=W[it]*U+W[it+1]*M;$=Math.min($,lt),z=Math.min(z,ct),at=Math.max(at,lt),J=Math.max(J,ct)}return[$,z,at,J]}fitInternal(g,f){let M=(f=f||{}).size;M||(M=this.getViewportSizeMinusPadding_());const U=void 0!==f.padding?f.padding:[0,0,0,0],W=void 0!==f.nearest&&f.nearest;let q;q=void 0!==f.minResolution?f.minResolution:void 0!==f.maxZoom?this.getResolutionForZoom(f.maxZoom):0;const $=this.rotatedExtentForGeometry(g);let z=this.getResolutionForExtentInternal($,[M[0]-U[1]-U[3],M[1]-U[0]-U[2]]);z=isNaN(z)?q:Math.max(z,q),z=this.getConstrainedResolution(z,W?0:1);const at=this.getRotation(),J=Math.sin(at),it=Math.cos(at),et=(0,t.qg)($);et[0]+=(U[1]-U[3])/2*z,et[1]+=(U[0]-U[2])/2*z;const Rt=this.getConstrainedCenter([et[0]*it-et[1]*J,et[1]*it+et[0]*J],z),Tt=f.callback?f.callback:I.Zn;void 0!==f.duration?this.animateInternal({resolution:z,center:Rt,duration:f.duration,easing:f.easing},Tt):(this.targetResolution_=z,this.targetCenter_=Rt,this.applyTargetState_(!1,!0),P(Tt,!0))}centerOn(g,f,M){this.centerOnInternal((0,y.Vs)(g,this.getProjection()),f,M)}centerOnInternal(g,f,M){this.setCenterInternal(K(g,f,M,this.getResolution(),this.getRotation()))}calculateCenterShift(g,f,M,U){let W;const q=this.padding_;if(q&&g){const $=this.getViewportSizeMinusPadding_(-M),z=K(g,U,[$[0]/2+q[3],$[1]/2+q[0]],f,M);W=[g[0]-z[0],g[1]-z[1]]}return W}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(g){const f=(0,y.lO)(this.targetCenter_,this.getProjection());this.setCenter([f[0]+g[0],f[1]+g[1]])}adjustCenterInternal(g){const f=this.targetCenter_;this.setCenterInternal([f[0]+g[0],f[1]+g[1]])}adjustResolution(g,f){f=f&&(0,y.Vs)(f,this.getProjection()),this.adjustResolutionInternal(g,f)}adjustResolutionInternal(g,f){const M=this.getAnimating()||this.getInteracting(),U=this.getViewportSize_(this.getRotation()),W=this.constraints_.resolution(this.targetResolution_*g,0,U,M);f&&(this.targetCenter_=this.calculateCenterZoom(W,f)),this.targetResolution_*=g,this.applyTargetState_()}adjustZoom(g,f){this.adjustResolution(Math.pow(this.zoomFactor_,-g),f)}adjustRotation(g,f){f&&(f=(0,y.Vs)(f,this.getProjection())),this.adjustRotationInternal(g,f)}adjustRotationInternal(g,f){const M=this.getAnimating()||this.getInteracting(),U=this.constraints_.rotation(this.targetRotation_+g,M);f&&(this.targetCenter_=this.calculateCenterRotate(U,f)),this.targetRotation_+=g,this.applyTargetState_()}setCenter(g){this.setCenterInternal(g&&(0,y.Vs)(g,this.getProjection()))}setCenterInternal(g){this.targetCenter_=g,this.applyTargetState_()}setHint(g,f){return this.hints_[g]+=f,this.changed(),this.hints_[g]}setResolution(g){this.targetResolution_=g,this.applyTargetState_()}setRotation(g){this.targetRotation_=g,this.applyTargetState_()}setZoom(g){this.setResolution(this.getResolutionForZoom(g))}applyTargetState_(g,f){const M=this.getAnimating()||this.getInteracting()||f,U=this.constraints_.rotation(this.targetRotation_,M),W=this.getViewportSize_(U),q=this.constraints_.resolution(this.targetResolution_,0,W,M),$=this.constraints_.center(this.targetCenter_,q,W,M,this.calculateCenterShift(this.targetCenter_,q,U,W));this.get(N.ROTATION)!==U&&this.set(N.ROTATION,U),this.get(N.RESOLUTION)!==q&&(this.set(N.RESOLUTION,q),this.set("zoom",this.getZoom(),!0)),(!$||!this.get(N.CENTER)||!(0,C.fS)(this.get(N.CENTER),$))&&this.set(N.CENTER,$),this.getAnimating()&&!g&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(g,f,M){g=void 0!==g?g:200;const U=f||0,W=this.constraints_.rotation(this.targetRotation_),q=this.getViewportSize_(W),$=this.constraints_.resolution(this.targetResolution_,U,q),z=this.constraints_.center(this.targetCenter_,$,q,!1,this.calculateCenterShift(this.targetCenter_,$,W,q));if(0===g&&!this.cancelAnchor_)return this.targetResolution_=$,this.targetRotation_=W,this.targetCenter_=z,void this.applyTargetState_();M=M||(0===g?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==$||this.getRotation()!==W||!this.getCenterInternal()||!(0,C.fS)(this.getCenterInternal(),z))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:W,center:z,resolution:$,duration:g,easing:m.Vv,anchor:M}))}beginInteraction(){this.resolveConstraints(0),this.setHint(T.Z.INTERACTING,1)}endInteraction(g,f,M){M=M&&(0,y.Vs)(M,this.getProjection()),this.endInteractionInternal(g,f,M)}endInteractionInternal(g,f,M){this.setHint(T.Z.INTERACTING,-1),this.resolveConstraints(g,f,M)}getConstrainedCenter(g,f){const M=this.getViewportSize_(this.getRotation());return this.constraints_.center(g,f||this.getResolution(),M)}getConstrainedZoom(g,f){const M=this.getResolutionForZoom(g);return this.getZoomForResolution(this.getConstrainedResolution(M,f))}getConstrainedResolution(g,f){f=f||0;const M=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(g,f,M)}}},4361:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={ANIMATING:0,INTERACTING:1}},9351:(_t,k,l)=>{"use strict";function Z(s,o,t){let e,d;t=t||T;let n=0,a=s.length,c=!1;for(;n<a;)e=n+(a-n>>1),d=+t(s[e],o),d<0?n=e+1:(a=e,c=!d);return c?n:~n}function T(s,o){return s>o?1:s<o?-1:0}function N(s,o,t){const e=s.length;if(s[0]<=o)return 0;if(o<=s[e-1])return e-1;{let d;if(t>0){for(d=1;d<e;++d)if(s[d]<o)return d-1}else if(t<0){for(d=1;d<e;++d)if(s[d]<=o)return d}else for(d=1;d<e;++d){if(s[d]==o)return d;if(s[d]<o)return"function"==typeof t?t(o,s[d-1],s[d])>0?d-1:d:s[d-1]-o<o-s[d]?d-1:d}return e-1}}function O(s,o,t){for(;o<t;){const e=s[o];s[o]=s[t],s[t]=e,++o,--t}}function y(s,o){const t=Array.isArray(o)?o:[o],e=t.length;for(let d=0;d<e;d++)s[s.length]=t[d]}function C(s,o){const t=s.length;if(t!==o.length)return!1;for(let e=0;e<t;e++)if(s[e]!==o[e])return!1;return!0}function p(s,o,t){const e=o||T;return s.every(function(d,n){if(0===n)return!0;const a=e(s[n-1],d);return!(a>0||t&&0===a)})}l.d(k,{FZ:()=>O,fS:()=>C,h7:()=>N,kK:()=>T,l7:()=>y,pT:()=>p,ry:()=>Z})},9772:(_t,k,l)=>{"use strict";l.d(k,{h:()=>T});var Z=l(8599);function T(N,O){if(!N)throw new Z.Z(O)}},9861:(_t,k,l)=>{"use strict";l.d(k,{BB:()=>o,XC:()=>y,_2:()=>L,e1:()=>t,mL:()=>C});var Z=l(9772),T=l(1775);const N=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,O=/^([a-z]*)$|^hsla?\(.*\)$/i;function y(e){return"string"==typeof e?e:o(e)}function I(e){const d=document.createElement("div");if(d.style.color=e,""!==d.style.color){document.body.appendChild(d);const n=getComputedStyle(d).color;return document.body.removeChild(d),n}return""}const C=function(){const d={};let n=0;return function(a){let c;if(d.hasOwnProperty(a))c=d[a];else{if(n>=1024){let i=0;for(const u in d)0==(3&i++)&&(delete d[u],--n)}c=function p(e){let d,n,a,c,i;if(O.exec(e)&&(e=I(e)),N.exec(e)){const u=e.length-1;let m;m=u<=4?1:2;const _=4===u||8===u;d=parseInt(e.substr(1+0*m,m),16),n=parseInt(e.substr(1+1*m,m),16),a=parseInt(e.substr(1+2*m,m),16),c=_?parseInt(e.substr(1+3*m,m),16):255,1==m&&(d=(d<<4)+d,n=(n<<4)+n,a=(a<<4)+a,_&&(c=(c<<4)+c)),i=[d,n,a,c/255]}else e.startsWith("rgba(")?(i=e.slice(5,-1).split(",").map(Number),s(i)):e.startsWith("rgb(")?(i=e.slice(4,-1).split(",").map(Number),i.push(1),s(i)):(0,Z.h)(!1,14);return i}(a),d[a]=c,++n}return c}}();function L(e){return Array.isArray(e)?e:C(e)}function s(e){return e[0]=(0,T.uZ)(e[0]+.5|0,0,255),e[1]=(0,T.uZ)(e[1]+.5|0,0,255),e[2]=(0,T.uZ)(e[2]+.5|0,0,255),e[3]=(0,T.uZ)(e[3],0,1),e}function o(e){let d=e[0];d!=(0|d)&&(d=d+.5|0);let n=e[1];n!=(0|n)&&(n=n+.5|0);let a=e[2];return a!=(0|a)&&(a=a+.5|0),"rgba("+d+","+n+","+a+","+(void 0===e[3]?1:Math.round(100*e[3])/100)+")"}function t(e){return O.test(e)&&(e=I(e)),N.test(e)||e.startsWith("rgba(")||e.startsWith("rgb(")}},7877:(_t,k,l)=>{"use strict";l.d(k,{y:()=>T});var Z=l(9861);function T(N){return Array.isArray(N)?(0,Z.BB)(N):N}},359:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>L});var Z=l(3994),T=l(8501),N=l(1193),O=l(9351),y=l(8594),I=l(6694);const L=class C extends Z.Z{constructor(s){s=s||{},super({element:document.createElement("div"),render:s.render,target:s.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===s.collapsed||s.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==s.collapsible,this.collapsible_=void 0===s.collapsible||s.collapsible,this.collapsible_||(this.collapsed_=!1);const o=void 0!==s.className?s.className:"ol-attribution",t=void 0!==s.tipLabel?s.tipLabel:"Attributions",e=void 0!==s.expandClassName?s.expandClassName:o+"-expand",d=void 0!==s.collapseLabel?s.collapseLabel:"\u203a",n=void 0!==s.collapseClassName?s.collapseClassName:o+"-collapse";"string"==typeof d?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=d,this.collapseLabel_.className=n):this.collapseLabel_=d;const a=void 0!==s.label?s.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=e):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=t,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(T.Z.CLICK,this.handleClick_.bind(this),!1);const u=this.element;u.className=o+" "+N.XV+" "+N.hg+(this.collapsed_&&this.collapsible_?" "+N.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(s){const o={},t=[];let e=!0;const d=s.layerStatesArray;for(let n=0,a=d.length;n<a;++n){const c=d[n];if(!(0,y.j)(c,s.viewState))continue;const i=c.layer.getSource();if(!i)continue;const u=i.getAttributions();if(!u)continue;const m=u(s);if(m)if(e=e&&!1!==i.getAttributionsCollapsible(),Array.isArray(m))for(let _=0,R=m.length;_<R;++_)m[_]in o||(t.push(m[_]),o[m[_]]=!0);else m in o||(t.push(m),o[m]=!0)}return this.overrideCollapsible_||this.setCollapsible(e),t}updateElement_(s){if(!s)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const o=this.collectSourceAttributions_(s),t=o.length>0;if(this.renderedVisible_!=t&&(this.element.style.display=t?"":"none",this.renderedVisible_=t),!(0,O.fS)(o,this.renderedAttributions_)){(0,I.ep)(this.ulElement_);for(let e=0,d=o.length;e<d;++e){const n=document.createElement("li");n.innerHTML=o[e],this.ulElement_.appendChild(n)}this.renderedAttributions_=o}}handleClick_(s){s.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(N.hN),this.collapsed_?(0,I.$H)(this.collapseLabel_,this.label_):(0,I.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(s){this.collapsible_!==s&&(this.collapsible_=s,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(s){this.userCollapsed_=s,this.collapsible_&&this.collapsed_!==s&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(s){this.updateElement_(s.frameState)}}},3994:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>C});var Z=l(3314),T=l(4933),N=l(5995),O=l(1074),y=l(6694);const C=class I extends Z.Z{constructor(p){super();const s=p.element;s&&!p.target&&!s.style.pointerEvents&&(s.style.pointerEvents="auto"),this.element=s||null,this.target_=null,this.map_=null,this.listenerKeys=[],p.render&&(this.render=p.render),p.target&&this.setTarget(p.target)}disposeInternal(){(0,y.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(p){this.map_&&(0,y.ZF)(this.element);for(let s=0,o=this.listenerKeys.length;s<o;++s)(0,O.bN)(this.listenerKeys[s]);this.listenerKeys.length=0,this.map_=p,p&&((this.target_?this.target_:p.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==N.Zn&&this.listenerKeys.push((0,O.oL)(p,T.Z.POSTRENDER,this.render,this)),p.render())}render(p){}setTarget(p){this.target_="string"==typeof p?document.getElementById(p):p}}},4166:(_t,k,l)=>{"use strict";l.d(k,{c:()=>o});var Z=l(359),T=l(1092),N=l(3994),O=l(8501),y=l(1193),I=l(2502);const L=class C extends N.Z{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const d=void 0!==e.className?e.className:"ol-rotate",n=void 0!==e.label?e.label:"\u21e7",a=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=a,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(a));const c=e.tipLabel?e.tipLabel:"Reset rotation",i=document.createElement("button");i.className=d+"-reset",i.setAttribute("type","button"),i.title=c,i.appendChild(this.label_),i.addEventListener(O.Z.CLICK,this.handleClick_.bind(this),!1);const m=this.element;m.className=d+" "+y.XV+" "+y.hg,m.appendChild(i),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(y.oj)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const d=this.getMap().getView();if(!d)return;const n=d.getRotation();void 0!==n&&(this.duration_>0&&n%(2*Math.PI)!=0?d.animate({rotation:0,duration:this.duration_,easing:I.Vv}):d.setRotation(0))}render(e){const d=e.frameState;if(!d)return;const n=d.viewState.rotation;if(n!=this.rotation_){const a="rotate("+n+"rad)";if(this.autoHide_){const c=this.element.classList.contains(y.oj);c||0!==n?c&&0!==n&&this.element.classList.remove(y.oj):this.element.classList.add(y.oj)}this.label_.style.transform=a}this.rotation_=n}},s=class p extends N.Z{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const d=void 0!==e.className?e.className:"ol-zoom",n=void 0!==e.delta?e.delta:1,a=void 0!==e.zoomInClassName?e.zoomInClassName:d+"-in",c=void 0!==e.zoomOutClassName?e.zoomOutClassName:d+"-out",i=void 0!==e.zoomInLabel?e.zoomInLabel:"+",u=void 0!==e.zoomOutLabel?e.zoomOutLabel:"\u2013",m=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",_=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",R=document.createElement("button");R.className=a,R.setAttribute("type","button"),R.title=m,R.appendChild("string"==typeof i?document.createTextNode(i):i),R.addEventListener(O.Z.CLICK,this.handleClick_.bind(this,n),!1);const v=document.createElement("button");v.className=c,v.setAttribute("type","button"),v.title=_,v.appendChild("string"==typeof u?document.createTextNode(u):u),v.addEventListener(O.Z.CLICK,this.handleClick_.bind(this,-n),!1);const D=this.element;D.className=d+" "+y.XV+" "+y.hg,D.appendChild(R),D.appendChild(v),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,d){d.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const a=n.getZoom();if(void 0!==a){const c=n.getConstrainedZoom(a+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:c,duration:this.duration_,easing:I.Vv})):n.setZoom(c)}}};function o(t){t=t||{};const e=new T.Z;return(void 0===t.zoom||t.zoom)&&e.push(new s(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new L(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Z.Z(t.attributionOptions)),e}},9611:(_t,k,l)=>{"use strict";l.d(k,{IH:()=>y,Fj:()=>L,I8:()=>p,fS:()=>o,WU:()=>s,U1:()=>t,bA:()=>e,V7:()=>c,yZ:()=>i,Cf:()=>u});var Z=l(1063),T=l(1775);function N(_,R,v){const P=void 0!==v?_.toFixed(v):""+_;let D=P.indexOf(".");return D=-1===D?P.length:D,D>R?P:new Array(1+R-D).join("0")+P}function y(_,R){return _[0]+=+R[0],_[1]+=+R[1],_}function L(_){return function(R){return i(R,_)}}function p(_,R,v){const P=(0,T.$W)(R+180,360)-180,D=Math.abs(3600*P),w=v||0;let G=Math.floor(D/3600),V=Math.floor((D-3600*G)/60),K=(0,T.FH)(D-3600*G-60*V,w);K>=60&&(K=0,V+=1),V>=60&&(V=0,G+=1);let B=G+"\xb0";return(0!==V||0!==K)&&(B+=" "+N(V,2)+"\u2032"),0!==K&&(B+=" "+N(K,2,w)+"\u2033"),0!==P&&(B+=" "+_.charAt(P<0?1:0)),B}function s(_,R,v){return _?R.replace("{x}",_[0].toFixed(v)).replace("{y}",_[1].toFixed(v)):""}function o(_,R){let v=!0;for(let P=_.length-1;P>=0;--P)if(_[P]!=R[P]){v=!1;break}return v}function t(_,R){const v=Math.cos(R),P=Math.sin(R),w=_[1]*v+_[0]*P;return _[0]=_[0]*v-_[1]*P,_[1]=w,_}function e(_,R){return _[0]*=R,_[1]*=R,_}function c(_,R){return _?p("NS",_[1],R)+" "+p("EW",_[0],R):""}function i(_,R){return s(_,"{x}, {y}",R)}function u(_,R){if(R.canWrapX()){const v=(0,Z.dz)(R.getExtent()),P=function m(_,R,v){const P=R.getExtent();let D=0;return R.canWrapX()&&(_[0]<P[0]||_[0]>P[2])&&(v=v||(0,Z.dz)(P),D=Math.floor((_[0]-P[0])/v)),D}(_,R,v);P&&(_[0]-=P*v)}return _}},1193:(_t,k,l)=>{"use strict";l.d(k,{$A:()=>T,XV:()=>N,hN:()=>I,hg:()=>y,oj:()=>Z,p:()=>p});const Z="ol-hidden",T="ol-selectable",N="ol-unselectable",y="ol-control",I="ol-collapsed",C=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),L=["style","variant","weight","size","lineHeight","family"],p=function(s){const o=s.match(C);if(!o)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let e=0,d=L.length;e<d;++e){const n=o[e+1];void 0!==n&&(t[L[e]]=n)}return t.families=t.family.split(/,\s?/),t}},6694:(_t,k,l)=>{"use strict";l.d(k,{$H:()=>I,E4:()=>T,Pb:()=>y,ZF:()=>C,ep:()=>L,hF:()=>p,iO:()=>O,jy:()=>N});var Z=l(4544);function T(s,o,t,e){let d;return d=t&&t.length?t.shift():Z.Id?new OffscreenCanvas(s||300,o||300):document.createElement("canvas"),s&&(d.width=s),o&&(d.height=o),d.getContext("2d",e)}function N(s){const o=s.canvas;o.width=1,o.height=1,s.clearRect(0,0,1,1)}function O(s){let o=s.offsetWidth;const t=getComputedStyle(s);return o+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),o}function y(s){let o=s.offsetHeight;const t=getComputedStyle(s);return o+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),o}function I(s,o){const t=o.parentNode;t&&t.replaceChild(s,o)}function C(s){return s&&s.parentNode?s.parentNode.removeChild(s):null}function L(s){for(;s.lastChild;)s.removeChild(s.lastChild)}function p(s,o){const t=s.childNodes;for(let e=0;;++e){const d=t[e],n=o[e];if(!d&&!n)break;if(d!==n){if(!d){s.appendChild(n);continue}if(!n){s.removeChild(d),--e;continue}s.insertBefore(n,d)}}}},2502:(_t,k,l)=>{"use strict";function Z(I){return Math.pow(I,3)}function T(I){return 1-Z(1-I)}function N(I){return 3*I*I-2*I*I*I}function O(I){return I}l.d(k,{GE:()=>O,Vv:()=>T,YQ:()=>Z,rd:()=>N})},1074:(_t,k,l)=>{"use strict";l.d(k,{Vx:()=>N,bN:()=>O,oL:()=>T});var Z=l(5230);function T(y,I,C,L,p){if(L&&L!==y&&(C=C.bind(L)),p){const o=C;C=function(){y.removeEventListener(I,C),o.apply(this,arguments)}}const s={target:y,type:I,listener:C};return y.addEventListener(I,C),s}function N(y,I,C,L){return T(y,I,C,L,!0)}function O(y){y&&y.target&&(y.target.removeEventListener(y.type,y.listener),(0,Z.Z)(y))}},5390:(_t,k,l)=>{"use strict";l.d(k,{ZP:()=>O});const O=class Z{constructor(I){this.type=I,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},8501:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},170:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>I});var Z=l(5783),T=l(5390),N=l(5995),O=l(5230);const I=class y extends Z.Z{constructor(L){super(),this.eventTarget_=L,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(L,p){if(!L||!p)return;const s=this.listeners_||(this.listeners_={}),o=s[L]||(s[L]=[]);o.includes(p)||o.push(p)}dispatchEvent(L){const p="string"==typeof L,s=p?L:L.type,o=this.listeners_&&this.listeners_[s];if(!o)return;const t=p?new T.ZP(L):L;t.target||(t.target=this.eventTarget_||this);const e=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});let n;s in e||(e[s]=0,d[s]=0),++e[s];for(let a=0,c=o.length;a<c;++a)if(n="handleEvent"in o[a]?o[a].handleEvent(t):o[a].call(this,t),!1===n||t.propagationStopped){n=!1;break}if(0==--e[s]){let a=d[s];for(delete d[s];a--;)this.removeEventListener(s,N.Zn);delete e[s]}return n}disposeInternal(){this.listeners_&&(0,O.Z)(this.listeners_)}getListeners(L){return this.listeners_&&this.listeners_[L]||void 0}hasListener(L){return!!this.listeners_&&(L?L in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(L,p){const s=this.listeners_&&this.listeners_[L];if(s){const o=s.indexOf(p);-1!==o&&(this.pendingRemovals_&&L in this.pendingRemovals_?(s[o]=N.Zn,++this.pendingRemovals_[L]):(s.splice(o,1),0===s.length&&delete this.listeners_[L]))}}}},1063:(_t,k,l)=>{"use strict";l.d(k,{Cf:()=>wt,Cr:()=>W,EO:()=>Rt,Ed:()=>$,GN:()=>c,H6:()=>G,HK:()=>n,I7:()=>Lt,MV:()=>jt,Ne:()=>St,T9:()=>e,Wj:()=>R,Xv:()=>it,YN:()=>d,b8:()=>L,bg:()=>V,d9:()=>I,dY:()=>U,dz:()=>et,f3:()=>y,fS:()=>u,g0:()=>g,hC:()=>K,hI:()=>N,iW:()=>m,jE:()=>s,kK:()=>lt,l7:()=>_,lJ:()=>t,p8:()=>M,pX:()=>o,qP:()=>P,qf:()=>C,qg:()=>S,r4:()=>p,rL:()=>J,w$:()=>B,xb:()=>ct});var Z=l(332),T=l(9772);function N(F){const Q=[1/0,1/0,-1/0,-1/0];for(let nt=0,ht=F.length;nt<ht;++nt)R(Q,F[nt]);return Q}function y(F,Q,nt){return nt?(nt[0]=F[0]-Q,nt[1]=F[1]-Q,nt[2]=F[2]+Q,nt[3]=F[3]+Q,nt):[F[0]-Q,F[1]-Q,F[2]+Q,F[3]+Q]}function I(F,Q){return Q?(Q[0]=F[0],Q[1]=F[1],Q[2]=F[2],Q[3]=F[3],Q):F.slice()}function C(F,Q,nt){let ht,It;return ht=Q<F[0]?F[0]-Q:F[2]<Q?Q-F[2]:0,It=nt<F[1]?F[1]-nt:F[3]<nt?nt-F[3]:0,ht*ht+It*It}function L(F,Q){return s(F,Q[0],Q[1])}function p(F,Q){return F[0]<=Q[0]&&Q[2]<=F[2]&&F[1]<=Q[1]&&Q[3]<=F[3]}function s(F,Q,nt){return F[0]<=Q&&Q<=F[2]&&F[1]<=nt&&nt<=F[3]}function o(F,Q){const At=Q[0],Gt=Q[1];let Ut=Z.Z.UNKNOWN;return At<F[0]?Ut|=Z.Z.LEFT:At>F[2]&&(Ut|=Z.Z.RIGHT),Gt<F[1]?Ut|=Z.Z.BELOW:Gt>F[3]&&(Ut|=Z.Z.ABOVE),Ut===Z.Z.UNKNOWN&&(Ut=Z.Z.INTERSECTING),Ut}function t(){return[1/0,1/0,-1/0,-1/0]}function e(F,Q,nt,ht,It){return It?(It[0]=F,It[1]=Q,It[2]=nt,It[3]=ht,It):[F,Q,nt,ht]}function d(F){return e(1/0,1/0,-1/0,-1/0,F)}function n(F,Q){const nt=F[0],ht=F[1];return e(nt,ht,nt,ht,Q)}function c(F,Q,nt,ht,It){return P(d(It),F,Q,nt,ht)}function u(F,Q){return F[0]==Q[0]&&F[2]==Q[2]&&F[1]==Q[1]&&F[3]==Q[3]}function m(F,Q,nt){return Math.abs(F[0]-Q[0])<nt&&Math.abs(F[2]-Q[2])<nt&&Math.abs(F[1]-Q[1])<nt&&Math.abs(F[3]-Q[3])<nt}function _(F,Q){return Q[0]<F[0]&&(F[0]=Q[0]),Q[2]>F[2]&&(F[2]=Q[2]),Q[1]<F[1]&&(F[1]=Q[1]),Q[3]>F[3]&&(F[3]=Q[3]),F}function R(F,Q){Q[0]<F[0]&&(F[0]=Q[0]),Q[0]>F[2]&&(F[2]=Q[0]),Q[1]<F[1]&&(F[1]=Q[1]),Q[1]>F[3]&&(F[3]=Q[1])}function P(F,Q,nt,ht,It){for(;nt<ht;nt+=It)w(F,Q[nt],Q[nt+1]);return F}function w(F,Q,nt){F[0]=Math.min(F[0],Q),F[1]=Math.min(F[1],nt),F[2]=Math.max(F[2],Q),F[3]=Math.max(F[3],nt)}function G(F,Q){let nt;return nt=Q(K(F)),!!(nt||(nt=Q(B(F)),nt)||(nt=Q(it(F)),nt)||(nt=Q(J(F)),nt))&&nt}function V(F){let Q=0;return ct(F)||(Q=et(F)*W(F)),Q}function K(F){return[F[0],F[1]]}function B(F){return[F[2],F[1]]}function S(F){return[(F[0]+F[2])/2,(F[1]+F[3])/2]}function g(F,Q){let nt;return"bottom-left"===Q?nt=K(F):"bottom-right"===Q?nt=B(F):"top-left"===Q?nt=J(F):"top-right"===Q?nt=it(F):(0,T.h)(!1,13),nt}function M(F,Q,nt,ht,It){const[Dt,At,Gt,Ut,Mt,Ht,$t,zt]=U(F,Q,nt,ht);return e(Math.min(Dt,Gt,Mt,$t),Math.min(At,Ut,Ht,zt),Math.max(Dt,Gt,Mt,$t),Math.max(At,Ut,Ht,zt),It)}function U(F,Q,nt,ht){const It=Q*ht[0]/2,Dt=Q*ht[1]/2,At=Math.cos(nt),Gt=Math.sin(nt),Ut=It*At,Mt=It*Gt,Ht=Dt*At,$t=Dt*Gt,zt=F[0],te=F[1];return[zt-Ut+$t,te-Mt-Ht,zt-Ut-$t,te-Mt+Ht,zt+Ut-$t,te+Mt+Ht,zt+Ut+$t,te+Mt-Ht,zt-Ut+$t,te-Mt-Ht]}function W(F){return F[3]-F[1]}function $(F,Q,nt){const ht=nt||[1/0,1/0,-1/0,-1/0];return lt(F,Q)?(ht[0]=F[0]>Q[0]?F[0]:Q[0],ht[1]=F[1]>Q[1]?F[1]:Q[1],ht[2]=F[2]<Q[2]?F[2]:Q[2],ht[3]=F[3]<Q[3]?F[3]:Q[3]):d(ht),ht}function J(F){return[F[0],F[3]]}function it(F){return[F[2],F[3]]}function et(F){return F[2]-F[0]}function lt(F,Q){return F[0]<=Q[2]&&F[2]>=Q[0]&&F[1]<=Q[3]&&F[3]>=Q[1]}function ct(F){return F[2]<F[0]||F[3]<F[1]}function Rt(F,Q){return Q?(Q[0]=F[0],Q[1]=F[1],Q[2]=F[2],Q[3]=F[3],Q):F}function Lt(F,Q,nt){let ht=!1;const It=o(F,Q),Dt=o(F,nt);if(It===Z.Z.INTERSECTING||Dt===Z.Z.INTERSECTING)ht=!0;else{const At=F[0],Gt=F[1],Ut=F[2],Mt=F[3],zt=nt[0],te=nt[1],ae=(te-Q[1])/(zt-Q[0]);let Ct,ue;!!(Dt&Z.Z.ABOVE)&&!(It&Z.Z.ABOVE)&&(Ct=zt-(te-Mt)/ae,ht=Ct>=At&&Ct<=Ut),!ht&&!!(Dt&Z.Z.RIGHT)&&!(It&Z.Z.RIGHT)&&(ue=te-(zt-Ut)*ae,ht=ue>=Gt&&ue<=Mt),!ht&&!!(Dt&Z.Z.BELOW)&&!(It&Z.Z.BELOW)&&(Ct=zt-(te-Gt)/ae,ht=Ct>=At&&Ct<=Ut),!ht&&Dt&Z.Z.LEFT&&!(It&Z.Z.LEFT)&&(ue=te-(zt-At)*ae,ht=ue>=Gt&&ue<=Mt)}return ht}function St(F,Q,nt,ht){let It=[];if(ht>1){const Gt=F[2]-F[0],Ut=F[3]-F[1];for(let Mt=0;Mt<ht;++Mt)It.push(F[0]+Gt*Mt/ht,F[1],F[2],F[1]+Ut*Mt/ht,F[2]-Gt*Mt/ht,F[3],F[0],F[3]-Ut*Mt/ht)}else It=[F[0],F[1],F[2],F[1],F[2],F[3],F[0],F[3]];Q(It,It,2);const Dt=[],At=[];for(let Gt=0,Ut=It.length;Gt<Ut;Gt+=2)Dt.push(It[Gt]),At.push(It[Gt+1]);return function O(F,Q,nt){return e(Math.min.apply(null,F),Math.min.apply(null,Q),Math.max.apply(null,F),Math.max.apply(null,Q),nt)}(Dt,At,nt)}function wt(F,Q){const nt=Q.getExtent(),ht=S(F);if(Q.canWrapX()&&(ht[0]<nt[0]||ht[0]>=nt[2])){const It=et(nt),At=Math.floor((ht[0]-nt[0])/It)*It;F[0]-=At,F[2]-=At}return F}function jt(F,Q){if(Q.canWrapX()){const nt=Q.getExtent();if(!isFinite(F[0])||!isFinite(F[2]))return[[nt[0],F[1],nt[2],F[3]]];wt(F,Q);const ht=et(nt);if(et(F)>ht)return[[nt[0],F[1],nt[2],F[3]]];if(F[0]<nt[0])return[[F[0]+ht,F[1],nt[2],F[3]],[nt[0],F[1],F[2],F[3]]];if(F[2]>nt[2])return[[F[0],F[1],nt[2],F[3]],[nt[0],F[1],F[2]-ht,F[3]]]}return[F]}},332:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},5995:(_t,k,l)=>{"use strict";l.d(k,{Dv:()=>N,Zn:()=>O,qe:()=>y,uX:()=>T});var Z=l(9351);function T(){return!0}function N(){return!1}function O(){}function y(C){let p,s,o,L=!1;return function(){const t=Array.prototype.slice.call(arguments);return(!L||this!==o||!(0,Z.fS)(t,s))&&(L=!0,o=this,s=t,p=C.apply(this,arguments)),p}}},9646:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>I});var Z=l(4474),T=l(1063),N=l(328),O=l(1775);class y extends Z.ZP{constructor(L,p){super(),this.setCoordinates(L,p)}clone(){const L=new y(this.flatCoordinates.slice(),this.layout);return L.applyProperties(this),L}closestPointXY(L,p,s,o){const t=this.flatCoordinates,e=(0,O.bI)(L,p,t[0],t[1]);if(e<o){const d=this.stride;for(let n=0;n<d;++n)s[n]=t[n];return s.length=d,e}return o}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(L){return(0,T.HK)(this.flatCoordinates,L)}getType(){return"Point"}intersectsExtent(L){return(0,T.jE)(L,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(L,p){this.setLayout(p,L,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,N.IG)(this.flatCoordinates,0,L,this.stride),this.changed()}}const I=y},5340:(_t,k,l)=>{"use strict";l.d(k,{ZP:()=>w,oJ:()=>V});var Z=l(4474),T=l(1557),N=l(1063),O=l(328),y=l(8603),I=l(5106);function C(S,g,f,M){let U=0,W=S[f-M],q=S[f-M+1];for(;g<f;g+=M){const $=S[g],z=S[g+1];U+=q*$-W*z,W=$,q=z}return U/2}class s extends Z.ZP{constructor(g,f){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===f||Array.isArray(g[0])?this.setCoordinates(g,f):this.setFlatCoordinates(f,g)}clone(){return new s(this.flatCoordinates.slice(),this.layout)}closestPointXY(g,f,M,U){return U<(0,N.qf)(this.getExtent(),g,f)?U:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,T.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,T.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,g,f,M,U))}getArea(){return C(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,I.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(g){const f=[];return f.length=(0,y.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,g,f,0),new s(f,"XY")}getType(){return"LinearRing"}intersectsExtent(g){return!1}setCoordinates(g,f){this.setLayout(f,g,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,O.Sg)(this.flatCoordinates,0,g,this.stride),this.changed()}}const o=s;var t=l(9646),e=l(9351),d=l(761);var c=l(5346);function i(S,g,f,M){for(;g<f-M;){for(let U=0;U<M;++U){const W=S[g+U];S[g+U]=S[f-M+U],S[f-M+U]=W}g+=M,f-=M}}function u(S,g,f,M){let U=0,W=S[f-M],q=S[f-M+1];for(;g<f;g+=M){const $=S[g],z=S[g+1];U+=($-W)*(z+q),W=$,q=z}return 0===U?void 0:U>0}function R(S,g,f,M,U){U=void 0!==U&&U;for(let W=0,q=f.length;W<q;++W){const $=f[W],z=u(S,g,$,M);(0===W?U&&z||!U&&!z:U&&!z||!U&&z)&&i(S,g,$,M),g=$}return g}class D extends Z.ZP{constructor(g,f,M){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==f&&M?(this.setFlatCoordinates(f,g),this.ends_=M):this.setCoordinates(g,f)}appendLinearRing(g){this.flatCoordinates?(0,e.l7)(this.flatCoordinates,g.getFlatCoordinates()):this.flatCoordinates=g.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const g=new D(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return g.applyProperties(this),g}closestPointXY(g,f,M,U){return U<(0,N.qf)(this.getExtent(),g,f)?U:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,T.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,T.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,g,f,M,U))}containsXY(g,f){return(0,d.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,g,f)}getArea(){return function L(S,g,f,M){let U=0;for(let W=0,q=f.length;W<q;++W){const $=f[W];U+=C(S,g,$,M),g=$}return U}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(g){let f;return void 0!==g?(f=this.getOrientedFlatCoordinates().slice(),R(f,0,this.ends_,this.stride,g)):f=this.flatCoordinates,(0,I.o1)(f,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const g=(0,N.qg)(this.getExtent());this.flatInteriorPoint_=function n(S,g,f,M,U,W,q){let $,z,at,J,it,et,lt;const ct=U[W+1],Rt=[];for(let St=0,wt=f.length;St<wt;++St){const jt=f[St];for(J=S[jt-M],et=S[jt-M+1],$=g;$<jt;$+=M)it=S[$],lt=S[$+1],(ct<=et&&lt<=ct||et<=ct&&ct<=lt)&&(at=(ct-et)/(lt-et)*(it-J)+J,Rt.push(at)),J=it,et=lt}let Tt=NaN,Lt=-1/0;for(Rt.sort(e.kK),J=Rt[0],$=1,z=Rt.length;$<z;++$){it=Rt[$];const St=Math.abs(it-J);St>Lt&&(at=(J+it)/2,(0,d.wY)(S,g,f,M,at,ct)&&(Tt=at,Lt=St)),J=it}return isNaN(Tt)&&(Tt=U[W]),q?(q.push(Tt,ct,Lt),q):[Tt,ct,Lt]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,g,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new t.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(g){return g<0||this.ends_.length<=g?null:new o(this.flatCoordinates.slice(0===g?0:this.ends_[g-1],this.ends_[g]),this.layout)}getLinearRings(){const g=this.layout,f=this.flatCoordinates,M=this.ends_,U=[];let W=0;for(let q=0,$=M.length;q<$;++q){const z=M[q],at=new o(f.slice(W,z),g);U.push(at),W=z}return U}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const g=this.flatCoordinates;!function m(S,g,f,M,U){U=void 0!==U&&U;for(let W=0,q=f.length;W<q;++W){const $=f[W],z=u(S,g,$,M);if(0===W){if(U&&z||!U&&!z)return!1}else if(U&&!z||!U&&z)return!1;g=$}return!0}(g,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=g.slice(),this.orientedFlatCoordinates_.length=R(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=g,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(g){const f=[],M=[];return f.length=(0,y.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(g),f,0,M),new D(f,"XY",M)}getType(){return"Polygon"}intersectsExtent(g){return(0,c.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,g)}setCoordinates(g,f){this.setLayout(f,g,2),this.flatCoordinates||(this.flatCoordinates=[]);const M=(0,O._5)(this.flatCoordinates,0,g,this.stride,this.ends_);this.flatCoordinates.length=0===M.length?0:M[M.length-1],this.changed()}}const w=D;function V(S){const g=S[0],f=S[1],M=S[2],U=S[3],W=[g,f,g,U,M,U,M,f,g,f];return new D(W,"XY",[W.length])}},4474:(_t,k,l)=>{"use strict";l.d(k,{ZP:()=>n,Kr:()=>d});var Z=l(3314),T=l(1540),N=l(3863),O=l(1063),y=l(7942),I=l(5995),C=l(7375);const L=(0,N.Ue)(),s=class p extends Z.Z{constructor(){super(),this.extent_=(0,O.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,I.qe)(function(c,i,u){if(!u)return this.getSimplifiedGeometry(i);const m=this.clone();return m.applyTransform(u),m.getSimplifiedGeometry(i)})}simplifyTransformed(c,i){return this.simplifyTransformedInternal(this.getRevision(),c,i)}clone(){return(0,T.O3)()}closestPointXY(c,i,u,m){return(0,T.O3)()}containsXY(c,i){const u=this.getClosestPoint([c,i]);return u[0]===c&&u[1]===i}getClosestPoint(c,i){return this.closestPointXY(c[0],c[1],i=i||[NaN,NaN],1/0),i}intersectsCoordinate(c){return this.containsXY(c[0],c[1])}computeExtent(c){return(0,T.O3)()}getExtent(c){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&(0,O.YN)(i),this.extentRevision_=this.getRevision()}return(0,O.EO)(this.extent_,c)}rotate(c,i){(0,T.O3)()}scale(c,i,u){(0,T.O3)()}simplify(c){return this.getSimplifiedGeometry(c*c)}getSimplifiedGeometry(c){return(0,T.O3)()}getType(){return(0,T.O3)()}applyTransform(c){(0,T.O3)()}intersectsExtent(c){return(0,T.O3)()}translate(c,i){(0,T.O3)()}transform(c,i){const u=(0,y.U2)(c),m="tile-pixels"==u.getUnits()?function(_,R,v){const P=u.getExtent(),D=u.getWorldExtent(),w=(0,O.Cr)(D)/(0,O.Cr)(P);return(0,N.qC)(L,D[0],D[3],w,-w,0,0,0),(0,C.vT)(_,0,_.length,v,L,R),(0,y.Ck)(u,i)(_,R,v)}:(0,y.Ck)(u,i);return this.applyTransform(m),this}};function e(a){let c;return"XY"==a?c=2:"XYZ"==a||"XYM"==a?c=3:"XYZM"==a&&(c=4),c}function d(a,c,i){const u=a.getFlatCoordinates();if(u){const m=a.getStride();return(0,C.vT)(u,0,u.length,m,c,i)}return null}const n=class o extends s{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(c){return(0,O.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,c)}getCoordinates(){return(0,T.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(c){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),c<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&c<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const i=this.getSimplifiedGeometryInternal(c);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=c,this)}getSimplifiedGeometryInternal(c){return this}getStride(){return this.stride}setFlatCoordinates(c,i){this.stride=e(c),this.layout=c,this.flatCoordinates=i}setCoordinates(c,i){(0,T.O3)()}setLayout(c,i,u){let m;if(c)m=e(c);else{for(let _=0;_<u;++_){if(0===i.length)return this.layout="XY",void(this.stride=2);i=i[0]}m=i.length,c=function t(a){let c;return 2==a?c="XY":3==a?c="XYZ":4==a&&(c="XYZM"),c}(m)}this.layout=c,this.stride=m}applyTransform(c){this.flatCoordinates&&(c(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(c,i){const u=this.getFlatCoordinates();if(u){const m=this.getStride();(0,C.U1)(u,0,u.length,m,c,i,u),this.changed()}}scale(c,i,u){void 0===i&&(i=c),u||(u=(0,O.qg)(this.getExtent()));const m=this.getFlatCoordinates();if(m){const _=this.getStride();(0,C.bA)(m,0,m.length,_,c,i,u,m),this.changed()}}translate(c,i){const u=this.getFlatCoordinates();if(u){const m=this.getStride();(0,C.Iu)(u,0,u.length,m,c,i,u),this.changed()}}}},1557:(_t,k,l)=>{"use strict";l.d(k,{Af:()=>O,Bv:()=>N,H$:()=>I,Xl:()=>C});var Z=l(1775);function T(p,s,o,t,e,d,n){const a=p[s],c=p[s+1],i=p[o]-a,u=p[o+1]-c;let m;if(0===i&&0===u)m=s;else{const _=((e-a)*i+(d-c)*u)/(i*i+u*u);if(_>1)m=o;else{if(_>0){for(let R=0;R<t;++R)n[R]=(0,Z.t7)(p[s+R],p[o+R],_);return void(n.length=t)}m=s}}for(let _=0;_<t;++_)n[_]=p[m+_];n.length=t}function N(p,s,o,t,e){let d=p[s],n=p[s+1];for(s+=t;s<o;s+=t){const a=p[s],c=p[s+1],i=(0,Z.bI)(d,n,a,c);i>e&&(e=i),d=a,n=c}return e}function O(p,s,o,t,e){for(let d=0,n=o.length;d<n;++d){const a=o[d];e=N(p,s,a,t,e),s=a}return e}function I(p,s,o,t,e,d,n,a,c,i,u){if(s==o)return i;let m,_;if(0===e){if(_=(0,Z.bI)(n,a,p[s],p[s+1]),_<i){for(m=0;m<t;++m)c[m]=p[s+m];return c.length=t,_}return i}u=u||[NaN,NaN];let R=s+t;for(;R<o;)if(T(p,R-t,R,t,n,a,u),_=(0,Z.bI)(n,a,u[0],u[1]),_<i){for(i=_,m=0;m<t;++m)c[m]=u[m];c.length=t,R+=t}else R+=t*Math.max((Math.sqrt(_)-Math.sqrt(i))/e|0,1);if(d&&(T(p,o-t,s,t,n,a,u),_=(0,Z.bI)(n,a,u[0],u[1]),_<i)){for(i=_,m=0;m<t;++m)c[m]=u[m];c.length=t}return i}function C(p,s,o,t,e,d,n,a,c,i,u){u=u||[NaN,NaN];for(let m=0,_=o.length;m<_;++m){const R=o[m];i=I(p,s,R,t,e,d,n,a,c,i,u),s=R}return i}},761:(_t,k,l)=>{"use strict";l.d(k,{TG:()=>N,uG:()=>T,wY:()=>O});var Z=l(1063);function T(I,C,L,p,s){return!(0,Z.H6)(s,function(t){return!N(I,C,L,p,t[0],t[1])})}function N(I,C,L,p,s,o){let t=0,e=I[L-p],d=I[L-p+1];for(;C<L;C+=p){const n=I[C],a=I[C+1];d<=o?a>o&&(n-e)*(o-d)-(s-e)*(a-d)>0&&t++:a<=o&&(n-e)*(o-d)-(s-e)*(a-d)<0&&t--,e=n,d=a}return 0!==t}function O(I,C,L,p,s,o){if(0===L.length||!N(I,C,L[0],p,s,o))return!1;for(let t=1,e=L.length;t<e;++t)if(N(I,L[t-1],L[t],p,s,o))return!1;return!0}},328:(_t,k,l)=>{"use strict";function Z(y,I,C,L){for(let p=0,s=C.length;p<s;++p)y[I++]=C[p];return I}function T(y,I,C,L){for(let p=0,s=C.length;p<s;++p){const o=C[p];for(let t=0;t<L;++t)y[I++]=o[t]}return I}function N(y,I,C,L,p){p=p||[];let s=0;for(let o=0,t=C.length;o<t;++o){const e=T(y,I,C[o],L);p[s++]=e,I=e}return p.length=s,p}l.d(k,{IG:()=>Z,Sg:()=>T,_5:()=>N})},5106:(_t,k,l)=>{"use strict";function Z(O,y,I,C,L){L=void 0!==L?L:[];let p=0;for(let s=y;s<I;s+=C)L[p++]=O.slice(s,s+C);return L.length=p,L}function T(O,y,I,C,L){L=void 0!==L?L:[];let p=0;for(let s=0,o=I.length;s<o;++s){const t=I[s];L[p++]=Z(O,y,t,C,L[p]),y=t}return L.length=p,L}function N(O,y,I,C,L){L=void 0!==L?L:[];let p=0;for(let s=0,o=I.length;s<o;++s){const t=I[s];L[p++]=1===t.length&&t[0]===y?[]:T(O,y,t,C,L[p]),y=t[t.length-1]}return L.length=p,L}l.d(k,{Ml:()=>Z,o1:()=>T,ug:()=>N})},5346:(_t,k,l)=>{"use strict";l.d(k,{Kz:()=>O,ac:()=>C,mV:()=>I});var Z=l(1063),T=l(4191),N=l(761);function O(p,s,o,t,e){const d=(0,Z.qP)((0,Z.lJ)(),p,s,o,t);return!!(0,Z.kK)(e,d)&&(!!((0,Z.r4)(e,d)||d[0]>=e[0]&&d[2]<=e[2]||d[1]>=e[1]&&d[3]<=e[3])||(0,T.E)(p,s,o,t,function(n,a){return(0,Z.I7)(e,n,a)}))}function I(p,s,o,t,e){return!!(O(p,s,o,t,e)||(0,N.TG)(p,s,o,t,e[0],e[1])||(0,N.TG)(p,s,o,t,e[0],e[3])||(0,N.TG)(p,s,o,t,e[2],e[1])||(0,N.TG)(p,s,o,t,e[2],e[3]))}function C(p,s,o,t,e){if(!I(p,s,o[0],t,e))return!1;if(1===o.length)return!0;for(let d=1,n=o.length;d<n;++d)if((0,N.uG)(p,o[d-1],o[d],t,e)&&!O(p,o[d-1],o[d],t,e))return!1;return!0}},6648:(_t,k,l)=>{"use strict";function Z(N,O,y,I){let C=N[O],L=N[O+1],p=0;for(let s=O+I;s<y;s+=I){const o=N[s],t=N[s+1];p+=Math.sqrt((o-C)*(o-C)+(t-L)*(t-L)),C=o,L=t}return p}l.d(k,{W:()=>Z})},4191:(_t,k,l)=>{"use strict";function Z(T,N,O,y,I){let C;for(N+=y;N<O;N+=y)if(C=I(T.slice(N-y,N),T.slice(N,N+y)),C)return C;return!1}l.d(k,{E:()=>Z})},8603:(_t,k,l)=>{"use strict";l.d(k,{Zh:()=>p,dt:()=>N,uZ:()=>C});var Z=l(1775);function N(o,t,e,d,n,a,c){const i=(e-t)/d;if(i<3){for(;t<e;t+=d)a[c++]=o[t],a[c++]=o[t+1];return c}const u=new Array(i);u[0]=1,u[i-1]=1;const m=[t,e-d];let _=0;for(;m.length>0;){const R=m.pop(),v=m.pop();let P=0;const D=o[v],w=o[v+1],G=o[R],V=o[R+1];for(let K=v+d;K<R;K+=d){const g=(0,Z.rU)(o[K],o[K+1],D,w,G,V);g>P&&(_=K,P=g)}P>n&&(u[(_-t)/d]=1,v+d<_&&m.push(v,_),_+d<R&&m.push(_,R))}for(let R=0;R<i;++R)u[R]&&(a[c++]=o[t+R*d],a[c++]=o[t+R*d+1]);return c}function C(o,t){return t*Math.round(o/t)}function L(o,t,e,d,n,a,c){if(t==e)return c;let m,_,i=C(o[t],n),u=C(o[t+1],n);t+=d,a[c++]=i,a[c++]=u;do{if(m=C(o[t],n),_=C(o[t+1],n),(t+=d)==e)return a[c++]=m,a[c++]=_,c}while(m==i&&_==u);for(;t<e;){const R=C(o[t],n),v=C(o[t+1],n);if(t+=d,R==m&&v==_)continue;const P=m-i,D=_-u,w=R-i,G=v-u;P*G==D*w&&(P<0&&w<P||P==w||P>0&&w>P)&&(D<0&&G<D||D==G||D>0&&G>D)?(m=R,_=v):(a[c++]=m,a[c++]=_,i=m,u=_,m=R,_=v)}return a[c++]=m,a[c++]=_,c}function p(o,t,e,d,n,a,c,i){for(let u=0,m=e.length;u<m;++u){const _=e[u];c=L(o,t,_,d,n,a,c),i.push(c),t=_}return c}},7375:(_t,k,l)=>{"use strict";function Z(y,I,C,L,p,s){s=s||[];let o=0;for(let t=I;t<C;t+=L){const e=y[t],d=y[t+1];s[o++]=p[0]*e+p[2]*d+p[4],s[o++]=p[1]*e+p[3]*d+p[5]}return s&&s.length!=o&&(s.length=o),s}function T(y,I,C,L,p,s,o){o=o||[];const t=Math.cos(p),e=Math.sin(p),d=s[0],n=s[1];let a=0;for(let c=I;c<C;c+=L){const i=y[c]-d,u=y[c+1]-n;o[a++]=d+i*t-u*e,o[a++]=n+i*e+u*t;for(let m=c+2;m<c+L;++m)o[a++]=y[m]}return o&&o.length!=a&&(o.length=a),o}function N(y,I,C,L,p,s,o,t){t=t||[];const e=o[0],d=o[1];let n=0;for(let a=I;a<C;a+=L){const i=y[a+1]-d;t[n++]=e+p*(y[a]-e),t[n++]=d+s*i;for(let u=a+2;u<a+L;++u)t[n++]=y[u]}return t&&t.length!=n&&(t.length=n),t}function O(y,I,C,L,p,s,o){o=o||[];let t=0;for(let e=I;e<C;e+=L){o[t++]=y[e]+p,o[t++]=y[e+1]+s;for(let d=e+2;d<e+L;++d)o[t++]=y[d]}return o&&o.length!=t&&(o.length=t),o}l.d(k,{Iu:()=>O,U1:()=>T,bA:()=>N,vT:()=>Z})},4544:(_t,k,l)=>{"use strict";l.d(k,{G$:()=>y,Id:()=>L,ME:()=>O,MP:()=>C,Tp:()=>p,V:()=>T,bM:()=>s,tK:()=>I});const Z="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",T=Z.includes("firefox"),O=Z.includes("safari")&&!Z.includes("chrom")&&(Z.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Z)),y=Z.includes("webkit")&&!Z.includes("edge"),I=Z.includes("macintosh"),C="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,L="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,p="undefined"!=typeof Image&&Image.prototype.decode,s=function(){let o=!1;try{const t=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(t){}return o}()},9968:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>C});var Z=l(3314),T=l(9520),N=l(1540),O=l(9772),y=l(1775);const C=class I extends Z.Z{constructor(p){super(),this.background_=p.background;const s=Object.assign({},p);"object"==typeof p.properties&&(delete s.properties,Object.assign(s,p.properties)),s[T.Z.OPACITY]=void 0!==p.opacity?p.opacity:1,(0,O.h)("number"==typeof s[T.Z.OPACITY],64),s[T.Z.VISIBLE]=void 0===p.visible||p.visible,s[T.Z.Z_INDEX]=p.zIndex,s[T.Z.MAX_RESOLUTION]=void 0!==p.maxResolution?p.maxResolution:1/0,s[T.Z.MIN_RESOLUTION]=void 0!==p.minResolution?p.minResolution:0,s[T.Z.MIN_ZOOM]=void 0!==p.minZoom?p.minZoom:-1/0,s[T.Z.MAX_ZOOM]=void 0!==p.maxZoom?p.maxZoom:1/0,this.className_=void 0!==s.className?s.className:"ol-layer",delete s.className,this.setProperties(s),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(p){const s=this.state_||{layer:this,managed:void 0===p||p},o=this.getZIndex();return s.opacity=(0,y.uZ)(Math.round(100*this.getOpacity())/100,0,1),s.visible=this.getVisible(),s.extent=this.getExtent(),s.zIndex=void 0!==o||s.managed?o:1/0,s.maxResolution=this.getMaxResolution(),s.minResolution=Math.max(this.getMinResolution(),0),s.minZoom=this.getMinZoom(),s.maxZoom=this.getMaxZoom(),this.state_=s,s}getLayersArray(p){return(0,N.O3)()}getLayerStatesArray(p){return(0,N.O3)()}getExtent(){return this.get(T.Z.EXTENT)}getMaxResolution(){return this.get(T.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(T.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(T.Z.MIN_ZOOM)}getMaxZoom(){return this.get(T.Z.MAX_ZOOM)}getOpacity(){return this.get(T.Z.OPACITY)}getSourceState(){return(0,N.O3)()}getVisible(){return this.get(T.Z.VISIBLE)}getZIndex(){return this.get(T.Z.Z_INDEX)}setBackground(p){this.background_=p,this.changed()}setExtent(p){this.set(T.Z.EXTENT,p)}setMaxResolution(p){this.set(T.Z.MAX_RESOLUTION,p)}setMinResolution(p){this.set(T.Z.MIN_RESOLUTION,p)}setMaxZoom(p){this.set(T.Z.MAX_ZOOM,p)}setMinZoom(p){this.set(T.Z.MIN_ZOOM,p)}setOpacity(p){(0,O.h)("number"==typeof p,64),this.set(T.Z.OPACITY,p)}setVisible(p){this.set(T.Z.VISIBLE,p)}setZIndex(p){this.set(T.Z.Z_INDEX,p)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},1323:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>O});var Z=l(8594),T=l(4883);const O=class N extends Z.Z{constructor(I){I=I||{};const C=Object.assign({},I);delete C.preload,delete C.useInterimTilesOnError,super(C),this.setPreload(void 0!==I.preload?I.preload:0),this.setUseInterimTilesOnError(void 0===I.useInterimTilesOnError||I.useInterimTilesOnError)}getPreload(){return this.get(T.Z.PRELOAD)}setPreload(I){this.set(T.Z.PRELOAD,I)}getUseInterimTilesOnError(){return this.get(T.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(I){this.set(T.Z.USE_INTERIM_TILES_ON_ERROR,I)}getData(I){return super.getData(I)}}},3312:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>c});var Z=l(8594),T=l(4948),N=l(9487),O=l(9050),y=l(2002),I=l(4647),C=l(4737),L=l(2925),p=l(864);function s(i){return new N.ZP({fill:o(i,""),stroke:t(i,""),text:e(i),image:d(i)})}function o(i,u){const m=i[u+"fill-color"];if(m)return new y.Z({color:m})}function t(i,u){const m=i[u+"stroke-width"],_=i[u+"stroke-color"];if(m||_)return new L.Z({width:m,color:_,lineCap:i[u+"stroke-line-cap"],lineJoin:i[u+"stroke-line-join"],lineDash:i[u+"stroke-line-dash"],lineDashOffset:i[u+"stroke-line-dash-offset"],miterLimit:i[u+"stroke-miter-limit"]})}function e(i){const u=i["text-value"];return u?new p.Z({text:u,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:o(i,"text-"),backgroundFill:o(i,"text-background-"),stroke:t(i,"text-"),backgroundStroke:t(i,"text-background-")}):void 0}function d(i){const u=i["icon-src"],m=i["icon-img"];if(u||m)return new I.Z({src:u,img:m,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const _=i["shape-points"];if(_){const v="shape-";return new C.Z({points:_,fill:o(i,v),stroke:t(i,v),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const R=i["circle-radius"];if(R){const v="circle-";return new O.Z({radius:R,fill:o(i,v),stroke:t(i,v),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const c=class a extends Z.Z{constructor(u){u=u||{};const m=Object.assign({},u);delete m.style,delete m.renderBuffer,delete m.updateWhileAnimating,delete m.updateWhileInteracting,super(m),this.declutter_=void 0!==u.declutter&&u.declutter,this.renderBuffer_=void 0!==u.renderBuffer?u.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(u.style),this.updateWhileAnimating_=void 0!==u.updateWhileAnimating&&u.updateWhileAnimating,this.updateWhileInteracting_=void 0!==u.updateWhileInteracting&&u.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(u){return super.getFeatures(u)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(u){u.declutterTree||(u.declutterTree=new T(9)),this.getRenderer().renderDeclutter(u)}setRenderOrder(u){this.set("renderOrder",u)}setStyle(u){let m;if(void 0===u)m=N.yF;else if(null===u)m=null;else if("function"==typeof u)m=u;else if(u instanceof N.ZP)m=u;else if(Array.isArray(u)){const _=u.length,R=new Array(_);for(let v=0;v<_;++v){const P=u[v];R[v]=P instanceof N.ZP?P:s(P)}m=R}else m=s(u);this.style_=m,this.styleFunction_=null===u?void 0:(0,N.J$)(this.style_),this.changed()}}},450:(_t,k,l)=>{"use strict";l.d(k,{V:()=>t,Z:()=>n});var Z=l(9968),T=l(1092),N=l(6403),O=l(5390),y=l(8501),I=l(8331),C=l(9772),L=l(5230),p=l(1063),s=l(1540),o=l(1074);class t extends O.ZP{constructor(c,i){super(c),this.layer=i}}class d extends Z.Z{constructor(c){c=c||{};const i=Object.assign({},c);delete i.layers;let u=c.layers;super(i),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),u?Array.isArray(u)?u=new T.Z(u.slice(),{unique:!0}):(0,C.h)("function"==typeof u.getArray,43):u=new T.Z(void 0,{unique:!0}),this.setLayers(u)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(o.bN),this.layersListenerKeys_.length=0;const c=this.getLayers();this.layersListenerKeys_.push((0,o.oL)(c,N.Z.ADD,this.handleLayersAdd_,this),(0,o.oL)(c,N.Z.REMOVE,this.handleLayersRemove_,this));for(const u in this.listenerKeys_)this.listenerKeys_[u].forEach(o.bN);(0,L.Z)(this.listenerKeys_);const i=c.getArray();for(let u=0,m=i.length;u<m;u++){const _=i[u];this.registerLayerListeners_(_),this.dispatchEvent(new t("addlayer",_))}this.changed()}registerLayerListeners_(c){const i=[(0,o.oL)(c,I.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,o.oL)(c,y.Z.CHANGE,this.handleLayerChange_,this)];c instanceof d&&i.push((0,o.oL)(c,"addlayer",this.handleLayerGroupAdd_,this),(0,o.oL)(c,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,s.sq)(c)]=i}handleLayerGroupAdd_(c){this.dispatchEvent(new t("addlayer",c.layer))}handleLayerGroupRemove_(c){this.dispatchEvent(new t("removelayer",c.layer))}handleLayersAdd_(c){const i=c.element;this.registerLayerListeners_(i),this.dispatchEvent(new t("addlayer",i)),this.changed()}handleLayersRemove_(c){const i=c.element,u=(0,s.sq)(i);this.listenerKeys_[u].forEach(o.bN),delete this.listenerKeys_[u],this.dispatchEvent(new t("removelayer",i)),this.changed()}getLayers(){return this.get("layers")}setLayers(c){const i=this.getLayers();if(i){const u=i.getArray();for(let m=0,_=u.length;m<_;++m)this.dispatchEvent(new t("removelayer",u[m]))}this.set("layers",c)}getLayersArray(c){return c=void 0!==c?c:[],this.getLayers().forEach(function(i){i.getLayersArray(c)}),c}getLayerStatesArray(c){const i=void 0!==c?c:[],u=i.length;this.getLayers().forEach(function(R){R.getLayerStatesArray(i)});const m=this.getLayerState();let _=m.zIndex;!c&&void 0===m.zIndex&&(_=0);for(let R=u,v=i.length;R<v;R++){const P=i[R];P.opacity*=m.opacity,P.visible=P.visible&&m.visible,P.maxResolution=Math.min(P.maxResolution,m.maxResolution),P.minResolution=Math.max(P.minResolution,m.minResolution),P.minZoom=Math.max(P.minZoom,m.minZoom),P.maxZoom=Math.min(P.maxZoom,m.maxZoom),void 0!==m.extent&&(P.extent=void 0!==P.extent?(0,p.Ed)(P.extent,m.extent):m.extent),void 0===P.zIndex&&(P.zIndex=_)}return i}getSourceState(){return"ready"}}const n=d},8594:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>p,j:()=>L});var Z=l(9968),T=l(8501),N=l(9520),O=l(1206),y=l(9772),I=l(1074);function L(s,o){if(!s.visible)return!1;const t=o.resolution;if(t<s.minResolution||t>=s.maxResolution)return!1;const e=o.zoom;return e>s.minZoom&&e<=s.maxZoom}const p=class C extends Z.Z{constructor(o){const t=Object.assign({},o);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,o.render&&(this.render=o.render),o.map&&this.setMap(o.map),this.addChangeListener(N.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(o.source?o.source:null)}getLayersArray(o){return(o=o||[]).push(this),o}getLayerStatesArray(o){return(o=o||[]).push(this.getLayerState()),o}getSource(){return this.get(N.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const o=this.getSource();return o?o.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,I.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null);const o=this.getSource();o&&(this.sourceChangeKey_=(0,I.oL)(o,T.Z.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(o){return this.renderer_?this.renderer_.getFeatures(o):new Promise(t=>t([]))}getData(o){return this.renderer_&&this.rendered?this.renderer_.getData(o):null}render(o,t){const e=this.getRenderer();if(e.prepareFrame(o))return this.rendered=!0,e.renderFrame(o,t)}unrender(){this.rendered=!1}setMapInternal(o){o||this.unrender(),this.set(N.Z.MAP,o)}getMapInternal(){return this.get(N.Z.MAP)}setMap(o){this.mapPrecomposeKey_&&((0,I.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),o||this.changed(),this.mapRenderKey_&&((0,I.bN)(this.mapRenderKey_),this.mapRenderKey_=null),o&&(this.mapPrecomposeKey_=(0,I.oL)(o,O.Z.PRECOMPOSE,function(t){const d=t.frameState.layerStatesArray,n=this.getLayerState(!1);(0,y.h)(!d.some(function(a){return a.layer===n.layer}),67),d.push(n)},this),this.mapRenderKey_=(0,I.oL)(this,T.Z.CHANGE,o.render,o),this.changed())}setSource(o){this.set(N.Z.SOURCE,o)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},9520:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},4883:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},1775:(_t,k,l)=>{"use strict";function Z(e,d,n){return Math.min(Math.max(e,d),n)}function T(e,d,n,a,c,i){const u=c-n,m=i-a;if(0!==u||0!==m){const _=((e-n)*u+(d-a)*m)/(u*u+m*m);_>1?(n=c,a=i):_>0&&(n+=u*_,a+=m*_)}return N(e,d,n,a)}function N(e,d,n,a){const c=n-e,i=a-d;return c*c+i*i}function O(e){const d=e.length;for(let a=0;a<d;a++){let c=a,i=Math.abs(e[a][a]);for(let m=a+1;m<d;m++){const _=Math.abs(e[m][a]);_>i&&(i=_,c=m)}if(0===i)return null;const u=e[c];e[c]=e[a],e[a]=u;for(let m=a+1;m<d;m++){const _=-e[m][a]/e[a][a];for(let R=a;R<d+1;R++)a==R?e[m][R]=0:e[m][R]+=_*e[a][R]}}const n=new Array(d);for(let a=d-1;a>=0;a--){n[a]=e[a][d]/e[a][a];for(let c=a-1;c>=0;c--)e[c][d]-=e[c][a]*n[a]}return n}function I(e){return e*Math.PI/180}function C(e,d){const n=e%d;return n*d<0?n+d:n}function L(e,d,n){return e+n*(d-e)}function p(e,d){const n=Math.pow(10,d);return Math.round(e*n)/n}function o(e,d){return Math.floor(p(e,d))}function t(e,d){return Math.ceil(p(e,d))}l.d(k,{$W:()=>C,FH:()=>p,GW:()=>o,SV:()=>O,Yr:()=>I,bI:()=>N,mD:()=>t,rU:()=>T,t7:()=>L,uZ:()=>Z})},5230:(_t,k,l)=>{"use strict";function Z(N){for(const O in N)delete N[O]}function T(N){let O;for(O in N)return!1;return!O}l.d(k,{Z:()=>Z,x:()=>T})},7942:(_t,k,l)=>{"use strict";l.d(k,{Wm:()=>N,zY:()=>F,rM:()=>Tt,Sx:()=>et,sx:()=>$t,UQ:()=>wt,h_:()=>at,OP:()=>ht,mi:()=>Q,Vs:()=>Ct,dY:()=>fe,U2:()=>ct,_Q:()=>Rt,Ck:()=>Dt,WO:()=>It,Cs:()=>zt,DN:()=>Ht,bU:()=>nt,lO:()=>ae,Fj:()=>ue,on:()=>Pe,vs:()=>At,$A:()=>Gt,eL:()=>te});const N={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},y=class O{constructor(st){this.code_=st.code,this.units_=st.units,this.extent_=void 0!==st.extent?st.extent:null,this.worldExtent_=void 0!==st.worldExtent?st.worldExtent:null,this.axisOrientation_=void 0!==st.axisOrientation?st.axisOrientation:"enu",this.global_=void 0!==st.global&&st.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=st.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=st.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||N[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(st){this.global_=st,this.canWrapX_=!(!st||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(st){this.defaultTileGrid_=st}setExtent(st){this.extent_=st,this.canWrapX_=!(!this.global_||!st)}setWorldExtent(st){this.worldExtent_=st}setGetPointResolution(st){this.getPointResolutionFunc_=st}getPointResolutionFunc(){return this.getPointResolutionFunc_}},I=6378137,C=Math.PI*I,L=[-C,-C,C,C],p=[-180,-85,180,85],s=I*Math.log(Math.tan(Math.PI/2));class o extends y{constructor(st){super({code:st,units:"m",extent:L,global:!0,worldExtent:p,getPointResolution:function(dt,mt){return dt/Math.cosh(mt[1]/I)}})}}const t=[new o("EPSG:3857"),new o("EPSG:102100"),new o("EPSG:102113"),new o("EPSG:900913"),new o("http://www.opengis.net/def/crs/EPSG/0/3857"),new o("http://www.opengis.net/gml/srs/epsg.xml#3857")];function e(tt,st,dt){const mt=tt.length;dt=dt>1?dt:2,void 0===st&&(st=dt>2?tt.slice():new Array(mt));for(let Pt=0;Pt<mt;Pt+=dt){st[Pt]=C*tt[Pt]/180;let bt=I*Math.log(Math.tan(Math.PI*(+tt[Pt+1]+90)/360));bt>s?bt=s:bt<-s&&(bt=-s),st[Pt+1]=bt}return st}function d(tt,st,dt){const mt=tt.length;dt=dt>1?dt:2,void 0===st&&(st=dt>2?tt.slice():new Array(mt));for(let Pt=0;Pt<mt;Pt+=dt)st[Pt]=180*tt[Pt]/C,st[Pt+1]=360*Math.atan(Math.exp(tt[Pt+1]/I))/Math.PI-90;return st}const a=[-180,-90,180,90],c=6378137*Math.PI/180;class i extends y{constructor(st,dt){super({code:st,units:"degrees",extent:a,axisOrientation:dt,global:!0,metersPerUnit:c,worldExtent:a})}}const u=[new i("CRS:84"),new i("EPSG:4326","neu"),new i("urn:ogc:def:crs:OGC:1.3:CRS84"),new i("urn:ogc:def:crs:OGC:2:84"),new i("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new i("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new i("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let m={},P={};function w(tt,st,dt){const mt=tt.getCode(),Pt=st.getCode();mt in P||(P[mt]={}),P[mt][Pt]=dt}var K=l(1063),B=l(1775),S=l(9611);function f(tt,st,dt){dt=dt||6371008.8;const mt=(0,B.Yr)(tt[1]),Pt=(0,B.Yr)(st[1]),bt=(Pt-mt)/2,Nt=(0,B.Yr)(st[0]-tt[0])/2,Jt=Math.sin(bt)*Math.sin(bt)+Math.sin(Nt)*Math.sin(Nt)*Math.cos(mt)*Math.cos(Pt);return 2*dt*Math.atan2(Math.sqrt(Jt),Math.sqrt(1-Jt))}let z=!0;function at(tt){z=!(void 0===tt||tt)}function J(tt,st,dt){if(void 0!==st)for(let mt=0,Pt=tt.length;mt<Pt;++mt)st[mt]=tt[mt];else st=tt.slice();return st}function it(tt,st,dt){if(void 0!==st&&tt!==st){for(let mt=0,Pt=tt.length;mt<Pt;++mt)st[mt]=tt[mt];tt=st}return tt}function et(tt){(function v(tt,st){m[tt]=st})(tt.getCode(),tt),w(tt,tt,J)}function ct(tt){return"string"==typeof tt?function R(tt){return m[tt]||m[tt.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(tt):tt||null}function Rt(tt,st,dt,mt){let Pt;const bt=(tt=ct(tt)).getPointResolutionFunc();if(bt){if(Pt=bt(st,dt),mt&&mt!==tt.getUnits()){const Nt=tt.getMetersPerUnit();Nt&&(Pt=Pt*Nt/N[mt])}}else{const Nt=tt.getUnits();if("degrees"==Nt&&!mt||"degrees"==mt)Pt=st;else{const Jt=It(tt,ct("EPSG:4326"));if(Jt===it&&"degrees"!==Nt)Pt=st*tt.getMetersPerUnit();else{let he=[dt[0]-st/2,dt[1],dt[0]+st/2,dt[1],dt[0],dt[1]-st/2,dt[0],dt[1]+st/2];he=Jt(he,he,2),Pt=(f(he.slice(0,2),he.slice(2,4))+f(he.slice(4,6),he.slice(6,8)))/2}const Yt=mt?N[mt]:tt.getMetersPerUnit();void 0!==Yt&&(Pt/=Yt)}}return Pt}function Tt(tt){(function lt(tt){tt.forEach(et)})(tt),tt.forEach(function(st){tt.forEach(function(dt){st!==dt&&w(st,dt,J)})})}function wt(tt,st){return tt?"string"==typeof tt?ct(tt):tt:ct(st)}function jt(tt){return function(st,dt,mt){const Pt=st.length;mt=void 0!==mt?mt:2,dt=void 0!==dt?dt:new Array(Pt);for(let bt=0;bt<Pt;bt+=mt){const Nt=tt(st.slice(bt,bt+mt)),Jt=Nt.length;for(let Yt=0,he=mt;Yt<he;++Yt)dt[bt+Yt]=Yt>=Jt?st[bt+Yt]:Nt[Yt]}return dt}}function F(tt,st,dt,mt){const Pt=ct(tt),bt=ct(st);w(Pt,bt,jt(dt)),w(bt,Pt,jt(mt))}function Q(tt,st){return at(),At(tt,"EPSG:4326",void 0!==st?st:"EPSG:3857")}function nt(tt,st){const dt=At(tt,void 0!==st?st:"EPSG:3857","EPSG:4326"),mt=dt[0];return(mt<-180||mt>180)&&(dt[0]=(0,B.$W)(mt+180,360)-180),dt}function ht(tt,st){if(tt===st)return!0;const dt=tt.getUnits()===st.getUnits();return(tt.getCode()===st.getCode()||It(tt,st)===J)&&dt}function It(tt,st){let Pt=function V(tt,st){let dt;return tt in P&&st in P[tt]&&(dt=P[tt][st]),dt}(tt.getCode(),st.getCode());return Pt||(Pt=it),Pt}function Dt(tt,st){return It(ct(tt),ct(st))}function At(tt,st,dt){return Dt(st,dt)(tt,void 0,tt.length)}function Gt(tt,st,dt,mt){const Pt=Dt(st,dt);return(0,K.Ne)(tt,Pt,void 0,mt)}let Mt=null;function Ht(tt){Mt=ct(tt)}function $t(){Mt=null}function zt(){return Mt}function te(){Ht("EPSG:4326")}function ae(tt,st){return Mt?At(tt,st,Mt):tt}function Ct(tt,st){return Mt?At(tt,Mt,st):(z&&!(0,S.fS)(tt,[0,0])&&tt[0]>=-180&&tt[0]<=180&&tt[1]>=-90&&tt[1]<=90&&(z=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),tt)}function ue(tt,st){return Mt?Gt(tt,st,Mt):tt}function fe(tt,st){return Mt?Gt(tt,Mt,st):tt}function Pe(tt,st){if(!Mt)return tt;const dt=ct(st).getUnits(),mt=Mt.getUnits();return dt&&mt?tt*N[dt]/N[mt]:tt}!function Re(){Tt(t),Tt(u),function Lt(tt,st,dt,mt){tt.forEach(function(Pt){st.forEach(function(bt){w(Pt,bt,dt),w(bt,Pt,mt)})})}(u,t,e,d)}()},6853:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>N});var Z=l(5390);const N=class T extends Z.ZP{constructor(y,I,C,L){super(y),this.inversePixelTransform=I,this.frameState=C,this.context=L}}},1206:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>Z});const Z={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},944:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>T});const T=class Z{drawCustom(O,y,I,C){}drawGeometry(O){}setStyle(O){}drawCircle(O,y){}drawFeature(O,y){}drawGeometryCollection(O,y){}drawLineString(O,y){}drawMultiLineString(O,y){}drawMultiPoint(O,y){}drawMultiPolygon(O,y){}drawPoint(O,y){}drawPolygon(O,y){}drawText(O,y){}setFillStrokeStyle(O,y){}setImageStyle(O,y){}setTextStyle(O,y){}}},5909:(_t,k,l)=>{"use strict";l.d(k,{Df:()=>I,He:()=>s,Kd:()=>w,PH:()=>d,Qx:()=>R,Tx:()=>e,V4:()=>t,X9:()=>p,Zw:()=>G,_f:()=>K,bL:()=>C,mb:()=>L,oB:()=>a,rc:()=>o,ru:()=>n,sG:()=>i,yC:()=>c});var Z=l(3314),T=l(4544),N=l(5230),O=l(6694),y=l(1193);const I="10px sans-serif",C="#000",L="round",p=[],s=0,o="round",t=10,e="#000",d="center",n="middle",a=[0,0,0,0],c=1,i=new Z.Z;let m,u=null;const _={},R=function(){const g="32px ",f=["monospace","serif"],M=f.length,U="wmytzilWMYTZIL@#/&?$%10\uf013";let W,q;function $(at,J,it){let et=!0;for(let lt=0;lt<M;++lt){const ct=f[lt];if(q=D(at+" "+J+" "+g+ct,U),it!=ct){const Rt=D(at+" "+J+" "+g+it+","+ct,U);et=et&&Rt!=q}}return!!et}function z(){let at=!0;const J=i.getKeys();for(let it=0,et=J.length;it<et;++it){const lt=J[it];i.get(lt)<100&&($.apply(this,lt.split("\n"))?((0,N.Z)(_),u=null,m=void 0,i.set(lt,100)):(i.set(lt,i.get(lt)+1,!0),at=!1))}at&&(clearInterval(W),W=void 0)}return function(at){const J=(0,y.p)(at);if(!J)return;const it=J.families;for(let et=0,lt=it.length;et<lt;++et){const ct=it[et],Rt=J.style+"\n"+J.weight+"\n"+ct;void 0===i.get(Rt)&&(i.set(Rt,100,!0),$(J.style,J.weight,ct)||(i.set(Rt,0,!0),void 0===W&&(W=setInterval(z,32))))}}}(),v=function(){let S;return function(g){let f=_[g];if(null==f){if(T.Id){const M=(0,y.p)(g),U=P(g,"\u017dg");f=(isNaN(Number(M.lineHeight))?1.2:Number(M.lineHeight))*(U.actualBoundingBoxAscent+U.actualBoundingBoxDescent)}else S||(S=document.createElement("div"),S.innerHTML="M",S.style.minHeight="0",S.style.maxHeight="none",S.style.height="auto",S.style.padding="0",S.style.border="none",S.style.position="absolute",S.style.display="block",S.style.left="-99999px"),S.style.font=g,document.body.appendChild(S),f=S.offsetHeight,document.body.removeChild(S);_[g]=f}return f}}();function P(S,g){return u||(u=(0,O.E4)(1,1)),S!=m&&(u.font=S,m=u.font),u.measureText(g)}function D(S,g){return P(S,g).width}function w(S,g,f){if(g in f)return f[g];const M=g.split("\n").reduce((U,W)=>Math.max(U,D(S,W)),0);return f[g]=M,M}function G(S,g){const f=[],M=[],U=[];let W=0,q=0,$=0,z=0;for(let at=0,J=g.length;at<=J;at+=2){const it=g[at];if("\n"===it||at===J){W=Math.max(W,q),U.push(q),q=0,$+=z;continue}const et=g[at+1]||S.font,lt=D(et,it);f.push(lt),q+=lt;const ct=v(et);M.push(ct),z=Math.max(z,ct)}return{width:W,height:$,widths:f,heights:M,lineWidths:U}}function K(S,g,f,M,U,W,q,$,z,at,J){S.save(),1!==f&&(S.globalAlpha*=f),g&&S.setTransform.apply(S,g),M.contextInstructions?(S.translate(z,at),S.scale(J[0],J[1]),function B(S,g){const f=S.contextInstructions;for(let M=0,U=f.length;M<U;M+=2)Array.isArray(f[M+1])?g[f[M]].apply(g,f[M+1]):g[f[M]]=f[M+1]}(M,S)):J[0]<0||J[1]<0?(S.translate(z,at),S.scale(J[0],J[1]),S.drawImage(M,U,W,q,$,0,0,q,$)):S.drawImage(M,U,W,q,$,z,at,q*J[0],$*J[1]),S.restore()}},6206:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>s});var Z=l(1366),T=l(332),N=l(944),O=l(7877),y=l(1063),I=l(5909),C=l(9351),L=l(5106);const s=class p extends N.Z{constructor(t,e,d,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=d,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map(function(d){return d*e})}appendFlatPointCoordinates(t,e){const d=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,a=this.coordinates;let c=a.length;for(let i=0,u=t.length;i<u;i+=e)n[0]=t[i],n[1]=t[i+1],(0,y.b8)(d,n)&&(a[c++]=n[0],a[c++]=n[1]);return c}appendFlatLineCoordinates(t,e,d,n,a,c){const i=this.coordinates;let u=i.length;const m=this.getBufferedMaxExtent();c&&(e+=n);let _=t[e],R=t[e+1];const v=this.tmpCoordinate_;let D,w,G,P=!0;for(D=e+n;D<d;D+=n)v[0]=t[D],v[1]=t[D+1],G=(0,y.pX)(m,v),G!==w?(P&&(i[u++]=_,i[u++]=R,P=!1),i[u++]=v[0],i[u++]=v[1]):G===T.Z.INTERSECTING?(i[u++]=v[0],i[u++]=v[1],P=!1):P=!0,_=v[0],R=v[1],w=G;return(a&&P||D===e+n)&&(i[u++]=_,i[u++]=R),u}drawCustomCoordinates_(t,e,d,n,a){for(let c=0,i=d.length;c<i;++c){const u=d[c],m=this.appendFlatLineCoordinates(t,e,u,n,!1,!1);a.push(m),e=u}return e}drawCustom(t,e,d,n){this.beginGeometry(t,e);const a=t.getType(),c=t.getStride(),i=this.coordinates.length;let u,m,_,R,v;switch(a){case"MultiPolygon":u=t.getOrientedFlatCoordinates(),R=[];const P=t.getEndss();v=0;for(let D=0,w=P.length;D<w;++D){const G=[];v=this.drawCustomCoordinates_(u,v,P[D],c,G),R.push(G)}this.instructions.push([Z.ZP.CUSTOM,i,R,t,d,L.ug]),this.hitDetectionInstructions.push([Z.ZP.CUSTOM,i,R,t,n||d,L.ug]);break;case"Polygon":case"MultiLineString":_=[],u="Polygon"==a?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),v=this.drawCustomCoordinates_(u,0,t.getEnds(),c,_),this.instructions.push([Z.ZP.CUSTOM,i,_,t,d,L.o1]),this.hitDetectionInstructions.push([Z.ZP.CUSTOM,i,_,t,n||d,L.o1]);break;case"LineString":case"Circle":u=t.getFlatCoordinates(),m=this.appendFlatLineCoordinates(u,0,u.length,c,!1,!1),this.instructions.push([Z.ZP.CUSTOM,i,m,t,d,L.Ml]),this.hitDetectionInstructions.push([Z.ZP.CUSTOM,i,m,t,n||d,L.Ml]);break;case"MultiPoint":u=t.getFlatCoordinates(),m=this.appendFlatPointCoordinates(u,c),m>i&&(this.instructions.push([Z.ZP.CUSTOM,i,m,t,d,L.Ml]),this.hitDetectionInstructions.push([Z.ZP.CUSTOM,i,m,t,n||d,L.Ml]));break;case"Point":u=t.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),m=this.coordinates.length,this.instructions.push([Z.ZP.CUSTOM,i,m,t,d]),this.hitDetectionInstructions.push([Z.ZP.CUSTOM,i,m,t,n||d])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[Z.ZP.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Z.ZP.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const d=t.length;let n,a,c=-1;for(e=0;e<d;++e)n=t[e],a=n[0],a==Z.ZP.END_GEOMETRY?c=e:a==Z.ZP.BEGIN_GEOMETRY&&(n[2]=e,(0,C.FZ)(this.hitDetectionInstructions,c,e),c=-1)}setFillStrokeStyle(t,e){const d=this.state;if(t){const n=t.getColor();d.fillStyle=(0,O.y)(n||I.bL)}else d.fillStyle=void 0;if(e){const n=e.getColor();d.strokeStyle=(0,O.y)(n||I.Tx);const a=e.getLineCap();d.lineCap=void 0!==a?a:I.mb;const c=e.getLineDash();d.lineDash=c?c.slice():I.X9;const i=e.getLineDashOffset();d.lineDashOffset=i||I.He;const u=e.getLineJoin();d.lineJoin=void 0!==u?u:I.rc;const m=e.getWidth();d.lineWidth=void 0!==m?m:I.yC;const _=e.getMiterLimit();d.miterLimit=void 0!==_?_:I.V4,d.lineWidth>this.maxLineWidth&&(this.maxLineWidth=d.lineWidth,this.bufferedMaxExtent_=null)}else d.strokeStyle=void 0,d.lineCap=void 0,d.lineDash=null,d.lineDashOffset=void 0,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0}createFill(t){const e=t.fillStyle,d=[Z.ZP.SET_FILL_STYLE,e];return"string"!=typeof e&&d.push(!0),d}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[Z.ZP.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const d=t.fillStyle;("string"!=typeof d||t.currentFillStyle!=d)&&(void 0!==d&&this.instructions.push(e.call(this,t)),t.currentFillStyle=d)}updateStrokeStyle(t,e){const d=t.strokeStyle,n=t.lineCap,a=t.lineDash,c=t.lineDashOffset,i=t.lineJoin,u=t.lineWidth,m=t.miterLimit;(t.currentStrokeStyle!=d||t.currentLineCap!=n||a!=t.currentLineDash&&!(0,C.fS)(t.currentLineDash,a)||t.currentLineDashOffset!=c||t.currentLineJoin!=i||t.currentLineWidth!=u||t.currentMiterLimit!=m)&&(void 0!==d&&e.call(this,t),t.currentStrokeStyle=d,t.currentLineCap=n,t.currentLineDash=a,t.currentLineDashOffset=c,t.currentLineJoin=i,t.currentLineWidth=u,t.currentMiterLimit=m)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[Z.ZP.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,y.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,y.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},7027:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>d});var Z=l(6206),T=l(1366);var y=l(5909);var L=l(8603);const s=class p extends Z.Z{constructor(a,c,i,u){super(a,c,i,u)}drawFlatCoordinatess_(a,c,i,u){const m=this.state,_=void 0!==m.fillStyle,R=void 0!==m.strokeStyle,v=i.length;this.instructions.push(T.$O),this.hitDetectionInstructions.push(T.$O);for(let P=0;P<v;++P){const D=i[P],w=this.coordinates.length,G=this.appendFlatLineCoordinates(a,c,D,u,!0,!R),V=[T.ZP.MOVE_TO_LINE_TO,w,G];this.instructions.push(V),this.hitDetectionInstructions.push(V),R&&(this.instructions.push(T.s3),this.hitDetectionInstructions.push(T.s3)),c=D}return _&&(this.instructions.push(T.gO),this.hitDetectionInstructions.push(T.gO)),R&&(this.instructions.push(T.Yc),this.hitDetectionInstructions.push(T.Yc)),c}drawCircle(a,c){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(a,c),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([T.ZP.SET_FILL_STYLE,y.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([T.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const _=a.getFlatCoordinates(),R=a.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(_,0,_.length,R,!1,!1);const P=[T.ZP.CIRCLE,v];this.instructions.push(T.$O,P),this.hitDetectionInstructions.push(T.$O,P),void 0!==i.fillStyle&&(this.instructions.push(T.gO),this.hitDetectionInstructions.push(T.gO)),void 0!==i.strokeStyle&&(this.instructions.push(T.Yc),this.hitDetectionInstructions.push(T.Yc)),this.endGeometry(c)}drawPolygon(a,c){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(a,c),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([T.ZP.SET_FILL_STYLE,y.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([T.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const _=a.getEnds(),R=a.getOrientedFlatCoordinates(),v=a.getStride();this.drawFlatCoordinatess_(R,0,_,v),this.endGeometry(c)}drawMultiPolygon(a,c){const i=this.state;if(void 0===i.fillStyle&&void 0===i.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(a,c),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([T.ZP.SET_FILL_STYLE,y.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([T.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const _=a.getEndss(),R=a.getOrientedFlatCoordinates(),v=a.getStride();let P=0;for(let D=0,w=_.length;D<w;++D)P=this.drawFlatCoordinatess_(R,P,_[D],v);this.endGeometry(c)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const a=this.tolerance;if(0!==a){const c=this.coordinates;for(let i=0,u=c.length;i<u;++i)c[i]=(0,L.uZ)(c[i],a)}return super.finish()}setFillStrokeStyles_(){const a=this.state;void 0!==a.fillStyle&&this.updateFillStyle(a,this.createFill),void 0!==a.strokeStyle&&this.updateStrokeStyle(a,this.applyStroke)}};var o=l(6895);const t={Circle:s,Default:Z.Z,Image:class N extends Z.Z{constructor(a,c,i,u){super(a,c,i,u),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(a,c){if(!this.image_)return;this.beginGeometry(a,c);const i=a.getFlatCoordinates(),u=a.getStride(),m=this.coordinates.length,_=this.appendFlatPointCoordinates(i,u);this.instructions.push([T.ZP.DRAW_IMAGE,m,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([T.ZP.DRAW_IMAGE,m,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(c)}drawMultiPoint(a,c){if(!this.image_)return;this.beginGeometry(a,c);const i=a.getFlatCoordinates(),u=a.getStride(),m=this.coordinates.length,_=this.appendFlatPointCoordinates(i,u);this.instructions.push([T.ZP.DRAW_IMAGE,m,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([T.ZP.DRAW_IMAGE,m,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(c)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(a,c){const i=a.getAnchor(),u=a.getSize(),m=a.getOrigin();this.imagePixelRatio_=a.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=a.getHitDetectionImage(),this.image_=a.getImage(this.pixelRatio),this.height_=u[1],this.opacity_=a.getOpacity(),this.originX_=m[0],this.originY_=m[1],this.rotateWithView_=a.getRotateWithView(),this.rotation_=a.getRotation(),this.scale_=a.getScaleArray(),this.width_=u[0],this.declutterMode_=a.getDeclutterMode(),this.declutterImageWithText_=c}},LineString:class I extends Z.Z{constructor(a,c,i,u){super(a,c,i,u)}drawFlatCoordinates_(a,c,i,u){const m=this.coordinates.length,_=this.appendFlatLineCoordinates(a,c,i,u,!1,!1),R=[T.ZP.MOVE_TO_LINE_TO,m,_];return this.instructions.push(R),this.hitDetectionInstructions.push(R),i}drawLineString(a,c){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(a,c),this.hitDetectionInstructions.push([T.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,y.X9,y.He],T.$O);const _=a.getFlatCoordinates(),R=a.getStride();this.drawFlatCoordinates_(_,0,_.length,R),this.hitDetectionInstructions.push(T.Yc),this.endGeometry(c)}drawMultiLineString(a,c){const i=this.state;if(void 0===i.strokeStyle||void 0===i.lineWidth)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(a,c),this.hitDetectionInstructions.push([T.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T.$O);const _=a.getEnds(),R=a.getFlatCoordinates(),v=a.getStride();let P=0;for(let D=0,w=_.length;D<w;++D)P=this.drawFlatCoordinates_(R,P,_[D],v);this.hitDetectionInstructions.push(T.Yc),this.endGeometry(c)}finish(){const a=this.state;return null!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&this.instructions.push(T.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(a){null!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&(this.instructions.push(T.Yc),a.lastStroke=this.coordinates.length),a.lastStroke=0,super.applyStroke(a),this.instructions.push(T.$O)}},Polygon:s,Text:o.Z},d=class e{constructor(a,c,i,u){this.tolerance_=a,this.maxExtent_=c,this.pixelRatio_=u,this.resolution_=i,this.buildersByZIndex_={}}finish(){const a={};for(const c in this.buildersByZIndex_){a[c]=a[c]||{};const i=this.buildersByZIndex_[c];for(const u in i){const m=i[u].finish();a[c][u]=m}}return a}getBuilder(a,c){const i=void 0!==a?a.toString():"0";let u=this.buildersByZIndex_[i];void 0===u&&(u={},this.buildersByZIndex_[i]=u);let m=u[c];return void 0===m&&(m=new(0,t[c])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),u[c]=m),m}}},641:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>V});var Z=l(1366),T=l(6895),N=l(3863),O=l(1063),y=l(5909),I=l(1775),C=l(7375);function L(K,B,S,g,f,M,U,W,q,$,z,at){let J=K[B],it=K[B+1],et=0,lt=0,ct=0,Rt=0;function Tt(){et=J,lt=it,J=K[B+=g],it=K[B+1],Rt+=ct,ct=Math.sqrt((J-et)*(J-et)+(it-lt)*(it-lt))}do{Tt()}while(B<S-g&&Rt+ct<M);let Lt=0===ct?0:(M-Rt)/ct;const St=(0,I.t7)(et,J,Lt),wt=(0,I.t7)(lt,it,Lt),jt=B-g,F=Rt,Q=M+W*q($,f,z);for(;B<S-g&&Rt+ct<Q;)Tt();Lt=0===ct?0:(Q-Rt)/ct;const nt=(0,I.t7)(et,J,Lt),ht=(0,I.t7)(lt,it,Lt);let It;if(at){const Mt=[St,wt,nt,ht];(0,C.U1)(Mt,0,4,2,at,Mt,Mt),It=Mt[0]>Mt[2]}else It=St>nt;const Dt=Math.PI,At=[],Gt=jt+g===B;let Ut;if(ct=0,Rt=F,J=K[B=jt],it=K[B+1],Gt)return Tt(),Ut=Math.atan2(it-lt,J-et),It&&(Ut+=Ut>0?-Dt:Dt),At[0]=[(nt+St)/2,(ht+wt)/2,(Q-M)/2,Ut,f],At;for(let Mt=0,Ht=(f=f.replace(/\n/g," ")).length;Mt<Ht;){Tt();let $t=Math.atan2(it-lt,J-et);if(It&&($t+=$t>0?-Dt:Dt),void 0!==Ut){let fe=$t-Ut;if(fe+=fe>Dt?-2*Dt:fe<-Dt?2*Dt:0,Math.abs(fe)>U)return null}Ut=$t;const zt=Mt;let te=0;for(;Mt<Ht;++Mt){const Pe=W*q($,f[It?Ht-Mt-1:Mt],z);if(B+g<S&&Rt+ct<M+te+Pe/2)break;te+=Pe}if(Mt===zt)continue;const ae=It?f.substring(Ht-zt,Ht-Mt):f.substring(zt,Mt);Lt=0===ct?0:(M+te/2-Rt)/ct;const Ct=(0,I.t7)(et,J,Lt),ue=(0,I.t7)(lt,it,Lt);At.push([Ct,ue,te/2,$t,ae]),M+=te}return At}var p=l(9351),s=l(6648);const o=(0,O.lJ)(),t=[],e=[],d=[],n=[];function a(K){return K[3].declutterBox}const c=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function i(K,B){return("start"===B||"end"===B)&&!c.test(K)&&(B="start"===B?"left":"right"),T.I[B]}function u(K,B,S){return S>0&&K.push("\n",""),K.push(B,""),K}const _=class m{constructor(B,S,g,f){this.overlaps=g,this.pixelRatio=S,this.resolution=B,this.instructions=f.instructions,this.coordinates=f.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,N.Ue)(),this.hitDetectionInstructions=f.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=f.fillStates||{},this.strokeStates=f.strokeStates||{},this.textStates=f.textStates||{},this.widths_={},this.labels_={}}createLabel(B,S,g,f){const M=B+S+g+f;if(this.labels_[M])return this.labels_[M];const U=f?this.strokeStates[f]:null,W=g?this.fillStates[g]:null,q=this.textStates[S],$=this.pixelRatio,z=[q.scale[0]*$,q.scale[1]*$],at=Array.isArray(B),J=q.justify?T.I[q.justify]:i(Array.isArray(B)?B[0]:B,q.textAlign||y.PH),it=f&&U.lineWidth?U.lineWidth:0,et=at?B:B.split("\n").reduce(u,[]),{width:lt,height:ct,widths:Rt,heights:Tt,lineWidths:Lt}=(0,y.Zw)(q,et),St=lt+it,wt=[],jt=(St+2)*z[0],F=(ct+it)*z[1],Q={width:jt<0?Math.floor(jt):Math.ceil(jt),height:F<0?Math.floor(F):Math.ceil(F),contextInstructions:wt};(1!=z[0]||1!=z[1])&&wt.push("scale",z),f&&(wt.push("strokeStyle",U.strokeStyle),wt.push("lineWidth",it),wt.push("lineCap",U.lineCap),wt.push("lineJoin",U.lineJoin),wt.push("miterLimit",U.miterLimit),wt.push("setLineDash",[U.lineDash]),wt.push("lineDashOffset",U.lineDashOffset)),g&&wt.push("fillStyle",W.fillStyle),wt.push("textBaseline","middle"),wt.push("textAlign","center");const nt=.5-J;let ht=J*St+nt*it;const It=[],Dt=[];let Ht,At=0,Gt=0,Ut=0,Mt=0;for(let $t=0,zt=et.length;$t<zt;$t+=2){const te=et[$t];if("\n"===te){Gt+=At,At=0,ht=J*St+nt*it,++Mt;continue}const ae=et[$t+1]||q.font;ae!==Ht&&(f&&It.push("font",ae),g&&Dt.push("font",ae),Ht=ae),At=Math.max(At,Tt[Ut]);const Ct=[te,ht+nt*Rt[Ut]+J*(Rt[Ut]-Lt[Mt]),.5*(it+At)+Gt];ht+=Rt[Ut],f&&It.push("strokeText",Ct),g&&Dt.push("fillText",Ct),++Ut}return Array.prototype.push.apply(wt,It),Array.prototype.push.apply(wt,Dt),this.labels_[M]=Q,Q}replayTextBackground_(B,S,g,f,M,U,W){B.beginPath(),B.moveTo.apply(B,S),B.lineTo.apply(B,g),B.lineTo.apply(B,f),B.lineTo.apply(B,M),B.lineTo.apply(B,S),U&&(this.alignFill_=U[2],this.fill_(B)),W&&(this.setStrokeStyle_(B,W),B.stroke())}calculateImageOrLabelDimensions_(B,S,g,f,M,U,W,q,$,z,at,J,it,et,lt,ct){let Rt=g-(W*=J[0]),Tt=f-(q*=J[1]);const Lt=M+$>B?B-$:M,St=U+z>S?S-z:U,wt=et[3]+Lt*J[0]+et[1],jt=et[0]+St*J[1]+et[2],F=Rt-et[3],Q=Tt-et[0];let nt;return(lt||0!==at)&&(t[0]=F,n[0]=F,t[1]=Q,e[1]=Q,e[0]=F+wt,d[0]=e[0],d[1]=Q+jt,n[1]=d[1]),0!==at?(nt=(0,N.qC)((0,N.Ue)(),g,f,1,1,at,-g,-f),(0,N.nn)(nt,t),(0,N.nn)(nt,e),(0,N.nn)(nt,d),(0,N.nn)(nt,n),(0,O.T9)(Math.min(t[0],e[0],d[0],n[0]),Math.min(t[1],e[1],d[1],n[1]),Math.max(t[0],e[0],d[0],n[0]),Math.max(t[1],e[1],d[1],n[1]),o)):(0,O.T9)(Math.min(F,F+wt),Math.min(Q,Q+jt),Math.max(F,F+wt),Math.max(Q,Q+jt),o),it&&(Rt=Math.round(Rt),Tt=Math.round(Tt)),{drawImageX:Rt,drawImageY:Tt,drawImageW:Lt,drawImageH:St,originX:$,originY:z,declutterBox:{minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:ct},canvasTransform:nt,scale:J}}replayImageOrLabel_(B,S,g,f,M,U,W){const $=f.declutterBox,z=B.canvas,at=W?W[2]*f.scale[0]/2:0;return $.minX-at<=z.width/S&&$.maxX+at>=0&&$.minY-at<=z.height/S&&$.maxY+at>=0&&(!(!U&&!W)&&this.replayTextBackground_(B,t,e,d,n,U,W),(0,y._f)(B,f.canvasTransform,M,g,f.originX,f.originY,f.drawImageW,f.drawImageH,f.drawImageX,f.drawImageY,f.scale)),!0}fill_(B){if(this.alignFill_){const S=(0,N.nn)(this.renderedTransform_,[0,0]),g=512*this.pixelRatio;B.save(),B.translate(S[0]%g,S[1]%g),B.rotate(this.viewRotation_)}B.fill(),this.alignFill_&&B.restore()}setStrokeStyle_(B,S){B.strokeStyle=S[1],B.lineWidth=S[2],B.lineCap=S[3],B.lineJoin=S[4],B.miterLimit=S[5],B.lineDashOffset=S[7],B.setLineDash(S[6])}drawLabelWithPointPlacement_(B,S,g,f){const M=this.textStates[S],U=this.createLabel(B,S,f,g),W=this.strokeStates[g],q=this.pixelRatio,$=i(Array.isArray(B)?B[0]:B,M.textAlign||y.PH),z=T.I[M.textBaseline||y.ru],at=W&&W.lineWidth?W.lineWidth:0;return{label:U,anchorX:$*(U.width/q-2*M.scale[0])+2*(.5-$)*at,anchorY:z*U.height/q+2*(.5-z)*at}}execute_(B,S,g,f,M,U,W,q){let $;this.pixelCoordinates_&&(0,p.fS)(g,this.renderedTransform_)?$=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),$=(0,C.vT)(this.coordinates,0,this.coordinates.length,2,g,this.pixelCoordinates_),(0,N.lk)(this.renderedTransform_,g));let z=0;const at=f.length;let it,et,lt,ct,Rt,Tt,Lt,St,wt,jt,F,Q,J=0,nt=0,ht=0,It=null,Dt=null;const At=this.coordinateCache_,Gt=this.viewRotation_,Ut=Math.round(1e12*Math.atan2(-g[1],g[0]))/1e12,Mt={context:B,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Gt},Ht=this.instructions!=f||this.overlaps?0:200;let $t,zt,te,ae;for(;z<at;){const Ct=f[z];switch(Ct[0]){case Z.ZP.BEGIN_GEOMETRY:$t=Ct[1],ae=Ct[3],$t.getGeometry()?void 0===W||(0,O.kK)(W,ae.getExtent())?++z:z=Ct[2]+1:z=Ct[2];break;case Z.ZP.BEGIN_PATH:nt>Ht&&(this.fill_(B),nt=0),ht>Ht&&(B.stroke(),ht=0),!nt&&!ht&&(B.beginPath(),ct=NaN,Rt=NaN),++z;break;case Z.ZP.CIRCLE:J=Ct[1];const fe=$[J],Pe=$[J+1],Re=$[J+2]-fe,tt=$[J+3]-Pe,st=Math.sqrt(Re*Re+tt*tt);B.moveTo(fe+st,Pe),B.arc(fe,Pe,st,0,2*Math.PI,!0),++z;break;case Z.ZP.CLOSE_PATH:B.closePath(),++z;break;case Z.ZP.CUSTOM:J=Ct[1],it=Ct[2];const mt=Ct[4],Pt=6==Ct.length?Ct[5]:void 0;Mt.geometry=Ct[3],Mt.feature=$t,z in At||(At[z]=[]);const bt=At[z];Pt?Pt($,J,it,2,bt):(bt[0]=$[J],bt[1]=$[J+1],bt.length=2),mt(bt,Mt),++z;break;case Z.ZP.DRAW_IMAGE:J=Ct[1],it=Ct[2],St=Ct[3],et=Ct[4],lt=Ct[5];let Nt=Ct[6];const Jt=Ct[7],Yt=Ct[8],he=Ct[9],Ee=Ct[10];let Ie=Ct[11];const ye=Ct[12];let Ae=Ct[13];const Xe=Ct[14],Fe=Ct[15];if(!St&&Ct.length>=20){wt=Ct[19],jt=Ct[20],F=Ct[21],Q=Ct[22];const pe=this.drawLabelWithPointPlacement_(wt,jt,F,Q);St=pe.label,Ct[3]=St,et=(pe.anchorX-Ct[23])*this.pixelRatio,Ct[4]=et,lt=(pe.anchorY-Ct[24])*this.pixelRatio,Ct[5]=lt,Nt=St.height,Ct[6]=Nt,Ae=St.width,Ct[13]=Ae}let Je,nn,be,Ne;Ct.length>25&&(Je=Ct[25]),Ct.length>17?(nn=Ct[16],be=Ct[17],Ne=Ct[18]):(nn=y.oB,be=!1,Ne=!1),Ee&&Ut?Ie+=Gt:!Ee&&!Ut&&(Ie-=Gt);let En=0;for(;J<it;J+=2){if(Je&&Je[En++]<Ae/this.pixelRatio)continue;const pe=this.calculateImageOrLabelDimensions_(St.width,St.height,$[J],$[J+1],Ae,Nt,et,lt,Yt,he,Ie,ye,M,nn,be||Ne,$t),Ge=[B,S,St,pe,Jt,be?It:null,Ne?Dt:null];if(q){if("none"===Xe)continue;if("obstacle"===Xe){q.insert(pe.declutterBox);continue}{let xe,Oe;if(Fe){const Ce=it-J;if(!Fe[Ce]){Fe[Ce]=Ge;continue}if(xe=Fe[Ce],delete Fe[Ce],Oe=a(xe),q.collides(Oe))continue}if(q.collides(pe.declutterBox))continue;xe&&(q.insert(Oe),this.replayImageOrLabel_.apply(this,xe)),q.insert(pe.declutterBox)}}this.replayImageOrLabel_.apply(this,Ge)}++z;break;case Z.ZP.DRAW_CHARS:const _n=Ct[1],sn=Ct[2],rn=Ct[3],Me=Ct[4];Q=Ct[5];const pn=Ct[6],Be=Ct[7],on=Ct[8];F=Ct[9];const an=Ct[10];wt=Ct[11],jt=Ct[12];const Xt=[Ct[13],Ct[13]],We=this.textStates[jt],je=We.font,ze=[We.scale[0]*Be,We.scale[1]*Be];let ke;je in this.widths_?ke=this.widths_[je]:(ke={},this.widths_[je]=ke);const ln=(0,s.W)($,_n,sn,2),Qe=Math.abs(ze[0])*(0,y.Kd)(je,wt,ke);if(Me||Qe<=ln){const xe=L($,_n,sn,2,wt,(ln-Qe)*T.I[this.textStates[jt].textAlign],pn,Math.abs(ze[0]),y.Kd,je,ke,Ut?0:this.viewRotation_);t:if(xe){const Oe=[];let Ce,Ue,Ot,Zt,_e;if(F)for(Ce=0,Ue=xe.length;Ce<Ue;++Ce){_e=xe[Ce],Ot=_e[4],Zt=this.createLabel(Ot,jt,"",F),et=_e[2]+(ze[0]<0?-an:an),lt=rn*Zt.height+2*(.5-rn)*an*ze[1]/ze[0]-on;const Se=this.calculateImageOrLabelDimensions_(Zt.width,Zt.height,_e[0],_e[1],Zt.width,Zt.height,et,lt,0,0,_e[3],Xt,!1,y.oB,!1,$t);if(q&&q.collides(Se.declutterBox))break t;Oe.push([B,S,Zt,Se,1,null,null])}if(Q)for(Ce=0,Ue=xe.length;Ce<Ue;++Ce){_e=xe[Ce],Ot=_e[4],Zt=this.createLabel(Ot,jt,Q,""),et=_e[2],lt=rn*Zt.height-on;const Se=this.calculateImageOrLabelDimensions_(Zt.width,Zt.height,_e[0],_e[1],Zt.width,Zt.height,et,lt,0,0,_e[3],Xt,!1,y.oB,!1,$t);if(q&&q.collides(Se.declutterBox))break t;Oe.push([B,S,Zt,Se,1,null,null])}q&&q.load(Oe.map(a));for(let Se=0,qe=Oe.length;Se<qe;++Se)this.replayImageOrLabel_.apply(this,Oe[Se])}}++z;break;case Z.ZP.END_GEOMETRY:if(void 0!==U){$t=Ct[1];const pe=U($t,ae);if(pe)return pe}++z;break;case Z.ZP.FILL:Ht?nt++:this.fill_(B),++z;break;case Z.ZP.MOVE_TO_LINE_TO:for(J=Ct[1],it=Ct[2],zt=$[J],te=$[J+1],Tt=zt+.5|0,Lt=te+.5|0,(Tt!==ct||Lt!==Rt)&&(B.moveTo(zt,te),ct=Tt,Rt=Lt),J+=2;J<it;J+=2)zt=$[J],te=$[J+1],Tt=zt+.5|0,Lt=te+.5|0,(J==it-2||Tt!==ct||Lt!==Rt)&&(B.lineTo(zt,te),ct=Tt,Rt=Lt);++z;break;case Z.ZP.SET_FILL_STYLE:It=Ct,this.alignFill_=Ct[2],nt&&(this.fill_(B),nt=0,ht&&(B.stroke(),ht=0)),B.fillStyle=Ct[1],++z;break;case Z.ZP.SET_STROKE_STYLE:Dt=Ct,ht&&(B.stroke(),ht=0),this.setStrokeStyle_(B,Ct),++z;break;case Z.ZP.STROKE:Ht?ht++:B.stroke(),++z;break;default:++z}}nt&&this.fill_(B),ht&&B.stroke()}execute(B,S,g,f,M,U){this.viewRotation_=f,this.execute_(B,S,g,this.instructions,M,void 0,void 0,U)}executeHitDetection(B,S,g,f,M){return this.viewRotation_=g,this.execute_(B,1,S,this.hitDetectionInstructions,!0,f,M)}};var R=l(6694),v=l(5230);const P=["Polygon","Circle","LineString","Image","Text","Default"],w={},V=class D{constructor(B,S,g,f,M,U){this.maxExtent_=B,this.overlaps_=f,this.pixelRatio_=g,this.resolution_=S,this.renderBuffer_=U,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,N.Ue)(),this.createExecutors_(M)}clip(B,S){const g=this.getClipCoords(S);B.beginPath(),B.moveTo(g[0],g[1]),B.lineTo(g[2],g[3]),B.lineTo(g[4],g[5]),B.lineTo(g[6],g[7]),B.clip()}createExecutors_(B){for(const S in B){let g=this.executorsByZIndex_[S];void 0===g&&(g={},this.executorsByZIndex_[S]=g);const f=B[S];for(const M in f)g[M]=new _(this.resolution_,this.pixelRatio_,this.overlaps_,f[M])}}hasExecutors(B){for(const S in this.executorsByZIndex_){const g=this.executorsByZIndex_[S];for(let f=0,M=B.length;f<M;++f)if(B[f]in g)return!0}return!1}forEachFeatureAtCoordinate(B,S,g,f,M,U){const W=2*(f=Math.round(f))+1,q=(0,N.qC)(this.hitDetectionTransform_,f+.5,f+.5,1/S,-1/S,-g,-B[0],-B[1]),$=!this.hitDetectionContext_;$&&(this.hitDetectionContext_=(0,R.E4)(W,W));const z=this.hitDetectionContext_;let at;z.canvas.width!==W||z.canvas.height!==W?(z.canvas.width=W,z.canvas.height=W):$||z.clearRect(0,0,W,W),void 0!==this.renderBuffer_&&(at=(0,O.lJ)(),(0,O.Wj)(at,B),(0,O.f3)(at,S*(this.renderBuffer_+f),at));const J=function G(K){if(void 0!==w[K])return w[K];const B=2*K+1,S=K*K,g=new Array(S+1);for(let M=0;M<=K;++M)for(let U=0;U<=K;++U){const W=M*M+U*U;if(W>S)break;let q=g[W];q||(q=[],g[W]=q),q.push(4*((K+M)*B+(K+U))+3),M>0&&q.push(4*((K-M)*B+(K+U))+3),U>0&&(q.push(4*((K+M)*B+(K-U))+3),M>0&&q.push(4*((K-M)*B+(K-U))+3))}const f=[];for(let M=0,U=g.length;M<U;++M)g[M]&&f.push(...g[M]);return w[K]=f,f}(f);let it;function et(wt,jt){const F=z.getImageData(0,0,W,W).data;for(let Q=0,nt=J.length;Q<nt;Q++)if(F[J[Q]]>0){if(!U||"Image"!==it&&"Text"!==it||U.includes(wt)){const ht=(J[Q]-3)/4,It=f-ht%W,Dt=f-(ht/W|0),At=M(wt,jt,It*It+Dt*Dt);if(At)return At}z.clearRect(0,0,W,W);break}}const lt=Object.keys(this.executorsByZIndex_).map(Number);let ct,Rt,Tt,Lt,St;for(lt.sort(p.kK),ct=lt.length-1;ct>=0;--ct){const wt=lt[ct].toString();for(Tt=this.executorsByZIndex_[wt],Rt=P.length-1;Rt>=0;--Rt)if(it=P[Rt],Lt=Tt[it],void 0!==Lt&&(St=Lt.executeHitDetection(z,q,g,et,at),St))return St}}getClipCoords(B){const S=this.maxExtent_;if(!S)return null;const g=S[0],f=S[1],M=S[2],U=S[3],W=[g,f,g,U,M,U,M,f];return(0,C.vT)(W,0,8,2,B,W),W}isEmpty(){return(0,v.x)(this.executorsByZIndex_)}execute(B,S,g,f,M,U,W){const q=Object.keys(this.executorsByZIndex_).map(Number);let $,z,at,J,it,et;for(q.sort(p.kK),this.maxExtent_&&(B.save(),this.clip(B,g)),U=U||P,W&&q.reverse(),$=0,z=q.length;$<z;++$){const lt=q[$].toString();for(it=this.executorsByZIndex_[lt],at=0,J=U.length;at<J;++at)et=it[U[at]],void 0!==et&&et.execute(B,S,g,f,M,W)}this.maxExtent_&&B.restore()}}},4325:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>s});var Z=l(944),T=l(7877),N=l(3863),O=l(5909),y=l(9351),I=l(1063),C=l(7375),L=l(4474);const s=class p extends Z.Z{constructor(t,e,d,n,a,c,i){super(),this.context_=t,this.pixelRatio_=e,this.extent_=d,this.transform_=n,this.viewRotation_=a,this.squaredTolerance_=c,this.userTransform_=i,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,N.Ue)()}drawImages_(t,e,d,n){if(!this.image_)return;const a=(0,C.vT)(t,e,d,n,this.transform_,this.pixelCoordinates_),c=this.context_,i=this.tmpLocalTransform_,u=c.globalAlpha;1!=this.imageOpacity_&&(c.globalAlpha=u*this.imageOpacity_);let m=this.imageRotation_;this.imageRotateWithView_&&(m+=this.viewRotation_);for(let _=0,R=a.length;_<R;_+=2){const v=a[_]-this.imageAnchorX_,P=a[_+1]-this.imageAnchorY_;if(0!==m||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const D=v+this.imageAnchorX_,w=P+this.imageAnchorY_;(0,N.qC)(i,D,w,1,1,m,-D,-w),c.setTransform.apply(c,i),c.translate(D,w),c.scale(this.imageScale_[0],this.imageScale_[1]),c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),c.setTransform(1,0,0,1,0,0)}else c.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,v,P,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(c.globalAlpha=u)}drawText_(t,e,d,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=(0,C.vT)(t,e,d,n,this.transform_,this.pixelCoordinates_),c=this.context_;let i=this.textRotation_;for(this.textRotateWithView_&&(i+=this.viewRotation_);e<d;e+=n){const u=a[e]+this.textOffsetX_,m=a[e+1]+this.textOffsetY_;0!==i||1!=this.textScale_[0]||1!=this.textScale_[1]?(c.translate(u-this.textOffsetX_,m-this.textOffsetY_),c.rotate(i),c.translate(this.textOffsetX_,this.textOffsetY_),c.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&c.strokeText(this.text_,0,0),this.textFillState_&&c.fillText(this.text_,0,0),c.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&c.strokeText(this.text_,u,m),this.textFillState_&&c.fillText(this.text_,u,m))}}moveToLineTo_(t,e,d,n,a){const c=this.context_,i=(0,C.vT)(t,e,d,n,this.transform_,this.pixelCoordinates_);c.moveTo(i[0],i[1]);let u=i.length;a&&(u-=2);for(let m=2;m<u;m+=2)c.lineTo(i[m],i[m+1]);return a&&c.closePath(),d}drawRings_(t,e,d,n){for(let a=0,c=d.length;a<c;++a)e=this.moveToLineTo_(t,e,d[a],n,!0);return e}drawCircle(t){if((0,I.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,L.Kr)(t,this.transform_,this.pixelCoordinates_),d=e[2]-e[0],n=e[3]-e[1],a=Math.sqrt(d*d+n*n),c=this.context_;c.beginPath(),c.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const d=e.getGeometryFunction()(t);!d||!(0,I.kK)(this.extent_,d.getExtent())||(this.setStyle(e),this.drawGeometry(d))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let d=0,n=e.length;d<n;++d)this.drawGeometry(e[d])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),d=t.getStride();this.image_&&this.drawImages_(e,0,e.length,d),""!==this.text_&&this.drawText_(e,0,e.length,d)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),d=t.getStride();this.image_&&this.drawImages_(e,0,e.length,d),""!==this.text_&&this.drawText_(e,0,e.length,d)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,d=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(d,0,d.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,I.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const d=this.context_,n=t.getFlatCoordinates();let a=0;const c=t.getEnds(),i=t.getStride();d.beginPath();for(let u=0,m=c.length;u<m;++u)a=this.moveToLineTo_(n,a,c[u],i,!1);d.stroke()}if(""!==this.text_){const d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,d=t.getOrientedFlatCoordinates();let n=0;const a=t.getEndss(),c=t.getStride();e.beginPath();for(let i=0,u=a.length;i<u;++i)n=this.drawRings_(d,n,a[i],c);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,d=this.contextFillState_;d?d.fillStyle!=t.fillStyle&&(d.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,d=this.contextStrokeState_;d?(d.lineCap!=t.lineCap&&(d.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,y.fS)(d.lineDash,t.lineDash)||e.setLineDash(d.lineDash=t.lineDash),d.lineDashOffset!=t.lineDashOffset&&(d.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),d.lineJoin!=t.lineJoin&&(d.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),d.lineWidth!=t.lineWidth&&(d.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),d.miterLimit!=t.miterLimit&&(d.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),d.strokeStyle!=t.strokeStyle&&(d.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,d=this.contextTextState_,n=t.textAlign?t.textAlign:O.PH;d?(d.font!=t.font&&(d.font=t.font,e.font=t.font),d.textAlign!=n&&(d.textAlign=n,e.textAlign=n),d.textBaseline!=t.textBaseline&&(d.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const d=t.getColor();this.fillState_={fillStyle:(0,T.y)(d||O.bL)}}else this.fillState_=null;if(e){const d=e.getColor(),n=e.getLineCap(),a=e.getLineDash(),c=e.getLineDashOffset(),i=e.getLineJoin(),u=e.getWidth(),m=e.getMiterLimit(),_=a||O.X9;this.strokeState_={lineCap:void 0!==n?n:O.mb,lineDash:1===this.pixelRatio_?_:_.map(R=>R*this.pixelRatio_),lineDashOffset:(c||O.He)*this.pixelRatio_,lineJoin:void 0!==i?i:O.rc,lineWidth:(void 0!==u?u:O.yC)*this.pixelRatio_,miterLimit:void 0!==m?m:O.V4,strokeStyle:(0,T.y)(d||O.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const d=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*d,this.imageAnchorY_=n[1]*d,this.imageHeight_=e[1]*d,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const c=t.getScaleArray();this.imageScale_=[c[0]*this.pixelRatio_/d,c[1]*this.pixelRatio_/d],this.imageWidth_=e[0]*d}setTextStyle(t){if(t){const e=t.getFill();if(e){const P=e.getColor();this.textFillState_={fillStyle:(0,T.y)(P||O.bL)}}else this.textFillState_=null;const d=t.getStroke();if(d){const P=d.getColor(),D=d.getLineCap(),w=d.getLineDash(),G=d.getLineDashOffset(),V=d.getLineJoin(),K=d.getWidth(),B=d.getMiterLimit();this.textStrokeState_={lineCap:void 0!==D?D:O.mb,lineDash:w||O.X9,lineDashOffset:G||O.He,lineJoin:void 0!==V?V:O.rc,lineWidth:void 0!==K?K:O.yC,miterLimit:void 0!==B?B:O.V4,strokeStyle:(0,T.y)(P||O.Tx)}}else this.textStrokeState_=null;const n=t.getFont(),a=t.getOffsetX(),c=t.getOffsetY(),i=t.getRotateWithView(),u=t.getRotation(),m=t.getScaleArray(),_=t.getText(),R=t.getTextAlign(),v=t.getTextBaseline();this.textState_={font:void 0!==n?n:O.Df,textAlign:void 0!==R?R:O.PH,textBaseline:void 0!==v?v:O.ru},this.text_=void 0!==_?Array.isArray(_)?_.reduce((P,D,w)=>P+(w%2?" ":D),""):_:"",this.textOffsetX_=void 0!==a?this.pixelRatio_*a:0,this.textOffsetY_=void 0!==c?this.pixelRatio_*c:0,this.textRotateWithView_=void 0!==i&&i,this.textRotation_=void 0!==u?u:0,this.textScale_=[this.pixelRatio_*m[0],this.pixelRatio_*m[1]]}else this.text_=""}}},1366:(_t,k,l)=>{"use strict";l.d(k,{$O:()=>O,Yc:()=>N,ZP:()=>I,gO:()=>T,s3:()=>y});const Z={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},T=[Z.FILL],N=[Z.STROKE],O=[Z.BEGIN_PATH],y=[Z.CLOSE_PATH],I=Z},6895:(_t,k,l)=>{"use strict";l.d(k,{I:()=>L,Z:()=>s});var Z=l(6206),T=l(1366),N=l(7877),O=l(5909),y=l(1540),I=l(1063);function C(o,t,e,d,n){let _,R,v,P,D,w,G,V,K,B,a=e,c=e,i=0,u=0,m=e;for(R=e;R<d;R+=n){const S=t[R],g=t[R+1];void 0!==D&&(K=S-D,B=g-w,P=Math.sqrt(K*K+B*B),void 0!==G&&(u+=v,_=Math.acos((G*K+V*B)/(v*P)),_>o&&(u>i&&(i=u,a=m,c=R),u=0,m=R-n)),v=P,G=K,V=B),D=S,w=g}return u+=P,u>i?[m,R]:[a,c]}const L={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},s=class p extends Z.Z{constructor(t,e,d,n){super(t,e,d,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const a=this.textState_;if(""===this.text_||!a||!this.textFillState_&&!this.textStrokeState_)return;const c=this.coordinates;let i=c.length;const u=t.getType();let m=null,_=t.getStride();if("line"!==a.placement||"LineString"!=u&&"MultiLineString"!=u&&"Polygon"!=u&&"MultiPolygon"!=u){let R=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":m=t.getFlatCoordinates();break;case"LineString":m=t.getFlatMidpoint();break;case"Circle":m=t.getCenter();break;case"MultiLineString":m=t.getFlatMidpoints(),_=2;break;case"Polygon":m=t.getFlatInteriorPoint(),a.overflow||R.push(m[2]/this.resolution),_=3;break;case"MultiPolygon":const G=t.getFlatInteriorPoints();m=[];for(let V=0,K=G.length;V<K;V+=3)a.overflow||R.push(G[V+2]/this.resolution),m.push(G[V],G[V+1]);if(0===m.length)return;_=2}const v=this.appendFlatPointCoordinates(m,_);if(v===i)return;if(R&&(v-i)/2!=m.length/_){let G=i/2;R=R.filter((V,K)=>{const B=c[2*(G+K)]===m[K*_]&&c[2*(G+K)+1]===m[K*_+1];return B||--G,B})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let P=a.padding;if(P!=O.oB&&(a.scale[0]<0||a.scale[1]<0)){let G=a.padding[0],V=a.padding[1],K=a.padding[2],B=a.padding[3];a.scale[0]<0&&(V=-V,B=-B),a.scale[1]<0&&(G=-G,K=-K),P=[G,V,K,B]}const D=this.pixelRatio;this.instructions.push([T.ZP.DRAW_IMAGE,i,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,P==O.oB?O.oB:P.map(function(G){return G*D}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]);const w=1/D;this.hitDetectionInstructions.push([T.ZP.DRAW_IMAGE,i,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,void 0,this.declutterImageWithText_,P,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,R]),this.endGeometry(e)}else{if(!(0,I.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let R;if(m=t.getFlatCoordinates(),"LineString"==u)R=[m.length];else if("MultiLineString"==u)R=t.getEnds();else if("Polygon"==u)R=t.getEnds().slice(0,1);else if("MultiPolygon"==u){const w=t.getEndss();R=[];for(let G=0,V=w.length;G<V;++G)R.push(w[G][0])}this.beginGeometry(t,e);const v=a.textAlign;let D,P=0;for(let w=0,G=R.length;w<G;++w){if(null==v){const K=C(a.maxAngle,m,P,R[w],_);P=K[0],D=K[1]}else D=R[w];for(let K=P;K<D;K+=_)c.push(m[K],m[K+1]);const V=c.length;P=R[w],this.drawChars_(i,V),i=V}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,d=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:e.font,textAlign:e.textAlign||O.PH,justify:e.justify,textBaseline:e.textBaseline||O.ru,scale:e.scale});const c=this.fillKey_;d&&(c in this.fillStates||(this.fillStates[c]={fillStyle:d.fillStyle}))}drawChars_(t,e){const d=this.textStrokeState_,n=this.textState_,a=this.strokeKey_,c=this.textKey_,i=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,m=L[n.textBaseline],_=this.textOffsetY_*u,R=this.text_,v=d?d.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([T.ZP.DRAW_CHARS,t,e,m,n.overflow,i,n.maxAngle,u,_,a,v*u,R,c,1]),this.hitDetectionInstructions.push([T.ZP.DRAW_CHARS,t,e,m,n.overflow,i,n.maxAngle,1,_,a,v,R,c,1/u])}setTextStyle(t,e){let d,n,a;if(t){const c=t.getFill();c?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=(0,N.y)(c.getColor()||O.bL)):(n=null,this.textFillState_=n);const i=t.getStroke();if(i){a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const D=i.getLineDash(),w=i.getLineDashOffset(),G=i.getWidth(),V=i.getMiterLimit();a.lineCap=i.getLineCap()||O.mb,a.lineDash=D?D.slice():O.X9,a.lineDashOffset=void 0===w?O.He:w,a.lineJoin=i.getLineJoin()||O.rc,a.lineWidth=void 0===G?O.yC:G,a.miterLimit=void 0===V?O.V4:V,a.strokeStyle=(0,N.y)(i.getColor()||O.Tx)}else a=null,this.textStrokeState_=a;d=this.textState_;const u=t.getFont()||O.Df;(0,O.Qx)(u);const m=t.getScaleArray();d.overflow=t.getOverflow(),d.font=u,d.maxAngle=t.getMaxAngle(),d.placement=t.getPlacement(),d.textAlign=t.getTextAlign(),d.justify=t.getJustify(),d.textBaseline=t.getTextBaseline()||O.ru,d.backgroundFill=t.getBackgroundFill(),d.backgroundStroke=t.getBackgroundStroke(),d.padding=t.getPadding()||O.oB,d.scale=void 0===m?[1,1]:m;const _=t.getOffsetX(),R=t.getOffsetY(),v=t.getRotateWithView(),P=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===_?0:_,this.textOffsetY_=void 0===R?0:R,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===P?0:P,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:(0,y.sq)(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=d.font+d.scale+(d.textAlign||"?")+(d.justify||"?")+(d.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,y.sq)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},4302:(_t,k,l)=>{"use strict";l.d(k,{TU:()=>L,UN:()=>C,ix:()=>p});var Z=l(4325),T=l(4647),N=l(1775),O=l(6694),y=l(1063),I=l(9351);const C=.5;function L(s,o,t,e,d,n,a){const u=(0,O.E4)(s[0]*C,s[1]*C);u.imageSmoothingEnabled=!1;const m=u.canvas,_=new Z.Z(u,C,d,null,a),R=t.length,v=Math.floor(16777215/R),P={};for(let w=1;w<=R;++w){const G=t[w-1],V=G.getStyleFunction()||e;if(!e)continue;let K=V(G,n);if(!K)continue;Array.isArray(K)||(K=[K]);const S="#"+("000000"+(w*v).toString(16)).slice(-6);for(let g=0,f=K.length;g<f;++g){const M=K[g],U=M.getGeometryFunction()(G);if(!U||!(0,y.kK)(d,U.getExtent()))continue;const W=M.clone(),q=W.getFill();q&&q.setColor(S);const $=W.getStroke();$&&($.setColor(S),$.setLineDash(null)),W.setText(void 0);const z=M.getImage();if(z&&0!==z.getOpacity()){const it=z.getImageSize();if(!it)continue;const et=(0,O.E4)(it[0],it[1],void 0,{alpha:!1}),lt=et.canvas;et.fillStyle=S,et.fillRect(0,0,lt.width,lt.height),W.setImage(new T.Z({img:lt,imgSize:it,anchor:z.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:z.getOrigin(),opacity:1,size:z.getSize(),scale:z.getScale(),rotation:z.getRotation(),rotateWithView:z.getRotateWithView()}))}const at=W.getZIndex()||0;let J=P[at];J||(J={},P[at]=J,J.Polygon=[],J.Circle=[],J.LineString=[],J.Point=[]),J[U.getType().replace("Multi","")].push(U,W)}}const D=Object.keys(P).map(Number).sort(I.kK);for(let w=0,G=D.length;w<G;++w){const V=P[D[w]];for(const K in V){const B=V[K];for(let S=0,g=B.length;S<g;S+=2){_.setStyle(B[S+1]);for(let f=0,M=o.length;f<M;++f)_.setTransform(o[f]),_.drawGeometry(B[S])}}}return u.getImageData(0,0,m.width,m.height)}function p(s,o,t){const e=[];if(t){const d=Math.floor(Math.round(s[0])*C),n=Math.floor(Math.round(s[1])*C),a=4*((0,N.uZ)(d,0,t.width-1)+(0,N.uZ)(n,0,t.height-1)*t.width),m=t.data[a+2]+256*(t.data[a+1]+256*t.data[a]),_=Math.floor(16777215/o.length);m&&m%_==0&&e.push(o[m/_-1])}return e}},6769:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>I});var Z=l(8501),T=l(1915),N=l(2742),O=l(1540);const I=class y extends N.Z{constructor(L){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=L,this.declutterExecutorGroup=null}getFeatures(L){return(0,O.O3)()}getData(L){return null}prepareFrame(L){return(0,O.O3)()}renderFrame(L,p){return(0,O.O3)()}loadedTileCallback(L,p,s){L[p]||(L[p]={}),L[p][s.tileCoord.toString()]=s}createLoadedTileFinder(L,p,s){return function(o,t){const e=this.loadedTileCallback.bind(this,s,o);return L.forEachLoadedTile(p,o,t,e)}.bind(this)}forEachFeatureAtCoordinate(L,p,s,o,t){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(L){L.target.getState()===T.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(L){let p=L.getState();return p!=T.Z.LOADED&&p!=T.Z.ERROR&&L.addEventListener(Z.Z.CHANGE,this.boundHandleImageChange_),p==T.Z.IDLE&&(L.load(),p=L.getState()),p==T.Z.LOADED}renderIfReadyAndVisible(){const L=this.getLayer();L&&L.getVisible()&&"ready"===L.getSourceState()&&L.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}},6966:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>e,r:()=>p});var Z=l(6769),T=l(6853),N=l(1206),O=l(3863),y=l(9861),I=l(6694),C=l(9351),L=l(1063);const p=[];let s=null;const e=class t extends Z.Z{constructor(n){super(n),this.container=null,this.tempTransform=(0,O.Ue)(),this.pixelTransform=(0,O.Ue)(),this.inversePixelTransform=(0,O.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(n,a,c){let i;s||function o(){const d=document.createElement("canvas");d.width=1,d.height=1,s=d.getContext("2d")}(),s.clearRect(0,0,1,1);try{s.drawImage(n,a,c,1,1,0,0,1,1),i=s.getImageData(0,0,1,1).data}catch(u){return s=null,null}return i}getBackground(n){let c=this.getLayer().getBackground();return"function"==typeof c&&(c=c(n.viewState.resolution)),c||void 0}useContainer(n,a,c){const i=this.getLayer().getClassName();let u,m;if(n&&n.className===i&&(!c||n&&n.style.backgroundColor&&(0,C.fS)((0,y._2)(n.style.backgroundColor),(0,y._2)(c)))){const _=n.firstElementChild;_ instanceof HTMLCanvasElement&&(m=_.getContext("2d"))}if(m&&m.canvas.style.transform===a?(this.container=n,this.context=m,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){u=document.createElement("div"),u.className=i;let _=u.style;_.position="absolute",_.width="100%",_.height="100%",m=(0,I.E4)();const R=m.canvas;u.appendChild(R),_=R.style,_.position="absolute",_.left="0",_.transformOrigin="top left",this.container=u,this.context=m}!this.containerReused&&c&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=c)}clipUnrotated(n,a,c){const i=(0,L.rL)(c),u=(0,L.Xv)(c),m=(0,L.w$)(c),_=(0,L.hC)(c);(0,O.nn)(a.coordinateToPixelTransform,i),(0,O.nn)(a.coordinateToPixelTransform,u),(0,O.nn)(a.coordinateToPixelTransform,m),(0,O.nn)(a.coordinateToPixelTransform,_);const R=this.inversePixelTransform;(0,O.nn)(R,i),(0,O.nn)(R,u),(0,O.nn)(R,m),(0,O.nn)(R,_),n.save(),n.beginPath(),n.moveTo(Math.round(i[0]),Math.round(i[1])),n.lineTo(Math.round(u[0]),Math.round(u[1])),n.lineTo(Math.round(m[0]),Math.round(m[1])),n.lineTo(Math.round(_[0]),Math.round(_[1])),n.clip()}dispatchRenderEvent_(n,a,c){const i=this.getLayer();if(i.hasListener(n)){const u=new T.Z(n,this.inversePixelTransform,c,a);i.dispatchEvent(u)}}preRender(n,a){this.frameState=a,this.dispatchRenderEvent_(N.Z.PRERENDER,n,a)}postRender(n,a){this.dispatchRenderEvent_(N.Z.POSTRENDER,n,a)}getRenderTransform(n,a,c,i,u,m,_){const P=i/a;return(0,O.qC)(this.tempTransform,u/2,m/2,P,-P,-c,-n[0]+_,-n[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},637:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>e});var Z=l(6966),T=l(6029),N=l(4253),O=l(9039),y=l(2763),I=l(3863),C=l(1063),L=l(7942),p=l(1540),s=l(9351),o=l(1203);const e=class t extends Z.Z{constructor(n){super(n),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,C.lJ)(),this.tmpTileRange_=new O.Z(0,0,0,0)}isDrawableTile(n){const a=this.getLayer(),c=n.getState(),i=a.getUseInterimTilesOnError();return c==y.Z.LOADED||c==y.Z.EMPTY||c==y.Z.ERROR&&!i}getTile(n,a,c,i){const u=i.pixelRatio,m=i.viewState.projection,_=this.getLayer();let v=_.getSource().getTile(n,a,c,u,m);return v.getState()==y.Z.ERROR&&_.getUseInterimTilesOnError()&&_.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(v)||(v=v.getInterimTile()),v}getData(n){const a=this.frameState;if(!a)return null;const c=this.getLayer(),i=(0,I.nn)(a.pixelToCoordinateTransform,n.slice()),u=c.getExtent();if(u&&!(0,C.b8)(u,i))return null;const m=a.pixelRatio,_=a.viewState.projection,R=a.viewState,v=c.getRenderSource(),P=v.getTileGridForProjection(R.projection),D=v.getTilePixelRatio(a.pixelRatio);for(let w=P.getZForResolution(R.resolution);w>=P.getMinZoom();--w){const G=P.getTileCoordForCoordAndZ(i,w),V=v.getTile(w,G[1],G[2],m,_);if(!(V instanceof T.Z||V instanceof N.Z)||V instanceof N.Z&&V.getState()===y.Z.EMPTY)return null;if(V.getState()!==y.Z.LOADED)continue;const K=P.getOrigin(w),B=(0,o.Pq)(P.getTileSize(w)),S=P.getResolution(w),g=Math.floor(D*((i[0]-K[0])/S-G[1]*B[0])),f=Math.floor(D*((K[1]-i[1])/S-G[2]*B[1])),M=Math.round(D*v.getGutterForProjection(R.projection));return this.getImageData(V.getImage(),g+M,f+M)}return null}loadedTileCallback(n,a,c){return!!this.isDrawableTile(c)&&super.loadedTileCallback(n,a,c)}prepareFrame(n){return!!this.getLayer().getSource()}renderFrame(n,a){const c=n.layerStatesArray[n.layerIndex],i=n.viewState,u=i.projection,m=i.resolution,_=i.center,R=i.rotation,v=n.pixelRatio,P=this.getLayer(),D=P.getSource(),w=D.getRevision(),G=D.getTileGridForProjection(u),V=G.getZForResolution(m,D.zDirection),K=G.getResolution(V);let B=n.extent;const S=n.viewState.resolution,g=D.getTilePixelRatio(v),f=Math.round((0,C.dz)(B)/S*v),M=Math.round((0,C.Cr)(B)/S*v),U=c.extent&&(0,L.dY)(c.extent,u);U&&(B=(0,C.Ed)(B,(0,L.dY)(c.extent,u)));const W=K*f/2/g,q=K*M/2/g,$=[_[0]-W,_[1]-q,_[0]+W,_[1]+q],z=G.getTileRangeForExtentAndZ(B,V),at={};at[V]={};const J=this.createLoadedTileFinder(D,u,at),it=this.tmpExtent,et=this.tmpTileRange_;this.newTiles_=!1;const lt=R?(0,C.dY)(i.center,S,R,n.size):void 0;for(let Q=z.minX;Q<=z.maxX;++Q)for(let nt=z.minY;nt<=z.maxY;++nt){if(R&&!G.tileCoordIntersectsViewport([V,Q,nt],lt))continue;const ht=this.getTile(V,Q,nt,n);if(this.isDrawableTile(ht)){const At=(0,p.sq)(this);if(ht.getState()==y.Z.LOADED){at[V][ht.tileCoord.toString()]=ht;let Gt=ht.inTransition(At);Gt&&1!==c.opacity&&(ht.endTransition(At),Gt=!1),!this.newTiles_&&(Gt||!this.renderedTiles.includes(ht))&&(this.newTiles_=!0)}if(1===ht.getAlpha(At,n.time))continue}const It=G.getTileCoordChildTileRange(ht.tileCoord,et,it);let Dt=!1;It&&(Dt=J(V+1,It)),Dt||G.forEachTileCoordParentTileRange(ht.tileCoord,J,et,it)}const ct=K/m*v/g;(0,I.qC)(this.pixelTransform,n.size[0]/2,n.size[1]/2,1/v,1/v,R,-f/2,-M/2);const Rt=(0,I.BB)(this.pixelTransform);this.useContainer(a,Rt,this.getBackground(n));const Tt=this.context,Lt=Tt.canvas;(0,I.nb)(this.inversePixelTransform,this.pixelTransform),(0,I.qC)(this.tempTransform,f/2,M/2,ct,ct,0,-f/2,-M/2),Lt.width!=f||Lt.height!=M?(Lt.width=f,Lt.height=M):this.containerReused||Tt.clearRect(0,0,f,M),U&&this.clipUnrotated(Tt,n,U),D.getInterpolate()||(Tt.imageSmoothingEnabled=!1),this.preRender(Tt,n),this.renderedTiles.length=0;let wt,jt,F,St=Object.keys(at).map(Number);St.sort(s.kK),1!==c.opacity||this.containerReused&&!D.getOpaque(n.viewState.projection)?(wt=[],jt=[]):St=St.reverse();for(let Q=St.length-1;Q>=0;--Q){const nt=St[Q],ht=D.getTilePixelSize(nt,v,u),Dt=G.getResolution(nt)/K,At=ht[0]*Dt*ct,Gt=ht[1]*Dt*ct,Ut=G.getTileCoordForCoordAndZ((0,C.rL)($),nt),Mt=G.getTileCoordExtent(Ut),Ht=(0,I.nn)(this.tempTransform,[g*(Mt[0]-$[0])/K,g*($[3]-Mt[3])/K]),$t=g*D.getGutterForProjection(u),zt=at[nt];for(const te in zt){const ae=zt[te],Ct=ae.tileCoord,ue=Ut[1]-Ct[1],fe=Math.round(Ht[0]-(ue-1)*At),Pe=Ut[2]-Ct[2],Ke=Math.round(Ht[1]-(Pe-1)*Gt),ve=Math.round(Ht[0]-ue*At),Re=Math.round(Ht[1]-Pe*Gt),tt=fe-ve,st=Ke-Re,dt=V===nt,mt=dt&&1!==ae.getAlpha((0,p.sq)(this),n.time);let Pt=!1;if(!mt)if(wt){F=[ve,Re,ve+tt,Re,ve+tt,Re+st,ve,Re+st];for(let bt=0,Nt=wt.length;bt<Nt;++bt)if(V!==nt&&nt<jt[bt]){const Jt=wt[bt];(0,C.kK)([ve,Re,ve+tt,Re+st],[Jt[0],Jt[3],Jt[4],Jt[7]])&&(Pt||(Tt.save(),Pt=!0),Tt.beginPath(),Tt.moveTo(F[0],F[1]),Tt.lineTo(F[2],F[3]),Tt.lineTo(F[4],F[5]),Tt.lineTo(F[6],F[7]),Tt.moveTo(Jt[6],Jt[7]),Tt.lineTo(Jt[4],Jt[5]),Tt.lineTo(Jt[2],Jt[3]),Tt.lineTo(Jt[0],Jt[1]),Tt.clip())}wt.push(F),jt.push(nt)}else Tt.clearRect(ve,Re,tt,st);this.drawTileImage(ae,n,ve,Re,tt,st,$t,dt),wt&&!mt?(Pt&&Tt.restore(),this.renderedTiles.unshift(ae)):this.renderedTiles.push(ae),this.updateUsedTiles(n.usedTiles,D,ae)}}return this.renderedRevision=w,this.renderedResolution=K,this.extentChanged=!this.renderedExtent_||!(0,C.fS)(this.renderedExtent_,$),this.renderedExtent_=$,this.renderedPixelRatio=v,this.renderedProjection=u,this.manageTilePyramid(n,D,G,v,u,B,V,P.getPreload()),this.scheduleExpireCache(n,D),this.postRender(Tt,n),c.extent&&Tt.restore(),Tt.imageSmoothingEnabled=!0,Rt!==Lt.style.transform&&(Lt.style.transform=Rt),this.container}drawTileImage(n,a,c,i,u,m,_,R){const v=this.getTileImage(n);if(!v)return;const P=(0,p.sq)(this),D=a.layerStatesArray[a.layerIndex],w=D.opacity*(R?n.getAlpha(P,a.time):1),G=w!==this.context.globalAlpha;G&&(this.context.save(),this.context.globalAlpha=w),this.context.drawImage(v,_,_,v.width-2*_,v.height-2*_,c,i,u,m),G&&this.context.restore(),w!==D.opacity?a.animate=!0:R&&n.endTransition(P)}getImage(){const n=this.context;return n?n.canvas:null}getTileImage(n){return n.getImage()}scheduleExpireCache(n,a){if(a.canExpireCache()){const c=function(i,u,m){const _=(0,p.sq)(i);_ in m.usedTiles&&i.expireCache(m.viewState.projection,m.usedTiles[_])}.bind(null,a);n.postRenderFunctions.push(c)}}updateUsedTiles(n,a,c){const i=(0,p.sq)(a);i in n||(n[i]={}),n[i][c.getKey()]=!0}manageTilePyramid(n,a,c,i,u,m,_,R,v){const P=(0,p.sq)(a);P in n.wantedTiles||(n.wantedTiles[P]={});const D=n.wantedTiles[P],w=n.tileQueue,G=c.getMinZoom(),V=n.viewState.rotation,K=V?(0,C.dY)(n.viewState.center,n.viewState.resolution,V,n.size):void 0;let S,g,f,M,U,W,B=0;for(W=G;W<=_;++W)for(g=c.getTileRangeForExtentAndZ(m,W,g),f=c.getResolution(W),M=g.minX;M<=g.maxX;++M)for(U=g.minY;U<=g.maxY;++U)V&&!c.tileCoordIntersectsViewport([W,M,U],K)||(_-W<=R?(++B,S=a.getTile(W,M,U,i,u),S.getState()==y.Z.IDLE&&(D[S.getKey()]=!0,w.isKeyQueued(S.getKey())||w.enqueue([S,P,c.getTileCoordCenter(S.tileCoord),f])),void 0!==v&&v(S)):a.useTile(W,M,U,u));a.updateCacheSize(B,u)}}},2257:(_t,k,l)=>{"use strict";l.d(k,{Pn:()=>p,Qz:()=>C,eR:()=>y,se:()=>I});var Z=l(1915),T=l(1540);const O={Point:function a(u,m,_,R,v){const P=_.getImage(),D=_.getText();let w;if(P){if(P.getImageState()!=Z.Z.LOADED)return;let G=u;if(v){const K=P.getDeclutterMode();if("none"!==K)if(G=v,"obstacle"===K){const B=u.getBuilder(_.getZIndex(),"Image");B.setImageStyle(P,w),B.drawPoint(m,R)}else D&&D.getText()&&(w={})}const V=G.getBuilder(_.getZIndex(),"Image");V.setImageStyle(P,w),V.drawPoint(m,R)}if(D&&D.getText()){let G=u;v&&(G=v);const V=G.getBuilder(_.getZIndex(),"Text");V.setTextStyle(D,w),V.drawText(m,R)}},LineString:function e(u,m,_,R,v){const P=_.getStroke();if(P){const w=u.getBuilder(_.getZIndex(),"LineString");w.setFillStrokeStyle(null,P),w.drawLineString(m,R)}const D=_.getText();if(D&&D.getText()){const w=(v||u).getBuilder(_.getZIndex(),"Text");w.setTextStyle(D),w.drawText(m,R)}},Polygon:function i(u,m,_,R,v){const P=_.getFill(),D=_.getStroke();if(P||D){const G=u.getBuilder(_.getZIndex(),"Polygon");G.setFillStrokeStyle(P,D),G.drawPolygon(m,R)}const w=_.getText();if(w&&w.getText()){const G=(v||u).getBuilder(_.getZIndex(),"Text");G.setTextStyle(w),G.drawText(m,R)}},MultiPoint:function c(u,m,_,R,v){const P=_.getImage(),D=_.getText();let w;if(P){if(P.getImageState()!=Z.Z.LOADED)return;let G=u;if(v){const K=P.getDeclutterMode();if("none"!==K)if(G=v,"obstacle"===K){const B=u.getBuilder(_.getZIndex(),"Image");B.setImageStyle(P,w),B.drawMultiPoint(m,R)}else D&&D.getText()&&(w={})}const V=G.getBuilder(_.getZIndex(),"Image");V.setImageStyle(P,w),V.drawMultiPoint(m,R)}if(D&&D.getText()){let G=u;v&&(G=v);const V=G.getBuilder(_.getZIndex(),"Text");V.setTextStyle(D,w),V.drawText(m,R)}},MultiLineString:function d(u,m,_,R,v){const P=_.getStroke();if(P){const w=u.getBuilder(_.getZIndex(),"LineString");w.setFillStrokeStyle(null,P),w.drawMultiLineString(m,R)}const D=_.getText();if(D&&D.getText()){const w=(v||u).getBuilder(_.getZIndex(),"Text");w.setTextStyle(D),w.drawText(m,R)}},MultiPolygon:function n(u,m,_,R,v){const P=_.getFill(),D=_.getStroke();if(D||P){const G=u.getBuilder(_.getZIndex(),"Polygon");G.setFillStrokeStyle(P,D),G.drawMultiPolygon(m,R)}const w=_.getText();if(w&&w.getText()){const G=(v||u).getBuilder(_.getZIndex(),"Text");G.setTextStyle(w),G.drawText(m,R)}},GeometryCollection:function t(u,m,_,R,v){const P=m.getGeometriesArray();let D,w;for(D=0,w=P.length;D<w;++D)(0,O[P[D].getType()])(u,P[D],_,R,v)},Circle:function L(u,m,_,R,v){const P=_.getFill(),D=_.getStroke();if(P||D){const G=u.getBuilder(_.getZIndex(),"Circle");G.setFillStrokeStyle(P,D),G.drawCircle(m,R)}const w=_.getText();if(w&&w.getText()){const G=(v||u).getBuilder(_.getZIndex(),"Text");G.setTextStyle(w),G.drawText(m,R)}}};function y(u,m){return parseInt((0,T.sq)(u),10)-parseInt((0,T.sq)(m),10)}function I(u,m){const _=C(u,m);return _*_}function C(u,m){return.5*u/m}function p(u,m,_,R,v,P,D){let w=!1;const G=_.getImage();if(G){const V=G.getImageState();V==Z.Z.LOADED||V==Z.Z.ERROR?G.unlistenImageChange(v):(V==Z.Z.IDLE&&G.load(),G.listenImageChange(v),w=!0)}return function s(u,m,_,R,v,P){const D=_.getGeometryFunction()(m);if(!D)return;const w=D.simplifyTransformed(R,v);_.getRenderer()?o(u,w,_,m):(0,O[w.getType()])(u,w,_,m,P)}(u,m,_,R,P,D),w}function o(u,m,_,R){if("GeometryCollection"!=m.getType())u.getBuilder(_.getZIndex(),"Default").drawCustom(m,R,_.getRenderer(),_.getHitDetectionRenderer());else{const P=m.getGeometries();for(let D=0,w=P.length;D<w;++D)o(u,P[D],_,R)}}},4253:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>v});var T=l(8501),N=l(1962),O=l(2763),y=l(1063),I=l(7942),C=l(1775);var t=l(6694);let e;const d=[];function n(P,D,w,G,V){P.beginPath(),P.moveTo(0,0),P.lineTo(D,w),P.lineTo(G,V),P.closePath(),P.save(),P.clip(),P.fillRect(0,0,Math.max(D,G)+1,Math.max(w,V)),P.restore()}function a(P,D){return Math.abs(P[4*D]-210)>2||Math.abs(P[4*D+3]-191.25)>2}function i(P,D,w,G){const V=(0,I.vs)(w,D,P);let K=(0,I._Q)(D,G,w);const B=D.getMetersPerUnit();void 0!==B&&(K*=B);const S=P.getMetersPerUnit();void 0!==S&&(K/=S);const g=P.getExtent();if(!g||(0,y.b8)(g,V)){const f=(0,I._Q)(P,K,V)/K;isFinite(f)&&f>0&&(K/=f)}return K}var _=l(1074);const v=class R extends N.Z{constructor(D,w,G,V,K,B,S,g,f,M,U,W){super(K,O.Z.IDLE,{interpolate:!!W}),this.renderEdges_=void 0!==U&&U,this.pixelRatio_=S,this.gutter_=g,this.canvas_=null,this.sourceTileGrid_=w,this.targetTileGrid_=V,this.wrappedTileCoord_=B||K,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const q=V.getTileCoordExtent(this.wrappedTileCoord_),$=this.targetTileGrid_.getExtent();let z=this.sourceTileGrid_.getExtent();const at=$?(0,y.Ed)(q,$):q;if(0===(0,y.bg)(at))return void(this.state=O.Z.EMPTY);const J=D.getExtent();J&&(z=z?(0,y.Ed)(z,J):J);const it=V.getResolution(this.wrappedTileCoord_[0]),et=function u(P,D,w,G){const V=(0,y.qg)(w);let K=i(P,D,V,G);return(!isFinite(K)||K<=0)&&(0,y.H6)(w,function(B){return K=i(P,D,B,G),isFinite(K)&&K>0}),K}(D,G,at,it);if(!isFinite(et)||et<=0)return void(this.state=O.Z.EMPTY);if(this.triangulation_=new class s{constructor(D,w,G,V,K,B){this.sourceProj_=D,this.targetProj_=w;let S={};const g=(0,I.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(it){const et=it[0]+"/"+it[1];return S[et]||(S[et]=g(it)),S[et]},this.maxSourceExtent_=V,this.errorThresholdSquared_=K*K,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!V&&!!this.sourceProj_.getExtent()&&(0,y.dz)(V)==(0,y.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,y.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,y.dz)(this.targetProj_.getExtent()):null;const f=(0,y.rL)(G),M=(0,y.Xv)(G),U=(0,y.w$)(G),W=(0,y.hC)(G),q=this.transformInv_(f),$=this.transformInv_(M),z=this.transformInv_(U),at=this.transformInv_(W),J=10+(B?Math.max(0,Math.ceil(Math.log2((0,y.bg)(G)/(B*B*256*256)))):0);if(this.addQuad_(f,M,U,W,q,$,z,at,J),this.wrapsXInSource_){let it=1/0;this.triangles_.forEach(function(et,lt,ct){it=Math.min(it,et.source[0][0],et.source[1][0],et.source[2][0])}),this.triangles_.forEach(function(et){if(Math.max(et.source[0][0],et.source[1][0],et.source[2][0])-it>this.sourceWorldWidth_/2){const lt=[[et.source[0][0],et.source[0][1]],[et.source[1][0],et.source[1][1]],[et.source[2][0],et.source[2][1]]];lt[0][0]-it>this.sourceWorldWidth_/2&&(lt[0][0]-=this.sourceWorldWidth_),lt[1][0]-it>this.sourceWorldWidth_/2&&(lt[1][0]-=this.sourceWorldWidth_),lt[2][0]-it>this.sourceWorldWidth_/2&&(lt[2][0]-=this.sourceWorldWidth_);const ct=Math.min(lt[0][0],lt[1][0],lt[2][0]);Math.max(lt[0][0],lt[1][0],lt[2][0])-ct<this.sourceWorldWidth_/2&&(et.source=lt)}}.bind(this))}S={}}addTriangle_(D,w,G,V,K,B){this.triangles_.push({source:[V,K,B],target:[D,w,G]})}addQuad_(D,w,G,V,K,B,S,g,f){const M=(0,y.hI)([K,B,S,g]),U=this.sourceWorldWidth_?(0,y.dz)(M)/this.sourceWorldWidth_:null,W=this.sourceWorldWidth_,q=this.sourceProj_.canWrapX()&&U>.5&&U<1;let $=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const at=(0,y.hI)([D,w,G,V]);$=(0,y.dz)(at)/this.targetWorldWidth_>.25||$}!q&&this.sourceProj_.isGlobal()&&U&&($=U>.25||$)}if(!$&&this.maxSourceExtent_&&isFinite(M[0])&&isFinite(M[1])&&isFinite(M[2])&&isFinite(M[3])&&!(0,y.kK)(M,this.maxSourceExtent_))return;let z=0;if(!($||isFinite(K[0])&&isFinite(K[1])&&isFinite(B[0])&&isFinite(B[1])&&isFinite(S[0])&&isFinite(S[1])&&isFinite(g[0])&&isFinite(g[1])))if(f>0)$=!0;else if(z=(isFinite(K[0])&&isFinite(K[1])?0:8)+(isFinite(B[0])&&isFinite(B[1])?0:4)+(isFinite(S[0])&&isFinite(S[1])?0:2)+(isFinite(g[0])&&isFinite(g[1])?0:1),1!=z&&2!=z&&4!=z&&8!=z)return;if(f>0){if(!$){const J=this.transformInv_([(D[0]+G[0])/2,(D[1]+G[1])/2]);let it;it=q?((0,C.$W)(K[0],W)+(0,C.$W)(S[0],W))/2-(0,C.$W)(J[0],W):(K[0]+S[0])/2-J[0];const et=(K[1]+S[1])/2-J[1];$=it*it+et*et>this.errorThresholdSquared_}if($){if(Math.abs(D[0]-G[0])<=Math.abs(D[1]-G[1])){const at=[(w[0]+G[0])/2,(w[1]+G[1])/2],J=this.transformInv_(at),it=[(V[0]+D[0])/2,(V[1]+D[1])/2],et=this.transformInv_(it);this.addQuad_(D,w,at,it,K,B,J,et,f-1),this.addQuad_(it,at,G,V,et,J,S,g,f-1)}else{const at=[(D[0]+w[0])/2,(D[1]+w[1])/2],J=this.transformInv_(at),it=[(G[0]+V[0])/2,(G[1]+V[1])/2],et=this.transformInv_(it);this.addQuad_(D,at,it,V,K,J,et,g,f-1),this.addQuad_(at,w,G,it,J,B,S,et,f-1)}return}}if(q){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&z)&&this.addTriangle_(D,G,V,K,S,g),0==(14&z)&&this.addTriangle_(D,G,w,K,S,B),z&&(0==(13&z)&&this.addTriangle_(w,V,D,B,g,K),0==(7&z)&&this.addTriangle_(w,V,G,B,g,S))}calculateSourceExtent(){const D=(0,y.lJ)();return this.triangles_.forEach(function(w,G,V){const K=w.source;(0,y.Wj)(D,K[0]),(0,y.Wj)(D,K[1]),(0,y.Wj)(D,K[2])}),D}getTriangles(){return this.triangles_}}(D,G,at,z,et*(void 0!==M?M:.5),it),0===this.triangulation_.getTriangles().length)return void(this.state=O.Z.EMPTY);this.sourceZ_=w.getZForResolution(et);let ct=this.triangulation_.calculateSourceExtent();if(z&&(D.canWrapX()?(ct[1]=(0,C.uZ)(ct[1],z[1],z[3]),ct[3]=(0,C.uZ)(ct[3],z[1],z[3])):ct=(0,y.Ed)(ct,z)),(0,y.bg)(ct)){const Rt=w.getTileRangeForExtentAndZ(ct,this.sourceZ_);for(let Tt=Rt.minX;Tt<=Rt.maxX;Tt++)for(let Lt=Rt.minY;Lt<=Rt.maxY;Lt++){const St=f(this.sourceZ_,Tt,Lt,S);St&&this.sourceTiles_.push(St)}0===this.sourceTiles_.length&&(this.state=O.Z.EMPTY)}else this.state=O.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const D=[];if(this.sourceTiles_.forEach(function(w,G,V){w&&w.getState()==O.Z.LOADED&&D.push({extent:this.sourceTileGrid_.getTileCoordExtent(w.tileCoord),image:w.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===D.length)this.state=O.Z.ERROR;else{const w=this.wrappedTileCoord_[0],G=this.targetTileGrid_.getTileSize(w),V="number"==typeof G?G:G[0],K="number"==typeof G?G:G[1],B=this.targetTileGrid_.getResolution(w),S=this.sourceTileGrid_.getResolution(this.sourceZ_),g=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function m(P,D,w,G,V,K,B,S,g,f,M,U){const W=(0,t.E4)(Math.round(w*P),Math.round(w*D),d);if(U||(W.imageSmoothingEnabled=!1),0===g.length)return W.canvas;function q(lt){return Math.round(lt*w)/w}W.scale(w,w),W.globalCompositeOperation="lighter";const $=(0,y.lJ)();g.forEach(function(lt,ct,Rt){(0,y.l7)($,lt.extent)});const z=(0,y.dz)($),at=(0,y.Cr)($),J=(0,t.E4)(Math.round(w*z/G),Math.round(w*at/G));U||(J.imageSmoothingEnabled=!1);const it=w/G;g.forEach(function(lt,ct,Rt){const Tt=lt.extent[0]-$[0],Lt=-(lt.extent[3]-$[3]),St=(0,y.dz)(lt.extent),wt=(0,y.Cr)(lt.extent);lt.image.width>0&&lt.image.height>0&&J.drawImage(lt.image,f,f,lt.image.width-2*f,lt.image.height-2*f,Tt*it,Lt*it,St*it,wt*it)});const et=(0,y.rL)(B);return S.getTriangles().forEach(function(lt,ct,Rt){const Tt=lt.source,Lt=lt.target;let St=Tt[0][0],wt=Tt[0][1],jt=Tt[1][0],F=Tt[1][1],Q=Tt[2][0],nt=Tt[2][1];const ht=q((Lt[0][0]-et[0])/K),It=q(-(Lt[0][1]-et[1])/K),Dt=q((Lt[1][0]-et[0])/K),At=q(-(Lt[1][1]-et[1])/K),Gt=q((Lt[2][0]-et[0])/K),Ut=q(-(Lt[2][1]-et[1])/K),Mt=St,Ht=wt;St=0,wt=0,jt-=Mt,F-=Ht,Q-=Mt,nt-=Ht;const zt=(0,C.SV)([[jt,F,0,0,Dt-ht],[Q,nt,0,0,Gt-ht],[0,0,jt,F,At-It],[0,0,Q,nt,Ut-It]]);if(zt){if(W.save(),W.beginPath(),function c(){if(void 0===e){const P=document.createElement("canvas").getContext("2d");P.globalCompositeOperation="lighter",P.fillStyle="rgba(210, 0, 0, 0.75)",n(P,4,5,4,0),n(P,4,5,0,5);const D=P.getImageData(0,0,3,3).data;e=a(D,0)||a(D,4)||a(D,8)}return e}()||!U){W.moveTo(Dt,At);const te=4,ae=ht-Dt,Ct=It-At;for(let ue=0;ue<te;ue++)W.lineTo(Dt+q((ue+1)*ae/te),At+q(ue*Ct/(te-1))),ue!=te-1&&W.lineTo(Dt+q((ue+1)*ae/te),At+q((ue+1)*Ct/(te-1)));W.lineTo(Gt,Ut)}else W.moveTo(Dt,At),W.lineTo(ht,It),W.lineTo(Gt,Ut);W.clip(),W.transform(zt[0],zt[2],zt[1],zt[3],ht,It),W.translate($[0]-Mt,$[3]-Ht),W.scale(G/w,-G/w),W.drawImage(J.canvas,0,0),W.restore()}}),M&&(W.save(),W.globalCompositeOperation="source-over",W.strokeStyle="black",W.lineWidth=1,S.getTriangles().forEach(function(lt,ct,Rt){const Tt=lt.target,Lt=(Tt[0][0]-et[0])/K,St=-(Tt[0][1]-et[1])/K,wt=(Tt[1][0]-et[0])/K,jt=-(Tt[1][1]-et[1])/K,F=(Tt[2][0]-et[0])/K,Q=-(Tt[2][1]-et[1])/K;W.beginPath(),W.moveTo(wt,jt),W.lineTo(Lt,St),W.lineTo(F,Q),W.closePath(),W.stroke()}),W.restore()),W.canvas}(V,K,this.pixelRatio_,S,this.sourceTileGrid_.getExtent(),B,g,this.triangulation_,D,this.gutter_,this.renderEdges_,this.interpolate),this.state=O.Z.LOADED}this.changed()}load(){if(this.state==O.Z.IDLE){this.state=O.Z.LOADING,this.changed();let D=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(w,G,V){const K=w.getState();if(K==O.Z.IDLE||K==O.Z.LOADING){D++;const B=(0,_.oL)(w,T.Z.CHANGE,function(S){const g=w.getState();(g==O.Z.LOADED||g==O.Z.ERROR||g==O.Z.EMPTY)&&((0,_.bN)(B),D--,0===D&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(B)}}.bind(this)),0===D?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(w,G,V){w.getState()==O.Z.IDLE&&w.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(_.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,t.jy)(this.canvas_.getContext("2d")),d.push(this.canvas_),this.canvas_=null),super.release()}}},9194:(_t,k,l)=>{"use strict";l.d(k,{Gw:()=>y,YP:()=>N,gE:()=>O,h$:()=>T});var Z=l(1775);function T(I){if(void 0!==I)return 0}function N(I){if(void 0!==I)return I}function O(I){const C=2*Math.PI/I;return function(L,p){return p?L:void 0!==L?L=Math.floor(L/C+.5)*C:void 0}}function y(I){return I=I||(0,Z.Yr)(5),function(C,L){return L?C:void 0!==C?Math.abs(C)<=I?0:C:void 0}}},1203:(_t,k,l)=>{"use strict";function T(y){return y[0]>0&&y[1]>0}function N(y,I,C){return void 0===C&&(C=[0,0]),C[0]=y[0]*I+.5|0,C[1]=y[1]*I+.5|0,C}function O(y,I){return Array.isArray(y)?y:(void 0===I?I=[y,y]:(I[0]=y,I[1]=y),I)}l.d(k,{Pq:()=>O,bA:()=>N,py:()=>T})},5873:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>I});var Z=l(3314),T=l(1540),N=l(7942);function y(C){return C?Array.isArray(C)?function(L){return C}:"function"==typeof C?C:function(L){return[C]}:null}const I=class O extends Z.Z{constructor(L){super(),this.projection=(0,N.U2)(L.projection),this.attributions_=y(L.attributions),this.attributionsCollapsible_=void 0===L.attributionsCollapsible||L.attributionsCollapsible,this.loading=!1,this.state_=void 0!==L.state?L.state:"ready",this.wrapX_=void 0!==L.wrapX&&L.wrapX,this.interpolate_=!!L.interpolate,this.viewResolver=null,this.viewRejector=null;const p=this;this.viewPromise_=new Promise(function(s,o){p.viewResolver=s,p.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return(0,T.O3)()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(L){this.attributions_=y(L),this.changed()}setState(L){this.state_=L,this.changed()}}},2805:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>e,s:()=>t});var Z=l(5390),T=l(5873),N=l(7459),O=l(2763),y=l(1540),I=l(9772),C=l(7942),L=l(5435),p=l(107),s=l(1203);class t extends Z.ZP{constructor(n,a){super(n),this.tile=a}}const e=class o extends T.Z{constructor(n){super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate}),this.opaque_=void 0!==n.opaque&&n.opaque,this.tilePixelRatio_=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,this.tileGrid=void 0!==n.tileGrid?n.tileGrid:null,this.tileGrid&&(0,s.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new N.Z(n.cacheSize||0),this.tmpSize=[0,0],this.key_=n.key||"",this.tileOptions={transition:n.transition,interpolate:n.interpolate},this.zDirection=n.zDirection?n.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(n,a){const c=this.getTileCacheForProjection(n);c&&c.expireCache(a)}forEachLoadedTile(n,a,c,i){const u=this.getTileCacheForProjection(n);if(!u)return!1;let _,R,v,m=!0;for(let P=c.minX;P<=c.maxX;++P)for(let D=c.minY;D<=c.maxY;++D)R=(0,L.lg)(a,P,D),v=!1,u.containsKey(R)&&(_=u.get(R),v=_.getState()===O.Z.LOADED,v&&(v=!1!==i(_))),v||(m=!1);return m}getGutterForProjection(n){return 0}getKey(){return this.key_}setKey(n){this.key_!==n&&(this.key_=n,this.changed())}getOpaque(n){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(n,a,c,i,u){return(0,y.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(n){return this.tileGrid?this.tileGrid:(0,p.X$)(n)}getTileCacheForProjection(n){const a=this.getProjection();return(0,I.h)(null===a||(0,C.OP)(a,n),68),this.tileCache}getTilePixelRatio(n){return this.tilePixelRatio_}getTilePixelSize(n,a,c){const i=this.getTileGridForProjection(c),u=this.getTilePixelRatio(a),m=(0,s.Pq)(i.getTileSize(n),this.tmpSize);return 1==u?m:(0,s.bA)(m,u,this.tmpSize)}getTileCoordForTileUrlFunction(n,a){a=void 0!==a?a:this.getProjection();const c=this.getTileGridForProjection(a);return this.getWrapX()&&a.isGlobal()&&(n=(0,p.Cf)(c,n,a)),(0,L.tE)(n,c)?n:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(n,a){const c=this.getTileCacheForProjection(a);n>c.highWaterMark&&(c.highWaterMark=n)}useTile(n,a,c,i){}}},1508:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>e});var Z=l(8501),T=l(6029),N=l(4253),O=l(7459),y=l(2763),I=l(458),C=l(7942),L=l(5435),p=l(107),s=l(1540);function t(d,n){d.getImage().src=n}const e=class o extends I.Z{constructor(n){super({attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:t,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:void 0===n.interpolate||n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection}),this.crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,this.tileClass=void 0!==n.tileClass?n.tileClass:T.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=n.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const n in this.tileCacheForProjection)if(this.tileCacheForProjection[n].canExpireCache())return!0;return!1}expireCache(n,a){const c=this.getTileCacheForProjection(n);this.tileCache.expireCache(this.tileCache==c?a:{});for(const i in this.tileCacheForProjection){const u=this.tileCacheForProjection[i];u.expireCache(u==c?a:{})}}getGutterForProjection(n){return this.getProjection()&&n&&!(0,C.OP)(this.getProjection(),n)?0:this.getGutter()}getGutter(){return 0}getKey(){let n=super.getKey();return this.getInterpolate()||(n+=":disable-interpolation"),n}getOpaque(n){return!(this.getProjection()&&n&&!(0,C.OP)(this.getProjection(),n))&&super.getOpaque(n)}getTileGridForProjection(n){const a=this.getProjection();if(this.tileGrid&&(!a||(0,C.OP)(a,n)))return this.tileGrid;{const c=(0,s.sq)(n);return c in this.tileGridForProjection||(this.tileGridForProjection[c]=(0,p.X$)(n)),this.tileGridForProjection[c]}}getTileCacheForProjection(n){const a=this.getProjection();if(!a||(0,C.OP)(a,n))return this.tileCache;{const c=(0,s.sq)(n);return c in this.tileCacheForProjection||(this.tileCacheForProjection[c]=new O.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[c]}}createTile_(n,a,c,i,u,m){const _=[n,a,c],R=this.getTileCoordForTileUrlFunction(_,u),v=R?this.tileUrlFunction(R,i,u):void 0,P=new this.tileClass(_,void 0!==v?y.Z.IDLE:y.Z.EMPTY,void 0!==v?v:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return P.key=m,P.addEventListener(Z.Z.CHANGE,this.handleTileChange.bind(this)),P}getTile(n,a,c,i,u){const m=this.getProjection();if(!m||!u||(0,C.OP)(m,u))return this.getTileInternal(n,a,c,i,m||u);{const _=this.getTileCacheForProjection(u),R=[n,a,c];let v;const P=(0,L.km)(R);_.containsKey(P)&&(v=_.get(P));const D=this.getKey();if(v&&v.key==D)return v;{const w=this.getTileGridForProjection(m),G=this.getTileGridForProjection(u),V=this.getTileCoordForTileUrlFunction(R,u),K=new N.Z(m,w,u,G,R,V,this.getTilePixelRatio(i),this.getGutter(),function(B,S,g,f){return this.getTileInternal(B,S,g,f,m)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return K.key=D,v?(K.interimTile=v,K.refreshInterimChain(),_.replace(P,K)):_.set(P,K),K}}}getTileInternal(n,a,c,i,u){let m=null;const _=(0,L.lg)(n,a,c),R=this.getKey();if(this.tileCache.containsKey(_)){if(m=this.tileCache.get(_),m.key!=R){const v=m;m=this.createTile_(n,a,c,i,u,R),m.interimTile=v.getState()==y.Z.IDLE?v.interimTile:v,m.refreshInterimChain(),this.tileCache.replace(_,m)}}else m=this.createTile_(n,a,c,i,u,R),this.tileCache.set(_,m);return m}setRenderReprojectionEdges(n){if(this.renderReprojectionEdges_!=n){this.renderReprojectionEdges_=n;for(const a in this.tileCacheForProjection)this.tileCacheForProjection[a].clear();this.changed()}}setTileGridForProjection(n,a){const c=(0,C.U2)(n);if(c){const i=(0,s.sq)(c);i in this.tileGridForProjection||(this.tileGridForProjection[i]=a)}}clear(){super.clear();for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear()}}},458:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>L});var T=l(2805),N=l(2763),O=l(1335),y=l(5435),I=l(1540);class C extends T.Z{constructor(s){super({attributions:s.attributions,cacheSize:s.cacheSize,opaque:s.opaque,projection:s.projection,state:s.state,tileGrid:s.tileGrid,tilePixelRatio:s.tilePixelRatio,wrapX:s.wrapX,transition:s.transition,interpolate:s.interpolate,key:s.key,attributionsCollapsible:s.attributionsCollapsible,zDirection:s.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===C.prototype.tileUrlFunction,this.tileLoadFunction=s.tileLoadFunction,s.tileUrlFunction&&(this.tileUrlFunction=s.tileUrlFunction),this.urls=null,s.urls?this.setUrls(s.urls):s.url&&this.setUrl(s.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(s){const o=s.target,t=(0,I.sq)(o),e=o.getState();let d;e==N.Z.LOADING?(this.tileLoadingKeys_[t]=!0,d="tileloadstart"):t in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[t],d=e==N.Z.ERROR?"tileloaderror":e==N.Z.LOADED?"tileloadend":void 0),null!=d&&this.dispatchEvent(new T.s(d,o))}setTileLoadFunction(s){this.tileCache.clear(),this.tileLoadFunction=s,this.changed()}setTileUrlFunction(s,o){this.tileUrlFunction=s,this.tileCache.pruneExceptNewestZ(),void 0!==o?this.setKey(o):this.changed()}setUrl(s){const o=(0,O.Gk)(s);this.urls=o,this.setUrls(o)}setUrls(s){this.urls=s;const o=s.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,O.uR)(s,this.tileGrid),o):this.setKey(o)}tileUrlFunction(s,o,t){}useTile(s,o,t){const e=(0,y.lg)(s,o,t);this.tileCache.containsKey(e)&&this.tileCache.get(e)}}const L=C},5029:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>N});var Z=l(9772);const N=class T{constructor(y){this.highWaterMark=void 0!==y?y:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(y){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(y){return this.entries_.hasOwnProperty(y)}forEach(y){let I=this.oldest_;for(;I;)y(I.value_,I.key_,this),I=I.newer}get(y,I){const C=this.entries_[y];return(0,Z.h)(void 0!==C,15),C===this.newest_||(C===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(C.newer.older=C.older,C.older.newer=C.newer),C.newer=null,C.older=this.newest_,this.newest_.newer=C,this.newest_=C),C.value_}remove(y){const I=this.entries_[y];return(0,Z.h)(void 0!==I,15),I===this.newest_?(this.newest_=I.older,this.newest_&&(this.newest_.newer=null)):I===this.oldest_?(this.oldest_=I.newer,this.oldest_&&(this.oldest_.older=null)):(I.newer.older=I.older,I.older.newer=I.newer),delete this.entries_[y],--this.count_,I.value_}getCount(){return this.count_}getKeys(){const y=new Array(this.count_);let C,I=0;for(C=this.newest_;C;C=C.older)y[I++]=C.key_;return y}getValues(){const y=new Array(this.count_);let C,I=0;for(C=this.newest_;C;C=C.older)y[I++]=C.value_;return y}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(y){if(this.containsKey(y))return this.entries_[y].value_}pop(){const y=this.oldest_;return delete this.entries_[y.key_],y.newer&&(y.newer.older=null),this.oldest_=y.newer,this.oldest_||(this.newest_=null),--this.count_,y.value_}replace(y,I){this.get(y),this.entries_[y].value_=I}set(y,I){(0,Z.h)(!(y in this.entries_),16);const C={key_:y,newer:null,older:this.newest_,value_:I};this.newest_?this.newest_.newer=C:this.oldest_=C,this.newest_=C,this.entries_[y]=C,++this.count_}setSize(y){this.highWaterMark=y}}},9050:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>N});var Z=l(4737);class T extends Z.Z{constructor(y){super({points:1/0,fill:(y=y||{radius:5}).fill,radius:y.radius,stroke:y.stroke,scale:void 0!==y.scale?y.scale:1,rotation:void 0!==y.rotation?y.rotation:0,rotateWithView:void 0!==y.rotateWithView&&y.rotateWithView,displacement:void 0!==y.displacement?y.displacement:[0,0],declutterMode:y.declutterMode})}clone(){const y=this.getScale(),I=new T({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(y)?y.slice():y,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return I.setOpacity(this.getOpacity()),I}setRadius(y){this.radius_=y,this.render()}}const N=T},2002:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>T});class Z{constructor(O){this.color_=void 0!==(O=O||{}).color?O.color:null}clone(){const O=this.getColor();return new Z({color:Array.isArray(O)?O.slice():O||void 0})}getColor(){return this.color_}setColor(O){this.color_=O}}const T=Z},4647:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>a});var Z=l(8501),T=l(1915),N=l(6105),O=l(9861),y=l(9772),I=l(170),C=l(6694),L=l(9842),p=l(2816);let s=null;class o extends I.Z{constructor(i,u,m,_,R,v){super(),this.hitDetectionImage_=null,this.image_=i,this.crossOrigin_=_,this.canvas_={},this.color_=v,this.unlisten_=null,this.imageState_=R,this.size_=m,this.src_=u}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===T.Z.LOADED){s||(s=(0,C.E4)(1,1)),s.drawImage(this.image_,0,0);try{s.getImageData(0,0,1,1),this.tainted_=!1}catch(i){s=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(Z.Z.CHANGE)}handleImageError_(){this.imageState_=T.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=T.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(i){return this.image_||this.initializeImage_(),this.replaceColor_(i),this.canvas_[i]?this.canvas_[i]:this.image_}getPixelRatio(i){return this.replaceColor_(i),this.canvas_[i]?i:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const i=this.size_[0],u=this.size_[1],m=(0,C.E4)(i,u);m.fillRect(0,0,i,u),this.hitDetectionImage_=m.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===T.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=T.Z.LOADING;try{this.image_.src=this.src_}catch(i){this.handleImageError_()}this.unlisten_=(0,p.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(i){if(!this.color_||this.canvas_[i]||this.imageState_!==T.Z.LOADED)return;const u=this.image_,m=document.createElement("canvas");m.width=Math.ceil(u.width*i),m.height=Math.ceil(u.height*i);const _=m.getContext("2d");_.scale(i,i),_.drawImage(u,0,0),_.globalCompositeOperation="multiply",_.fillStyle=(0,O.XC)(this.color_),_.fillRect(0,0,m.width/i,m.height/i),_.globalCompositeOperation="destination-in",_.drawImage(u,0,0),this.canvas_[i]=m}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var d=l(1540);class n extends N.Z{constructor(i){super({opacity:void 0!==(i=i||{}).opacity?i.opacity:1,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,declutterMode:i.declutterMode}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:"fraction",this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;const v=void 0!==i.img?i.img:null;this.imgSize_=i.imgSize;let P=i.src;(0,y.h)(!(void 0!==P&&v),4),(0,y.h)(!v||v&&this.imgSize_,5),(void 0===P||0===P.length)&&v&&(P=v.src||(0,d.sq)(v)),(0,y.h)(void 0!==P&&P.length>0,6);const D=void 0!==i.src?T.Z.IDLE:T.Z.LOADED;this.color_=void 0!==i.color?(0,O._2)(i.color):null,this.iconImage_=function t(c,i,u,m,_,R){let v=L.c.get(i,m,R);return v||(v=new o(c,i,u,m,_,R),L.c.set(i,m,R,v)),v}(v,P,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,D,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==i.size?i.size:null}clone(){const i=this.getScale();return new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(i)?i.slice():i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let i=this.normalizedAnchor_;if(!i){i=this.anchor_;const _=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!_)return null;i=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(i[0]*=_[0]),"fraction"==this.anchorYUnits_&&(i[1]*=_[1])}if("top-left"!=this.anchorOrigin_){if(!_)return null;i===this.anchor_&&(i=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(i[0]=-i[0]+_[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(i[1]=-i[1]+_[1])}this.normalizedAnchor_=i}const u=this.getDisplacement(),m=this.getScaleArray();return[i[0]-u[0]/m[0],i[1]+u[1]/m[1]]}setAnchor(i){this.anchor_=i,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(i){return this.iconImage_.getImage(i)}getPixelRatio(i){return this.iconImage_.getPixelRatio(i)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let i=this.offset_;if("top-left"!=this.offsetOrigin_){const u=this.getSize(),m=this.iconImage_.getSize();if(!u||!m)return null;i=i.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(i[0]=m[0]-u[0]-i[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(i[1]=m[1]-u[1]-i[1])}return this.origin_=i,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(i){this.iconImage_.addEventListener(Z.Z.CHANGE,i)}load(){this.iconImage_.load()}unlistenImageChange(i){this.iconImage_.removeEventListener(Z.Z.CHANGE,i)}}const a=n},9842:(_t,k,l)=>{"use strict";l.d(k,{c:()=>y});var Z=l(9861);function N(I,C,L){return C+":"+I+":"+(L?(0,Z.XC)(L):"null")}const y=new class T{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let C=0;for(const L in this.cache_){const p=this.cache_[L];0==(3&C++)&&!p.hasListener()&&(delete this.cache_[L],--this.cacheSize_)}}}get(C,L,p){const s=N(C,L,p);return s in this.cache_?this.cache_[s]:null}set(C,L,p,s){const o=N(C,L,p);this.cache_[o]=s,++this.cacheSize_}setSize(C){this.maxCacheSize_=C,this.expire()}}},6105:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>O});var Z=l(1540),T=l(1203);class N{constructor(I){this.opacity_=I.opacity,this.rotateWithView_=I.rotateWithView,this.rotation_=I.rotation,this.scale_=I.scale,this.scaleArray_=(0,T.Pq)(I.scale),this.displacement_=I.displacement,this.declutterMode_=I.declutterMode}clone(){const I=this.getScale();return new N({opacity:this.getOpacity(),scale:Array.isArray(I)?I.slice():I,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,Z.O3)()}getImage(I){return(0,Z.O3)()}getHitDetectionImage(){return(0,Z.O3)()}getPixelRatio(I){return 1}getImageState(){return(0,Z.O3)()}getImageSize(){return(0,Z.O3)()}getOrigin(){return(0,Z.O3)()}getSize(){return(0,Z.O3)()}setDisplacement(I){this.displacement_=I}setOpacity(I){this.opacity_=I}setRotateWithView(I){this.rotateWithView_=I}setRotation(I){this.rotation_=I}setScale(I){this.scale_=I,this.scaleArray_=(0,T.Pq)(I)}listenImageChange(I){(0,Z.O3)()}load(){(0,Z.O3)()}unlistenImageChange(I){(0,Z.O3)()}}const O=N},4737:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>L});var Z=l(1915),T=l(6105),N=l(9861),O=l(7877),y=l(6694),I=l(5909);class C extends T.Z{constructor(s){super({opacity:1,rotateWithView:void 0!==s.rotateWithView&&s.rotateWithView,rotation:void 0!==s.rotation?s.rotation:0,scale:void 0!==s.scale?s.scale:1,displacement:void 0!==s.displacement?s.displacement:[0,0],declutterMode:s.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==s.fill?s.fill:null,this.origin_=[0,0],this.points_=s.points,this.radius_=void 0!==s.radius?s.radius:s.radius1,this.radius2_=s.radius2,this.angle_=void 0!==s.angle?s.angle:0,this.stroke_=void 0!==s.stroke?s.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const s=this.getScale(),o=new C({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(s)?s.slice():s,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return o.setOpacity(this.getOpacity()),o}getAnchor(){const s=this.size_;if(!s)return null;const o=this.getDisplacement(),t=this.getScaleArray();return[s[0]/2-o[0]/t[0],s[1]/2+o[1]/t[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(s){this.fill_=s,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(s){let o=this.canvas_[s];if(!o){const t=this.renderOptions_,e=(0,y.E4)(t.size*s,t.size*s);this.draw_(t,e,s),o=e.canvas,this.canvas_[s]=o}return o}getPixelRatio(s){return s}getImageSize(){return this.size_}getImageState(){return Z.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(s){this.stroke_=s,this.render()}listenImageChange(s){}load(){}unlistenImageChange(s){}calculateLineJoinSize_(s,o,t){if(0===o||this.points_===1/0||"bevel"!==s&&"miter"!==s)return o;let e=this.radius_,d=void 0===this.radius2_?e:this.radius2_;if(e<d){const S=e;e=d,d=S}const a=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),c=d*Math.sin(a),u=e-Math.sqrt(d*d-c*c),m=Math.sqrt(c*c+u*u),_=m/c;if("miter"===s&&_<=t)return _*o;const R=o/2/_,v=o/2*(u/m),D=Math.sqrt((e+R)*(e+R)+v*v)-e;if(void 0===this.radius2_||"bevel"===s)return 2*D;const w=e*Math.sin(a),V=d-Math.sqrt(e*e-w*w),B=Math.sqrt(w*w+V*V)/w;return B<=t?2*Math.max(D,B*o/2-d-e):2*D}createRenderOptions(){let d,s=I.rc,o=0,t=null,e=0,n=0;this.stroke_&&(d=this.stroke_.getColor(),null===d&&(d=I.Tx),d=(0,O.y)(d),n=this.stroke_.getWidth(),void 0===n&&(n=I.yC),t=this.stroke_.getLineDash(),e=this.stroke_.getLineDashOffset(),s=this.stroke_.getLineJoin(),void 0===s&&(s=I.rc),o=this.stroke_.getMiterLimit(),void 0===o&&(o=I.V4));const a=this.calculateLineJoinSize_(s,n,o),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:d,strokeWidth:n,size:Math.ceil(2*c+a),lineDash:t,lineDashOffset:e,lineJoin:s,miterLimit:o}}render(){this.renderOptions_=this.createRenderOptions();const s=this.renderOptions_.size;this.canvas_={},this.size_=[s,s]}draw_(s,o,t){if(o.scale(t,t),o.translate(s.size/2,s.size/2),this.createPath_(o),this.fill_){let e=this.fill_.getColor();null===e&&(e=I.bL),o.fillStyle=(0,O.y)(e),o.fill()}this.stroke_&&(o.strokeStyle=s.strokeStyle,o.lineWidth=s.strokeWidth,s.lineDash&&(o.setLineDash(s.lineDash),o.lineDashOffset=s.lineDashOffset),o.lineJoin=s.lineJoin,o.miterLimit=s.miterLimit,o.stroke())}createHitDetectionCanvas_(s){if(this.fill_){let o=this.fill_.getColor(),t=0;if("string"==typeof o&&(o=(0,N._2)(o)),null===o?t=1:Array.isArray(o)&&(t=4===o.length?o[3]:1),0===t){const e=(0,y.E4)(s.size,s.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(s,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(s){let o=this.points_;const t=this.radius_;if(o===1/0)s.arc(0,0,t,0,2*Math.PI);else{const e=void 0===this.radius2_?t:this.radius2_;void 0!==this.radius2_&&(o*=2);const d=this.angle_-Math.PI/2,n=2*Math.PI/o;for(let a=0;a<o;a++){const c=d+a*n,i=a%2==0?t:e;s.lineTo(i*Math.cos(c),i*Math.sin(c))}s.closePath()}}drawHitDetectionCanvas_(s,o){o.translate(s.size/2,s.size/2),this.createPath_(o),o.fillStyle=I.bL,o.fill(),this.stroke_&&(o.strokeStyle=s.strokeStyle,o.lineWidth=s.strokeWidth,s.lineDash&&(o.setLineDash(s.lineDash),o.lineDashOffset=s.lineDashOffset),o.lineJoin=s.lineJoin,o.miterLimit=s.miterLimit,o.stroke())}}const L=C},2925:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>T});class Z{constructor(O){this.color_=void 0!==(O=O||{}).color?O.color:null,this.lineCap_=O.lineCap,this.lineDash_=void 0!==O.lineDash?O.lineDash:null,this.lineDashOffset_=O.lineDashOffset,this.lineJoin_=O.lineJoin,this.miterLimit_=O.miterLimit,this.width_=O.width}clone(){const O=this.getColor();return new Z({color:Array.isArray(O)?O.slice():O||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(O){this.color_=O}setLineCap(O){this.lineCap_=O}setLineDash(O){this.lineDash_=O}setLineDashOffset(O){this.lineDashOffset_=O}setLineJoin(O){this.lineJoin_=O}setMiterLimit(O){this.miterLimit_=O}setWidth(O){this.width_=O}}const T=Z},9487:(_t,k,l)=>{"use strict";l.d(k,{J$:()=>I,ZP:()=>o,yF:()=>L});var Z=l(9050),T=l(2002),N=l(2925),O=l(9772);class y{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=s,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new y({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(d){return d.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=s,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function I(t){let e;if("function"==typeof t)e=t;else{let d;Array.isArray(t)?d=t:((0,O.h)("function"==typeof t.getZIndex,41),d=[t]),e=function(){return d}}return e}let C=null;function L(t,e){if(!C){const d=new T.Z({color:"rgba(255,255,255,0.4)"}),n=new N.Z({color:"#3399CC",width:1.25});C=[new y({image:new Z.Z({fill:d,stroke:n,radius:5}),fill:d,stroke:n})]}return C}function s(t){return t.getGeometry()}const o=y},864:(_t,k,l)=>{"use strict";l.d(k,{Z:()=>y});var Z=l(2002),T=l(1203);class O{constructor(C){this.font_=(C=C||{}).font,this.rotation_=C.rotation,this.rotateWithView_=C.rotateWithView,this.scale_=C.scale,this.scaleArray_=(0,T.Pq)(void 0!==C.scale?C.scale:1),this.text_=C.text,this.textAlign_=C.textAlign,this.justify_=C.justify,this.textBaseline_=C.textBaseline,this.fill_=void 0!==C.fill?C.fill:new Z.Z({color:"#333"}),this.maxAngle_=void 0!==C.maxAngle?C.maxAngle:Math.PI/4,this.placement_=void 0!==C.placement?C.placement:"point",this.overflow_=!!C.overflow,this.stroke_=void 0!==C.stroke?C.stroke:null,this.offsetX_=void 0!==C.offsetX?C.offsetX:0,this.offsetY_=void 0!==C.offsetY?C.offsetY:0,this.backgroundFill_=C.backgroundFill?C.backgroundFill:null,this.backgroundStroke_=C.backgroundStroke?C.backgroundStroke:null,this.padding_=void 0===C.padding?null:C.padding}clone(){const C=this.getScale();return new O({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(C)?C.slice():C,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(C){this.overflow_=C}setFont(C){this.font_=C}setMaxAngle(C){this.maxAngle_=C}setOffsetX(C){this.offsetX_=C}setOffsetY(C){this.offsetY_=C}setPlacement(C){this.placement_=C}setRotateWithView(C){this.rotateWithView_=C}setFill(C){this.fill_=C}setRotation(C){this.rotation_=C}setScale(C){this.scale_=C,this.scaleArray_=(0,T.Pq)(void 0!==C?C:1)}setStroke(C){this.stroke_=C}setText(C){this.text_=C}setTextAlign(C){this.textAlign_=C}setJustify(C){this.justify_=C}setTextBaseline(C){this.textBaseline_=C}setBackgroundFill(C){this.backgroundFill_=C}setBackgroundStroke(C){this.backgroundStroke_=C}setPadding(C){this.padding_=C}}const y=O},5435:(_t,k,l)=>{"use strict";function Z(L,p,s,o){return void 0!==o?(o[0]=L,o[1]=p,o[2]=s,o):[L,p,s]}function T(L,p,s){return L+"/"+p+"/"+s}function N(L){return T(L[0],L[1],L[2])}function y(L){return L.split("/").map(Number)}function I(L){return(L[1]<<L[0])+L[2]}function C(L,p){const s=L[0],o=L[1],t=L[2];if(p.getMinZoom()>s||s>p.getMaxZoom())return!1;const e=p.getFullTileRange(s);return!e||e.containsXY(o,t)}l.d(k,{T9:()=>Z,Ul:()=>y,km:()=>N,lg:()=>T,tE:()=>C,vp:()=>I})},107:(_t,k,l)=>{"use strict";l.d(k,{dl:()=>i,Tl:()=>_,X$:()=>n,Cf:()=>a});var Z=l(9039),T=l(9938),N=l(9772),O=l(1775),y=l(1063),I=l(5435),C=l(5346),L=l(9351),p=l(1203);const s=[0,0,0],e=class t{constructor(v){let P;if(this.minZoom=void 0!==v.minZoom?v.minZoom:0,this.resolutions_=v.resolutions,(0,N.h)((0,L.pT)(this.resolutions_,function(w,G){return G-w},!0),17),!v.origins)for(let w=0,G=this.resolutions_.length-1;w<G;++w)if(P){if(this.resolutions_[w]/this.resolutions_[w+1]!==P){P=void 0;break}}else P=this.resolutions_[w]/this.resolutions_[w+1];this.zoomFactor_=P,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==v.origin?v.origin:null,this.origins_=null,void 0!==v.origins&&(this.origins_=v.origins,(0,N.h)(this.origins_.length==this.resolutions_.length,20));const D=v.extent;void 0!==D&&!this.origin_&&!this.origins_&&(this.origin_=(0,y.rL)(D)),(0,N.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==v.tileSizes&&(this.tileSizes_=v.tileSizes,(0,N.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==v.tileSize?v.tileSize:this.tileSizes_?null:T.S,(0,N.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==D?D:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==v.sizes?this.fullTileRanges_=v.sizes.map(function(w,G){const V=new Z.Z(Math.min(0,w[0]),Math.max(w[0]-1,-1),Math.min(0,w[1]),Math.max(w[1]-1,-1));if(D){const K=this.getTileRangeForExtentAndZ(D,G);V.minX=Math.max(K.minX,V.minX),V.maxX=Math.min(K.maxX,V.maxX),V.minY=Math.max(K.minY,V.minY),V.maxY=Math.min(K.maxY,V.maxY)}return V},this):D&&this.calculateTileRanges_(D)}forEachTileCoord(v,P,D){const w=this.getTileRangeForExtentAndZ(v,P);for(let G=w.minX,V=w.maxX;G<=V;++G)for(let K=w.minY,B=w.maxY;K<=B;++K)D([P,G,K])}forEachTileCoordParentTileRange(v,P,D,w){let G,V,K,B=null,S=v[0]-1;for(2===this.zoomFactor_?(V=v[1],K=v[2]):B=this.getTileCoordExtent(v,w);S>=this.minZoom;){if(2===this.zoomFactor_?(V=Math.floor(V/2),K=Math.floor(K/2),G=(0,Z.T)(V,V,K,K,D)):G=this.getTileRangeForExtentAndZ(B,S,D),P(S,G))return!0;--S}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(v){return this.origin_?this.origin_:this.origins_[v]}getResolution(v){return this.resolutions_[v]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(v,P,D){if(v[0]<this.maxZoom){if(2===this.zoomFactor_){const G=2*v[1],V=2*v[2];return(0,Z.T)(G,G+1,V,V+1,P)}const w=this.getTileCoordExtent(v,D||this.tmpExtent_);return this.getTileRangeForExtentAndZ(w,v[0]+1,P)}return null}getTileRangeForTileCoordAndZ(v,P,D){if(P>this.maxZoom||P<this.minZoom)return null;const w=v[0],G=v[1],V=v[2];if(P===w)return(0,Z.T)(G,V,G,V,D);if(this.zoomFactor_){const B=Math.pow(this.zoomFactor_,P-w),S=Math.floor(G*B),g=Math.floor(V*B);if(P<w)return(0,Z.T)(S,S,g,g,D);const f=Math.floor(B*(G+1))-1,M=Math.floor(B*(V+1))-1;return(0,Z.T)(S,f,g,M,D)}const K=this.getTileCoordExtent(v,this.tmpExtent_);return this.getTileRangeForExtentAndZ(K,P,D)}getTileRangeExtent(v,P,D){const w=this.getOrigin(v),G=this.getResolution(v),V=(0,p.Pq)(this.getTileSize(v),this.tmpSize_);return(0,y.T9)(w[0]+P.minX*V[0]*G,w[1]+P.minY*V[1]*G,w[0]+(P.maxX+1)*V[0]*G,w[1]+(P.maxY+1)*V[1]*G,D)}getTileRangeForExtentAndZ(v,P,D){const w=s;this.getTileCoordForXYAndZ_(v[0],v[3],P,!1,w);const G=w[1],V=w[2];return this.getTileCoordForXYAndZ_(v[2],v[1],P,!0,w),(0,Z.T)(G,w[1],V,w[2],D)}getTileCoordCenter(v){const P=this.getOrigin(v[0]),D=this.getResolution(v[0]),w=(0,p.Pq)(this.getTileSize(v[0]),this.tmpSize_);return[P[0]+(v[1]+.5)*w[0]*D,P[1]-(v[2]+.5)*w[1]*D]}getTileCoordExtent(v,P){const D=this.getOrigin(v[0]),w=this.getResolution(v[0]),G=(0,p.Pq)(this.getTileSize(v[0]),this.tmpSize_),V=D[0]+v[1]*G[0]*w,K=D[1]-(v[2]+1)*G[1]*w;return(0,y.T9)(V,K,V+G[0]*w,K+G[1]*w,P)}getTileCoordForCoordAndResolution(v,P,D){return this.getTileCoordForXYAndResolution_(v[0],v[1],P,!1,D)}getTileCoordForXYAndResolution_(v,P,D,w,G){const V=this.getZForResolution(D),K=D/this.getResolution(V),B=this.getOrigin(V),S=(0,p.Pq)(this.getTileSize(V),this.tmpSize_);let g=K*(v-B[0])/D/S[0],f=K*(B[1]-P)/D/S[1];return w?(g=(0,O.mD)(g,5)-1,f=(0,O.mD)(f,5)-1):(g=(0,O.GW)(g,5),f=(0,O.GW)(f,5)),(0,I.T9)(V,g,f,G)}getTileCoordForXYAndZ_(v,P,D,w,G){const V=this.getOrigin(D),K=this.getResolution(D),B=(0,p.Pq)(this.getTileSize(D),this.tmpSize_);let S=(v-V[0])/K/B[0],g=(V[1]-P)/K/B[1];return w?(S=(0,O.mD)(S,5)-1,g=(0,O.mD)(g,5)-1):(S=(0,O.GW)(S,5),g=(0,O.GW)(g,5)),(0,I.T9)(D,S,g,G)}getTileCoordForCoordAndZ(v,P,D){return this.getTileCoordForXYAndZ_(v[0],v[1],P,!1,D)}getTileCoordResolution(v){return this.resolutions_[v[0]]}getTileSize(v){return this.tileSize_?this.tileSize_:this.tileSizes_[v]}getFullTileRange(v){return this.fullTileRanges_?this.fullTileRanges_[v]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,v):null}getZForResolution(v,P){const D=(0,L.h7)(this.resolutions_,v,P||0);return(0,O.uZ)(D,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(v,P){return(0,C.mV)(P,0,P.length,2,this.getTileCoordExtent(v))}calculateTileRanges_(v){const P=this.resolutions_.length,D=new Array(P);for(let w=this.minZoom;w<P;++w)D[w]=this.getTileRangeForExtentAndZ(v,w);this.fullTileRanges_=D}};var d=l(7942);function n(R){let v=R.getDefaultTileGrid();return v||(v=function m(R,v,P,D){return function c(R,v,P,D){D=void 0!==D?D:"top-left";const w=u(R,v,P);return new e({extent:R,origin:(0,y.g0)(R,D),resolutions:w,tileSize:P})}(_(R),v,P,D)}(R),R.setDefaultTileGrid(v)),v}function a(R,v,P){const D=v[0],w=R.getTileCoordCenter(v),G=_(P);if((0,y.b8)(G,w))return v;{const V=(0,y.dz)(G),K=Math.ceil((G[0]-w[0])/V);return w[0]+=V*K,R.getTileCoordForCoordAndZ(w,D)}}function i(R){const v=R||{},P=v.extent||(0,d.U2)("EPSG:3857").getExtent(),D={extent:P,minZoom:v.minZoom,tileSize:v.tileSize,resolutions:u(P,v.maxZoom,v.tileSize,v.maxResolution)};return new e(D)}function u(R,v,P,D){v=void 0!==v?v:T.e,P=(0,p.Pq)(void 0!==P?P:T.S);const w=(0,y.Cr)(R),G=(0,y.dz)(R);D=D>0?D:Math.max(G/P[0],w/P[1]);const V=v+1,K=new Array(V);for(let B=0;B<V;++B)K[B]=D/Math.pow(2,B);return K}function _(R){let v=(R=(0,d.U2)(R)).getExtent();if(!v){const P=180*d.Wm.degrees/R.getMetersPerUnit();v=(0,y.T9)(-P,-P,P,P)}return v}},9938:(_t,k,l)=>{"use strict";l.d(k,{S:()=>T,e:()=>Z});const Z=42,T=256},1335:(_t,k,l)=>{"use strict";l.d(k,{Gk:()=>L,Un:()=>I,uR:()=>y});var Z=l(9772),T=l(1775),N=l(5435);function O(p,s){const o=/\{z\}/g,t=/\{x\}/g,e=/\{y\}/g,d=/\{-y\}/g;return function(n,a,c){if(n)return p.replace(o,n[0].toString()).replace(t,n[1].toString()).replace(e,n[2].toString()).replace(d,function(){const u=s.getFullTileRange(n[0]);return(0,Z.h)(u,55),(u.getHeight()-n[2]-1).toString()})}}function y(p,s){const o=p.length,t=new Array(o);for(let e=0;e<o;++e)t[e]=O(p[e],s);return I(t)}function I(p){return 1===p.length?p[0]:function(s,o,t){if(s){const e=(0,N.vp)(s),d=(0,T.$W)(e,p.length);return p[d](s,o,t)}}}function L(p){const s=[];let o=/\{([a-z])-([a-z])\}/.exec(p);if(o){const t=o[1].charCodeAt(0),e=o[2].charCodeAt(0);let d;for(d=t;d<=e;++d)s.push(p.replace(o[0],String.fromCharCode(d)));return s}if(o=/\{(\d+)-(\d+)\}/.exec(p),o){const t=parseInt(o[2],10);for(let e=parseInt(o[1],10);e<=t;e++)s.push(p.replace(o[0],e.toString()));return s}return s.push(p),s}},3863:(_t,k,l)=>{"use strict";l.d(k,{BB:()=>m,Iu:()=>e,Jp:()=>I,U1:()=>s,Ue:()=>O,bA:()=>o,lk:()=>L,mc:()=>y,n3:()=>t,nb:()=>c,nn:()=>p,qC:()=>d});var Z=l(4544),T=l(9772);const N=new Array(6);function O(){return[1,0,0,1,0,0]}function y(_){return C(_,1,0,0,1,0,0)}function I(_,R){const v=_[0],P=_[1],D=_[2],w=_[3],G=_[4],V=_[5],K=R[0],B=R[1],S=R[2],g=R[3],f=R[4],M=R[5];return _[0]=v*K+D*B,_[1]=P*K+w*B,_[2]=v*S+D*g,_[3]=P*S+w*g,_[4]=v*f+D*M+G,_[5]=P*f+w*M+V,_}function C(_,R,v,P,D,w,G){return _[0]=R,_[1]=v,_[2]=P,_[3]=D,_[4]=w,_[5]=G,_}function L(_,R){return _[0]=R[0],_[1]=R[1],_[2]=R[2],_[3]=R[3],_[4]=R[4],_[5]=R[5],_}function p(_,R){const v=R[0],P=R[1];return R[0]=_[0]*v+_[2]*P+_[4],R[1]=_[1]*v+_[3]*P+_[5],R}function s(_,R){const v=Math.cos(R),P=Math.sin(R);return I(_,C(N,v,P,-P,v,0,0))}function o(_,R,v){return I(_,C(N,R,0,0,v,0,0))}function t(_,R,v){return C(_,R,0,0,v,0,0)}function e(_,R,v){return I(_,C(N,1,0,0,1,R,v))}function d(_,R,v,P,D,w,G,V){const K=Math.sin(w),B=Math.cos(w);return _[0]=P*B,_[1]=D*K,_[2]=-P*K,_[3]=D*B,_[4]=G*P*B-V*P*K+R,_[5]=G*D*K+V*D*B+v,_}function c(_,R){const v=function i(_){return _[0]*_[3]-_[1]*_[2]}(R);(0,T.h)(0!==v,32);const P=R[0],D=R[1],w=R[2],G=R[3],V=R[4],K=R[5];return _[0]=G/v,_[1]=-D/v,_[2]=-w/v,_[3]=P/v,_[4]=(w*K-G*V)/v,_[5]=-(P*K-D*V)/v,_}let u;function m(_){const R="matrix("+_.join(", ")+")";if(Z.Id)return R;const v=u||(u=document.createElement("div"));return v.style.transform=R,v.style.transform}},1540:(_t,k,l)=>{"use strict";function Z(){throw new Error("Unimplemented abstract method.")}l.d(k,{O3:()=>Z,sq:()=>N});let T=0;function N(y){return y.ol_uid||(y.ol_uid=String(++T))}}}]);